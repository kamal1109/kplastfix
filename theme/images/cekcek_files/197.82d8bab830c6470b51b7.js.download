(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{"6q77":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return r}));var s,r,l=o("XCam"),i=o("Vdly");!function(e){e.getDefaultColor=function(){return i.getValue("default_symbol_marker_color",l.b.Red)},e.setDefaultColor=function(e){i.setValue("default_symbol_marker_color",e,{forceFlush:!0})}}(s||(s={})),function(e){e.getDefaultColor=function(){return i.getValue("default_symbols_filter_color",l.b.Red)},e.setDefaultColor=function(e){i.setValue("default_symbols_filter_color",e,{forceFlush:!0})},e.setIsActive=function(e){i.setValue("marked_symbols_filter",e,{forceFlush:!0})},e.getIsActive=function(){return i.getBool("marked_symbols_filter",!1)}}(r||(r={}))},KH30:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var s=o("q1tI"),r=o.n(s),l=o("9Kw7"),i=o("XAms"),n=o("WgB9");class a extends r.a.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.props.onChange(e)}}render(){const{value:e}=this.props;return r.a.createElement("span",{className:n.wrapper},r.a.createElement("span",{className:n.buttons,onClick:i.a},r.a.createElement(l.a,{buttonClassName:n.colorSelectButton,value:e,onChange:this._onChange,onSelectedClick:this._onChange})))}}},Ke6I:function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return n}));var s,r=o("XCam"),l=o("6q77"),i=o("lnbc");!function(e){e[e.SymbolMarker=0]="SymbolMarker",e[e.ScreenerFilter=1]="ScreenerFilter"}(s||(s={}));class n{constructor(e){this._context=e.context}getColor(){switch(this._context){case s.SymbolMarker:return this._getAvailableColor(l.a.getDefaultColor());case s.ScreenerFilter:return this._getAvailableColor(l.b.getDefaultColor())}}setColor(e){switch(this._context){case s.SymbolMarker:l.a.setDefaultColor(this._getAvailableColor(e));break;case s.ScreenerFilter:l.b.setDefaultColor(this._getAvailableColor(e))}}_getAvailableColor(e){return Object(i.b)(e)?e:(this.setColor(r.b.Red),r.b.Red)}}},M4p8:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var s=o("XCam"),r=(o("EsMY"),o("gWrr")),l=o("T6Dw"),i=o("TSYQ"),n=o("xKng");class a{constructor(e){this._onClick=e=>{this._opts.onClick&&this._opts.onClick(e)},this._onDblClick=e=>{this._opts.onDblClick&&this._opts.onDblClick(e)},this._container=e.container,this._opts=e,this._elem=this._render(e),this._addEventListeners()}setColor(e){this.removeColor(),this._elem.classList.add(n[e])}removeColor(){this._elem.classList.remove(n[s.b.Red],n[s.b.Orange],n[s.b.Purple],n[s.b.Green],n[s.b.Blue],n[s.b.Cyan],n[s.b.Pink])}addClass(e){this._elem.classList.add(e)}removeClass(e){this._elem.classList.remove(e)}getElem(){return this._elem}appendTo(e){this.detach(),this._container=e,this._container.appendChild(this._elem),this._addEventListeners()}detach(){this._removeEventListeners(),this._container&&(this._container.removeChild(this._elem),delete this._container)}_render(e){const t=i(n.uiMarker,{[e.className]:Boolean(e.className),[n[e.color]]:Boolean(e.color)
}),o=e.specialImage||l,s=Object(r.parseHtmlElement)(`<div class="${t}">${o}</div>`);if(!s)throw new Error("Can't parse html");return this._container&&this._container.appendChild(s),s}_addEventListeners(){const e=Modernizr.mobiletouch?"touchstart":"click";this._elem.addEventListener(e,this._onClick),this._opts.onDblClick&&this._elem.addEventListener("dblclick",this._onDblClick)}_removeEventListeners(){const e=Modernizr.mobiletouch?"touchstart":"click";this._elem.removeEventListener(e,this._onClick),this._opts.onDblClick&&this._elem.removeEventListener("dblclick",this._onDblClick)}}},T6Dw:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 12" width="14" height="12" fill="currentColor" focusable="false" preserveAspectRatio="none"><path d="M14 12l-4-6 4-6H0v12z"/></svg>'},WgB9:function(e,t,o){e.exports={wrapper:"wrapper-1tIaxtxu",buttons:"buttons-1tIaxtxu",colorSelectButton:"colorSelectButton-1tIaxtxu"}},fFbJ:function(e,t,o){"use strict";var s=o("YFKU"),r=(o("HbRj"),o("M4p8")),l=o("tEuG"),i=o("+9Gp"),n=o("Ke6I"),a=o("uhCe"),c=o("q1tI"),h=o("KH30"),_=o("7KDR"),u=o("fZEr"),m=o("ehHn"),b=o("JWMC");function C(e,t,o,r){const l=function(e,t,o,r){const l=Object(s.t)("Flag {0}").format(Object(m.n)(t)),i=e.getSymbolColor(t)||void 0,n=s=>{r(),window.runOrSignIn(()=>{o.setColor(s),e.setSymbolsColor([t],o.getColor()),Object(b.trackEvent)("Watchlist","Context menu","Flag")},{source:"Set symbol color"})};return[new _.Action({label:l,fullWidthLabel:!0,onExecute:()=>n(o.getColor())}),new _.Action({label:c.createElement(h.a,{value:i,onChange:n}),fullWidthLabel:!0,doNotCloseOnClick:!0})]}(e,t,o,r);return null!==e.getSymbolColor(t)&&l.push(function(e,t){return new _.Action({label:Object(s.t)("Unflag {0}").format(Object(m.n)(t)),onExecute:o=>{e.setSymbolsColor([t],null),Object(b.trackEvent)("Watchlist","Context menu","Unflag")}})}(e,t)),l.push(function(e){return new _.Action({label:Object(s.t)("Unflag All Symbols in the System"),onExecute:t=>{var o;o=()=>{e.clearAllSymbolsColor()},Object(u.showConfirm)({text:Object(s.t)("Do you really want to unflag all symbols in the system?"),onConfirm:({dialogClose:e})=>{o(),e()}}),Object(b.trackEvent)("Watchlist","Context menu","Unflag all")}})}(e)),l}o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return p}));class d{constructor(e){this._service=Object(l.a)(),this._colorManager=new n.b({context:n.a.SymbolMarker}),this._onClick=e=>{e.preventDefault();const t=()=>{const e=C(this._service,this._symbol,this._colorManager,i.a.hide),t=this._colorManager.getColor(),o={elem:this._uimarker.getElem(),currentColor:t,onSelectColor:this._onSelectColor,actions:e};window.matchMedia(a.a.TabletSmall).matches?i.a.show(o):null===this._color?(i.a.show(o),this._service.setSymbolsColor([this._symbol],t)):(i.a.hide(),this._service.setSymbolsColor([this._symbol],null))};window.runOrSignIn(()=>{this._opts.onClick?this._opts.onClick(this._symbol,t):t()},{source:"Set symbol color"})},this._onSelectColor=e=>{this._colorManager.setColor(e),
this._service.setSymbolsColor([this._symbol],this._colorManager.getColor())},this._onDblClick=e=>{e.preventDefault()},this._onChange=()=>{this._setState(this._service.getSymbolColor(this._symbol))},this._opts=e,this._symbol=e.symbol,this._color=e.color||this._service.getSymbolColor(this._symbol),this._uimarker=new r.a({color:this._color,container:e.container,className:e.className,onClick:this._onClick,onDblClick:this._onDblClick,specialImage:e.specialImage}),null!==this._color&&this._addActiveClassName(),this._service.onSymbolChange(this._symbol,this._onChange)}updateSubscription(){this._setState(this._service.getSymbolColor(this._symbol))}bindTo(e,t){this._service.offSymbolChange(this._symbol,this._onChange),this._symbol=e,this._uimarker.appendTo(t),this._setState(this._service.getSymbolColor(e)),this._service.onSymbolChange(e,this._onChange)}unbind(){this._service.offSymbolChange(this._symbol,this._onChange),this._uimarker.detach()}getElem(){return this._uimarker.getElem()}isMarked(){return null!==this._color}destroy(){this.unbind(),delete this._uimarker,delete this._opts}_setState(e){const t=this.isMarked();this._color=e,null!==this._color?(this._uimarker.setColor(this._color),this._addActiveClassName()):(this._uimarker.removeColor(),this._removeActiveClassName()),void 0!==this._opts.onMarkedChanged&&t!==this.isMarked()&&this._opts.onMarkedChanged()}_addActiveClassName(){this._opts.activeClassName&&this._uimarker.addClass(this._opts.activeClassName)}_removeActiveClassName(){this._opts.activeClassName&&this._uimarker.removeClass(this._opts.activeClassName)}}class g extends d{constructor(e){super(e),this._onInit=()=>{this.updateSubscription()},this._service.onInit(this._onInit)}destroy(){this._service.offInit(this._onInit),super.destroy()}}function p(e){return new g(e)}},xKng:function(e,t,o){e.exports={wrap:"wrap-1PBS_wt6",uiMarker:"uiMarker-1PBS_wt6",red:"red-1PBS_wt6",blue:"blue-1PBS_wt6",green:"green-1PBS_wt6",orange:"orange-1PBS_wt6",purple:"purple-1PBS_wt6",cyan:"cyan-1PBS_wt6",pink:"pink-1PBS_wt6",uiMarker__small:"uiMarker__small-1PBS_wt6"}}}]);