(window.webpackJsonp=window.webpackJsonp||[]).push([["header-toolbar"],{"+GaQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("q1tI");function a(e){if(e.map){return s.Children.toArray(e.children).map(e.map)}return e.children}},"1TxM":function(e,t,i){"use strict";i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return h}));var s=i("q1tI"),a=i.n(s),n=i("17x9"),o=i.n(n);const r=a.a.createContext({});function l(e,t){o.a.checkPropTypes(t,e,"context","RegistryContext")}function c(e){const{validation:t,value:i}=e;return l(i,t),a.a.createElement(r.Provider,{value:i},e.children)}function d(e){const t=Object(s.useContext)(r);return l(t,e),t}function h(){return r}},"4Cm8":function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return g}));var s=i("q1tI"),a=i("TSYQ"),n=i("cvc5"),o=i("Iivm"),r=i("//lZ"),l=i("9uLv"),c=i("Ialn"),d=i("Vike"),h=i("ji/R");const u={isVisibleScrollbar:!0,shouldMeasure:!0,hideButtonsFrom:1};function v(e=b,t=S,i=p,o=m){var d;return(d=class extends s.PureComponent{constructor(e){super(e),this._scroll=s.createRef(),this._wrapMeasureRef=s.createRef(),this._contentMeasureRef=s.createRef(),this._handleScrollLeft=()=>{if(this.props.onScrollButtonClick)return void this.props.onScrollButtonClick("left");const e=this.props.scrollStepSize||this.state.widthWrap-50;this.animateTo(Math.max(0,this.currentPosition()-e))},this._handleScrollRight=()=>{if(this.props.onScrollButtonClick)return void this.props.onScrollButtonClick("right");const e=this.props.scrollStepSize||this.state.widthWrap-50;this.animateTo(Math.min((this.state.widthContent||0)-(this.state.widthWrap||0),this.currentPosition()+e))},this._handleResizeWrap=e=>{this.props.onMeasureWrap&&this.props.onMeasureWrap(e),this.setState({widthWrap:e.width}),this._checkButtonsVisibility()},this._handleResizeContent=e=>{this.props.onMeasureContent&&this.props.onMeasureContent(e);const{shouldDecreaseWidthContent:t,buttonsWidthIfDecreasedWidthContent:i}=this.props;t&&i?this.setState({widthContent:e.width+2*i}):this.setState({widthContent:e.width})},this._handleScroll=()=>{const{onScroll:e}=this.props;e&&e(this.currentPosition(),this.isAtLeft(),this.isAtRight()),this._checkButtonsVisibility()},this._checkButtonsVisibility=()=>{const{isVisibleLeftButton:e,isVisibleRightButton:t}=this.state,i=this.isAtLeft(),s=this.isAtRight();i||e?i&&e&&this.setState({isVisibleLeftButton:!1}):this.setState({isVisibleLeftButton:!0}),s||t?s&&t&&this.setState({isVisibleRightButton:!1}):this.setState({isVisibleRightButton:!0})},this.state={widthContent:0,widthWrap:0,isVisibleRightButton:!1,isVisibleLeftButton:!1}}componentDidMount(){this._checkButtonsVisibility()}componentDidUpdate(e,t){t.widthWrap===this.state.widthWrap&&t.widthContent===this.state.widthContent||this._handleScroll(),this.props.shouldMeasure&&this._wrapMeasureRef.current&&this._contentMeasureRef.current&&(this._wrapMeasureRef.current.measure(),this._contentMeasureRef.current.measure())}
currentPosition(){return this._scroll.current?Object(c.isRtl)()?Object(c.getLTRScrollLeft)(this._scroll.current):this._scroll.current.scrollLeft:0}isAtLeft(){return!this._isOverflowed()||this.currentPosition()<=this.props.hideButtonsFrom}isAtRight(){return!this._isOverflowed()||this.currentPosition()+this.state.widthWrap>=this.state.widthContent-this.props.hideButtonsFrom}animateTo(e,t=l.dur){const i=this._scroll.current;i&&(Object(c.isRtl)()&&(e=Object(c.getLTRScrollLeftOffset)(i,e)),t<=0?i.scrollLeft=Math.round(e):Object(r.doAnimate)({onStep(e,t){i.scrollLeft=Math.round(t)},from:i.scrollLeft,to:Math.round(e),easing:l.easingFunc.easeInOutCubic,duration:t}))}render(){const{children:r,isVisibleScrollbar:l,isVisibleFade:c,isVisibleButtons:d,shouldMeasure:u,shouldDecreaseWidthContent:v,buttonsWidthIfDecreasedWidthContent:p,onMouseOver:m,onMouseOut:b,scrollWrapClassName:S}=this.props,{isVisibleRightButton:f,isVisibleLeftButton:g}=this.state,_=v&&p;return s.createElement(n,{whitelist:["width"],onMeasure:this._handleResizeWrap,shouldMeasure:u,ref:this._wrapMeasureRef},s.createElement("div",{className:h.wrapOverflow,onMouseOver:m,onMouseOut:b},s.createElement("div",{className:a(h.wrap,_?h.wrapWithArrowsOuting:"")},s.createElement("div",{className:a(h.scrollWrap,S,{[h.noScrollBar]:!l}),onScroll:this._handleScroll,ref:this._scroll},s.createElement(n,{onMeasure:this._handleResizeContent,whitelist:["width"],shouldMeasure:u,ref:this._contentMeasureRef},r)),c&&s.createElement(i,{isVisible:g}),c&&s.createElement(o,{isVisible:f}),d&&s.createElement(e,{onClick:this._handleScrollLeft,isVisible:g}),d&&s.createElement(t,{onClick:this._handleScrollRight,isVisible:f}))))}_isOverflowed(){const{widthContent:e,widthWrap:t}=this.state;return e>t}}).defaultProps=u,d}function p(e){return s.createElement("div",{className:a(h.fadeLeft,{[h.isVisible]:e.isVisible})})}function m(e){return s.createElement("div",{className:a(h.fadeRight,{[h.isVisible]:e.isVisible})})}function b(e){return s.createElement(f,Object.assign({},e,{className:h.scrollLeft}))}function S(e){return s.createElement(f,Object.assign({},e,{className:h.scrollRight}))}function f(e){return s.createElement("div",{className:a(e.className,{[h.isVisible]:e.isVisible}),onClick:e.onClick},s.createElement("div",{className:h.iconWrap},s.createElement(o.a,{icon:d,className:h.icon})))}const g=v(b,S,p,m)},"6aN0":function(e,t,i){e.exports={"css-value-header-toolbar-height":"38px",toolbar:"toolbar-LZaMRgb9",isHidden:"isHidden-LZaMRgb9",overflowWrap:"overflowWrap-LZaMRgb9",customButton:"customButton-LZaMRgb9",hovered:"hovered-LZaMRgb9"}},"6oLA":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M4.56 14a10.05 10.05 0 00.52.91c.41.69 1.04 1.6 1.85 2.5C8.58 19.25 10.95 21 14 21c3.05 0 5.42-1.76 7.07-3.58A17.18 17.18 0 0023.44 14a9.47 9.47 0 00-.52-.91c-.41-.69-1.04-1.6-1.85-2.5C19.42 8.75 17.05 7 14 7c-3.05 0-5.42 1.76-7.07 3.58A17.18 17.18 0 004.56 14zM24 14l.45-.21-.01-.03a7.03 7.03 0 00-.16-.32c-.11-.2-.28-.51-.5-.87-.44-.72-1.1-1.69-1.97-2.65C20.08 7.99 17.45 6 14 6c-3.45 0-6.08 2-7.8 3.92a18.18 18.18 0 00-2.64 3.84v.02h-.01L4 14l-.45-.21-.1.21.1.21L4 14l-.45.21.01.03a5.85 5.85 0 00.16.32c.11.2.28.51.5.87.44.72 1.1 1.69 1.97 2.65C7.92 20.01 10.55 22 14 22c3.45 0 6.08-2 7.8-3.92a18.18 18.18 0 002.64-3.84v-.02h.01L24 14zm0 0l.45.21.1-.21-.1-.21L24 14zm-10-3a3 3 0 100 6 3 3 0 000-6zm-4 3a4 4 0 118 0 4 4 0 01-8 0z"/></svg>'},"8d0Q":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));var s=i("q1tI");function a(){const[e,t]=Object(s.useState)(!1);return[e,{onMouseOver:function(e){n(e)&&t(!0)},onMouseOut:function(e){n(e)&&t(!1)}}]}function n(e){return!e.currentTarget.contains(e.relatedTarget)}},FCWJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("ulZB");class a extends s.b{constructor(e,t,i=[]){super(e,t,"FAVORITE_CHART_STYLES_CHANGED","StyleWidget.quicks",i)}}},IdsS:function(e,t,i){"use strict";var s;i.r(t),i.d(t,"HeaderToolbarComponentIds",(function(){return s})),function(e){e.SymbolSearch="header-toolbar-symbol-search",e.Intervals="header-toolbar-intervals",e.ChartStyles="header-toolbar-chart-styles",e.Compare="header-toolbar-compare",e.Indicators="header-toolbar-indicators",e.StudyTemplates="header-toolbar-study-templates",e.Alerts="header-toolbar-alerts",e.Layouts="header-toolbar-layouts",e.SaveLoad="header-toolbar-save-load",e.UndoRedo="header-toolbar-undo-redo",e.Properties="header-toolbar-properties",e.PublishDesktop="header-toolbar-publish-desktop",e.PublishMobile="header-toolbar-publish-mobile",e.Fullscreen="header-toolbar-fullscreen",e.Screenshot="header-toolbar-screenshot",e.Replay="header-toolbar-replay",e.Financials="header-toolbar-financials",e.StartTrial="header-toolbar-start-trial"}(s||(s={}))},Iivm:function(e,t,i){"use strict";var s=i("mrSG"),a=i("q1tI");const n=a.forwardRef((e,t)=>{const{icon:i=""}=e,n=Object(s.d)(e,["icon"]);return a.createElement("span",Object.assign({},n,{ref:t,dangerouslySetInnerHTML:{__html:i}}))});i.d(t,"a",(function(){return n}))},KMbc:function(e,t,i){"use strict";i.r(t);var s=i("q1tI"),a=i("i8i4"),n=i("Eyy1"),o=i("mrSG"),r=(i("P5fv"),i("TSYQ")),l=i("4O8T"),c=i.n(l),d=i("UXvI"),h=i("Kxc7"),u=i("FQhm"),v=i("17x9"),p=i("cvc5"),m=(i("EsMY"),i("+GaQ")),b=i("+GxX"),S=i("KrBX");function f(e){const{children:t,className:i,noLeftDecoration:a,noRightDecoration:n,noMinimalWidth:o,onClick:l}=e;return s.createElement("div",{className:r(i,S.group,{[S.noMinimalWidth]:o,[S.noLeftDecoration]:a,[S.noRightDecoration]:n}),onClick:l},t)}var g=i("tO+E");class _ extends s.PureComponent{constructor(){
super(...arguments),this._handleMeasure=({width:e})=>{this.props.onWidthChange(e)}}render(){const{children:e,shouldMeasure:t}=this.props;return s.createElement(p,{shouldMeasure:t,onMeasure:this._handleMeasure,whitelist:["width"]},s.createElement("div",{className:g.wrap},e))}}var y=i("tU7i"),C=i("Opoj");function w(e){return s.createElement(y.b,Object.assign({},e,{forceInteractive:!0,icon:C}))}i("YFKU");var M=i("Iivm"),E=i("a+Yp"),T=i("6oLA");const O={text:window.t("View Only Mode")};function I(e){return s.createElement("div",{className:E.wrap},s.createElement(M.a,{className:E.icon,icon:T}),O.text)}var R=i("4Cm8"),D=i("XAms"),V=i("IdsS"),W=i("8d0Q"),k=i("1TxM"),B=(i("bSeV"),i("JWMC")),F=i("a8bL");const A=Object(b.isFeatureEnabled)("hide-copy-readonly"),L=Object(k.b)();class N extends s.PureComponent{constructor(e,t){super(e,t),this._handleMouseOver=e=>{Object(W.a)(e)&&this.setState({isHovered:!0})},this._handleMouseOut=e=>{Object(W.a)(e)&&this.setState({isHovered:!1})},this._activateSymbolSearchMode=()=>{this._setMode(2)},this._activateNormalMode=()=>{this._setMode(1)},this._handleInnerResize=e=>{const{onWidthChange:t}=this.props;t&&t(e)},this._handleMeasureAvailableSpace=({width:e})=>{const{onAvailableSpaceChange:t}=this.props;t&&t(e)},this._processCustoms=e=>{const{isFake:t}=this.props,{mode:i}=this.state,{tools:a}=this.context;return e.map(e=>s.createElement(f,{className:r(1!==i&&F.hidden)},s.createElement(a.Custom,Object.assign({},e,{isFake:t}))))},this._fixLastGroup=(e,t,i)=>{if(t===i.length-1&&s.isValidElement(e)&&e.type===f){const t=void 0!==this.context.tools.Publish&&!this.props.readOnly;return s.cloneElement(e,{noRightDecoration:t})}return e},Object(k.d)(t,{tools:v.any.isRequired}),this.state={isHovered:!1,mode:1,isAuthenticated:window.is_authenticated}}componentDidMount(){window.loginStateChange.subscribe(this,this._onLoginStateChange)}componentWillUnmount(){window.loginStateChange.unsubscribe(this,this._onLoginStateChange)}render(){const{tools:e}=this.context,{features:t,displayMode:i,chartSaver:a,studyMarket:n,readOnly:o,saveLoadSyncEmitter:l,leftCustomButtons:c,rightCustomButtons:d,showScrollbarWhen:h,width:u=0,isFake:v=!1}=this.props,{isHovered:b,mode:S,isAuthenticated:g}=this.state,y=this._processCustoms(c),C=this._processCustoms(d),M=h.includes(i),E=!g&&Boolean(e.StartTrial);return s.createElement("div",{className:r(F.inner,{[F.fake]:v}),onContextMenu:D.b},s.createElement(p,{onMeasure:this._handleMeasureAvailableSpace,whitelist:["width"],shouldMeasure:!v},s.createElement(R.a,{isVisibleFade:Modernizr.mobiletouch&&M,isVisibleButtons:!Modernizr.mobiletouch&&M&&b,isVisibleScrollbar:!1,shouldMeasure:M&&!v,onMouseOver:this._handleMouseOver,onMouseOut:this._handleMouseOut},s.createElement("div",{className:F.content},s.createElement(_,{onWidthChange:this._handleInnerResize,shouldMeasure:v},s.createElement(m.a,{map:this._fixLastGroup},!o&&s.Children.toArray([e.SymbolSearch&&s.createElement(f,{key:"symbol",className:2===S&&F.symbolSearch},s.createElement(e.SymbolSearch,{
id:v?void 0:V.HeaderToolbarComponentIds.SymbolSearch,isActionsVisible:t.allowSymbolSearchSpread,isExpanded:2===S,onFocus:this._activateSymbolSearchMode,onBlur:this._activateNormalMode,maxWidth:u})),e.DateRange&&s.createElement(f,{key:"range"},s.createElement(e.DateRange,null)),e.Intervals&&1===S&&s.createElement(f,{key:"intervals"},s.createElement(e.Intervals,{id:v?void 0:V.HeaderToolbarComponentIds.Intervals,isShownQuicks:t.allowFavoriting,isFavoritingAllowed:t.allowFavoriting,displayMode:i,isFake:v})),e.Bars&&1===S&&s.createElement(f,{key:"styles"},s.createElement(e.Bars,{id:v?void 0:V.HeaderToolbarComponentIds.ChartStyles,isShownQuicks:t.allowFavoriting,isFavoritingAllowed:t.allowFavoriting,displayMode:i,isFake:v})),e.Compare&&1===S&&s.createElement(f,{key:"compare"},s.createElement(e.Compare,{id:v?void 0:V.HeaderToolbarComponentIds.Compare,className:F.button,displayMode:i})),e.Indicators&&1===S&&s.createElement(f,{key:"indicators"},s.createElement(e.Indicators,{id:v?void 0:V.HeaderToolbarComponentIds.Indicators,className:F.button,studyMarket:n,displayMode:i})),e.Financials&&1===S&&s.createElement(f,{key:"financials"},s.createElement(e.Financials,{id:v?void 0:V.HeaderToolbarComponentIds.Financials,className:F.button,displayMode:i})),e.Templates&&1===S&&s.createElement(f,{key:"templates"},s.createElement(e.Templates,{id:v?void 0:V.HeaderToolbarComponentIds.StudyTemplates,isShownQuicks:t.allowFavoriting,isFavoritingAllowed:t.allowFavoriting,displayMode:i})),1===S&&e.Alert&&s.createElement(f,{key:"alert"},s.createElement(e.Alert,{id:v?void 0:V.HeaderToolbarComponentIds.Alerts,className:F.button,displayMode:i})),1===S&&e.AlertReferral&&s.createElement(f,{key:"alert-referral"},s.createElement(e.AlertReferral,{className:F.button,displayMode:i})),e.Replay&&1===S&&s.createElement(f,{key:"replay"},s.createElement(e.Replay,{id:v?void 0:V.HeaderToolbarComponentIds.Replay,className:F.button,displayMode:i})),e.UndoRedo&&1===S&&s.createElement(f,{key:"undo-redo"},s.createElement(e.UndoRedo,{id:v?void 0:V.HeaderToolbarComponentIds.UndoRedo})),e.ScalePercentage&&s.createElement(f,{key:"percentage"},s.createElement(e.ScalePercentage,null)),e.ScaleLogarithm&&s.createElement(f,{key:"logarithm"},s.createElement(e.ScaleLogarithm,null)),...y]),1===S?function(e){const t=e.findIndex(e=>s.isValidElement(e)&&!!e.key&&-1!==e.key.toString().indexOf("view-only-badge"));return[t].filter(e=>e>=0).forEach(t=>{e=s.Children.map(e,(e,i)=>{if(s.isValidElement(e)){switch([t-1,t,t+1].indexOf(i)){case 0:const t={noRightDecoration:!0};e=s.cloneElement(e,t);break;case 1:const i={noLeftDecoration:!0,noRightDecoration:!0};e=s.cloneElement(e,i);break;case 2:const a={noLeftDecoration:!0};e=s.cloneElement(e,a)}}return e})}),e}(s.Children.toArray([o&&s.createElement(f,{key:"view-only-badge"},s.createElement(I,null)),s.createElement(f,{key:"gap",className:r(F.fill,v&&F.collapse)}),!o&&e.Layout&&s.createElement(f,{key:"layout"},s.createElement(e.Layout,{id:v?void 0:V.HeaderToolbarComponentIds.Layouts})),this._isSaveLoadVisible()&&e.SaveLoad&&s.createElement(f,{
key:"save-load-right"},s.createElement(e.SaveLoad,{id:v?void 0:V.HeaderToolbarComponentIds.SaveLoad,chartSaver:a,isReadOnly:o,displayMode:i,isFake:v,stateSyncEmitter:l})),e.SaveLoadReferral&&s.createElement(f,{key:"save-load-referral"},s.createElement(e.SaveLoadReferral,{isReadOnly:o,displayMode:i})),t.showLaunchInPopupButton&&e.OpenPopup&&s.createElement(f,{key:"popup"},s.createElement(e.OpenPopup,null)),!o&&e.Properties&&s.createElement(f,{key:"properties"},s.createElement(e.Properties,{id:v?void 0:V.HeaderToolbarComponentIds.Properties,className:F.iconButton})),!o&&e.Fullscreen&&s.createElement(f,{key:"fullscreen",onClick:this._trackFullscreenButtonClick},s.createElement(e.Fullscreen,{id:v?void 0:V.HeaderToolbarComponentIds.Fullscreen})),e.Screenshot&&s.createElement(f,{key:"screenshot"},s.createElement(e.Screenshot,{id:v?void 0:V.HeaderToolbarComponentIds.Screenshot,className:F.iconButton})),E&&e.StartTrial?s.createElement(f,{key:"start-trial"},s.createElement(e.StartTrial,{id:v?void 0:V.HeaderToolbarComponentIds.StartTrial})):!o&&e.Publish&&s.createElement(f,{key:"publish",className:F.mobilePublish},s.createElement(e.Publish,{id:v?void 0:V.HeaderToolbarComponentIds.PublishMobile})),...C])):[s.createElement(f,{key:"gap",className:r(F.fill,2===S&&F.minimalPriority)}),s.createElement(f,{key:"symbol-search-close"},s.createElement(w,{className:r(F.iconButton,F.symbolSearchClose)}))]))))),e.Publish&&!o&&!v&&!E&&s.createElement(e.Publish,{id:V.HeaderToolbarComponentIds.PublishDesktop,className:F.desktopPublish}))}_onLoginStateChange(){this.setState({isAuthenticated:window.is_authenticated})}_setMode(e){this.setState({mode:e})}_trackFullscreenButtonClick(){Object(B.trackEvent)("GUI","Chart Header Toolbar","fullscreen")}_isSaveLoadVisible(){const{readOnly:e}=this.props;return!(e&&A)}}N.contextType=L;var x=i("hY0g"),P=i.n(x),j=i("FCWJ"),z=i("SanE"),H=i("b17X"),K=i("FBuY"),X=i("Vdly"),q=i("yMne"),Z=i("LiyS"),G=i("LxhU"),U=i("ulZB");const Q={[G.ResolutionKind.Ticks]:!1,[G.ResolutionKind.Seconds]:!1,[G.ResolutionKind.Minutes]:!1,[G.SpecialResolutionKind.Hours]:!1,[G.ResolutionKind.Days]:!1,[G.ResolutionKind.Range]:!1};class Y extends U.b{constructor(e,t,i=Q){super(e,t,"INTERVALS_MENU_VIEW_STATE_CHANGED","IntervalWidget.menu.viewState",i)}isAllowed(e){return Object.keys(Q).includes(e)}}const J={defaultsCollapsed:!1};class ee extends U.b{constructor(e,t,i=J){super(e,t,"TEMPLATES_MENU_VIEW_STATE_CHANGED","TemplatesWidget.menu.viewState",i)}}var te=i("eRg6");const ie={tools:v.any.isRequired,isFundamental:v.any,chartApiInstance:v.any,availableTimeFrames:v.any,chartWidgetCollection:v.any,windowMessageService:v.any,favoriteChartStylesService:v.any,favoriteIntervalsService:v.any,intervalService:v.any,favoriteStudyTemplatesService:v.any,studyTemplates:v.any,chartChangesWatcher:v.any,saveChartService:v.any,sharingChartService:v.any,loadChartService:v.any,chartWidget:v.any,favoriteScriptsModel:v.any,intervalsMenuViewStateService:v.any,templatesMenuViewStateService:v.any,financialsDialogController:v.any};var se=i("6aN0");const ae=[]
;class ne extends s.PureComponent{constructor(e){super(e),this._saveLoadSyncEmitter=new c.a,this._handleFullWidthChange=e=>{this._fullWidth=e,this.setState({measureValid:!1})},this._handleFavoritesWidthChange=e=>{this._favoritesWidth=e,this.setState({measureValid:!1})},this._handleCollapseWidthChange=e=>{this._collapseWidth=e,this.setState({measureValid:!1})},this._handleMeasure=e=>{this.setState({availableWidth:e,measureValid:!1})};const{tools:t,windowMessageService:i,chartWidgetCollection:s,chartApiInstance:a,availableTimeFrames:o,isFundamental:r,favoriteIntervalsService:l,favoriteChartStylesService:u,favoriteStudyTemplatesService:v,studyTemplates:p,saveChartService:m,sharingChartService:b,loadChartService:S,financialsDialogController:f}=e;this._showScrollbarWhen=Object(n.ensureDefined)(e.allowedModes).slice(-1),this._panelWidthChangeHandlers={full:this._handleFullWidthChange,medium:this._handleFavoritesWidthChange,small:this._handleCollapseWidthChange};const{chartChangesWatcher:g}=e;this._chartChangesWatcher=g;const _=Object(te.getDefaultFavoriteChartStyles)(this.props.defaultFavoriteStyles);this._favoriteChartStylesService=u||new j.a(K.TVXWindowEvents,X,_);const y=Object(te.getDefaultFavoriteResolutions)(this.props.defaultFavoriteIntervals);this._favoriteIntervalsService=l||new z.a(K.TVXWindowEvents,X,y),this._intervalsMenuViewStateService=new Y(K.TVXWindowEvents,X),this._intervalService=new H.a(a),this._templatesMenuVuewStateService=new ee(K.TVXWindowEvents,X),this._registry={tools:t,isFundamental:r,chartWidgetCollection:s,windowMessageService:i,chartApiInstance:a,availableTimeFrames:o,favoriteStudyTemplatesService:v,studyTemplates:p,saveChartService:m,sharingChartService:b,loadChartService:S,intervalsMenuViewStateService:this._intervalsMenuViewStateService,favoriteChartStylesService:this._favoriteChartStylesService,favoriteIntervalsService:this._favoriteIntervalsService,intervalService:this._intervalService,chartChangesWatcher:this._chartChangesWatcher,chartWidget:s.activeChartWidget.value(),favoriteScriptsModel:Z.FavoriteScriptsModel.getInstance(),templatesMenuViewStateService:this._templatesMenuVuewStateService,financialsDialogController:f},this.state={isVisible:!0,availableWidth:0,displayMode:"full",measureValid:!1,leftCustomButtons:[],rightCustomButtons:[]},this._readOnly=s.readOnly(),this._features={allowFavoriting:h.enabled("items_favoriting"),showIdeasButton:Boolean(this.props.ideas),showLaunchInPopupButton:Boolean(this.props.popupButton),allowSymbolSearchSpread:h.enabled("header_symbol_search")&&!0,allowToolbarHiding:h.enabled("collapsible_header")},this._setDisplayMode=Object(d.default)(this._setDisplayMode,100),this._negotiateResizer()}componentDidUpdate(e,t){const{isVisible:i,measureValid:s}=this.state;i!==t.isVisible&&(u.emit("toggle_header",i),this._negotiateResizer()),s||this._setDisplayMode()}render(){
const e=this.props,{resizerBridge:t,allowedModes:i}=e,a=Object(o.d)(e,["resizerBridge","allowedModes"]),{displayMode:l,availableWidth:c,isVisible:d,leftCustomButtons:h,rightCustomButtons:u}=this.state,v=Object.assign({features:this._features,readOnly:this._readOnly,isFake:!1,saveLoadSyncEmitter:this._saveLoadSyncEmitter,width:c,leftCustomButtons:h,rightCustomButtons:u},a),p=Object.assign(Object.assign({},v),{isFake:!0,showScrollbarWhen:ae}),m=Object(n.ensureDefined)(i),b=this.props.tools.PublishButtonManager||s.Fragment;return s.createElement(k.a,{value:this._registry,validation:ie},s.createElement(b,null,s.createElement("div",{className:r(se.toolbar,{[se.isHidden]:!d}),onClick:this.props.onClick},s.createElement("div",{className:se.overflowWrap},s.createElement(N,Object.assign({key:"live",showScrollbarWhen:this._showScrollbarWhen,displayMode:l,onAvailableSpaceChange:this._handleMeasure},v)),m.map(e=>s.createElement(N,Object.assign({key:e,displayMode:e,onWidthChange:this._panelWidthChangeHandlers[e]},p)))))))}addButton(e="left"){const t=new P.a(0),i=$(`<div class="apply-common-tooltip ${se.customButton}">`)[0],s={key:Number(new Date),element:i,width:t},{leftCustomButtons:a,rightCustomButtons:n}=this.state;return"left"===e?this.setState({leftCustomButtons:[...a,s]}):this.setState({rightCustomButtons:[...n,s]}),i}_negotiateResizer(){this.props.resizerBridge.negotiateHeight(this.state.isVisible?q.b:q.a)}_setDisplayMode(){const{availableWidth:e}=this.state,{allowedModes:t}=this.props,i={full:this._fullWidth,medium:this._favoritesWidth,small:this._collapseWidth},s=Object(n.ensureDefined)(t);let a=s.map(e=>i[e]).findIndex(t=>e>=t);-1===a&&(a=s.length-1);const o=s[a];this.setState({measureValid:!0,displayMode:o})}}ne.defaultProps={allowedModes:["full","medium"]},i.d(t,"HeaderToolbarRenderer",(function(){return oe}));class oe{constructor(e,t){this._component=null,this._handleRef=e=>{this._component=e},this._container=e,a.render(s.createElement(ne,Object.assign({},t,{ref:this._handleRef})),this._container)}destroy(){a.unmountComponentAtNode(this._container)}getComponent(){return Object(n.ensureNotNull)(this._component)}}},KrBX:function(e,t,i){e.exports={group:"group-3uonVBsm",noLeftDecoration:"noLeftDecoration-3uonVBsm",noRightDecoration:"noRightDecoration-3uonVBsm",noMinimalWidth:"noMinimalWidth-3uonVBsm"}},LiyS:function(e,t,i){"use strict";i.r(t),i.d(t,"FavoriteScriptsModel",(function(){return u}));var s=i("Vdly"),a=i("FBuY"),n=i("cBZt"),o=i("TcSq"),r=i("upcD"),l=i("aIyQ"),c=i.n(l);const d=r;let h=null;class u{constructor(e=s){this._favorites=[],this._favoritesChanged=new c.a,this._settings=e,a.TVXWindowEvents.on("StudyFavoritesChanged",e=>{const t=JSON.parse(e);this._loadFromState(t.favorites||[])}),this._settings.onSync.subscribe(this,this._loadFavs),this._loadFavs()}isFav(e){const t=this.favId(e);return-1!==this._findFavIndex(t)}toggleFavorite(e){this.isFav(e)?this.removeFavorite(e):this.addFavorite(e)}addFavorite(e){const t=this.favId(e);this._favorites.push(p(t)),this._favoritesChanged.fire(),this._saveFavs()}
removeFavorite(e){const t=this.favId(e),i=this._findFavIndex(t);-1!==i&&(this._favorites.splice(i,1),this._favoritesChanged.fire()),this._saveFavs()}favId(e){return Object(o.isPineIdString)(e)?e:Object(o.extractPineId)(e)||Object(n.extractStudyId)(e)}favorites(){return this._favorites}favoritePineIds(){return this._favorites.filter(e=>"pine"===e.type).map(e=>e.pineId)}favoritesChanged(){return this._favoritesChanged}static getInstance(){return null===h&&(h=new u),h}static create(e){return new u(e)}_loadFavs(){const e=this._settings.getJSON("studyMarket.favorites",[]);this._loadFromState(e)}_saveFavs(){const e=this._stateToSave();this._settings.setJSON("studyMarket.favorites",e),a.TVXWindowEvents.emit("StudyFavoritesChanged",JSON.stringify({favorites:e}))}_stateToSave(){return this._favorites.map(v)}_loadFromState(e){this._favorites=e.map(e=>p(function(e){return e in d?d[e]:e}(e))),this._favoritesChanged.fire()}_findFavIndex(e){return this._favorites.findIndex(t=>e===v(t))}}function v(e){return"java"===e.type?e.studyId:e.pineId}function p(e){return Object(o.isPineIdString)(e)?{type:"pine",pineId:e}:{type:"java",studyId:e}}},Opoj:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17"><path fill="none" stroke="currentColor" d="M1 1l15 15M1 16L16 1"/></svg>'},SanE:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("ulZB"),a=i("pPtI"),n=i("IVMC"),o=i.n(n);class r extends s.a{constructor(e,t,i){super(e,t,"FAVORITE_INTERVALS_CHANGED","IntervalWidget.quicks",i)}_serialize(e){return o()(e.map(a.normalizeIntervalString))}_deserialize(e){return o()(Object(a.convertResolutionsFromSettings)(e).filter(a.isResolutionMultiplierValid).map(a.normalizeIntervalString))}}},Vike:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 10" width="20" height="10"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M2 1l8 8 8-8"/></svg>'},"a+Yp":function(e,t,i){e.exports={wrap:"wrap-35jKyg6w",icon:"icon-35jKyg6w"}},a8bL:function(e,t,i){e.exports={"css-value-header-toolbar-height":"38px",inner:"inner-pzOKvpP8",fake:"fake-pzOKvpP8",fill:"fill-pzOKvpP8",minimalPriority:"minimalPriority-pzOKvpP8",collapse:"collapse-pzOKvpP8",button:"button-pzOKvpP8",iconButton:"iconButton-pzOKvpP8",hidden:"hidden-pzOKvpP8",symbolSearch:"symbolSearch-pzOKvpP8",symbolSearchClose:"symbolSearchClose-pzOKvpP8",content:"content-pzOKvpP8",desktopPublish:"desktopPublish-pzOKvpP8",mobilePublish:"mobilePublish-pzOKvpP8"}},bQ7Y:function(e,t,i){e.exports={button:"button-2Vpz_LXc",hover:"hover-2Vpz_LXc",isInteractive:"isInteractive-2Vpz_LXc",isGrouped:"isGrouped-2Vpz_LXc",isActive:"isActive-2Vpz_LXc",isOpened:"isOpened-2Vpz_LXc",isDisabled:"isDisabled-2Vpz_LXc",text:"text-2Vpz_LXc",icon:"icon-2Vpz_LXc"}},eRg6:function(e,t,i){"use strict";i.r(t),i.d(t,"getDefaultFavoriteChartStyles",(function(){return u})),i.d(t,"getDefaultFavoriteResolutions",(function(){return v})),i.d(t,"favoriteIntervalsService",(function(){return p})),i.d(t,"favoriteChartStylesService",(function(){
return m})),i.d(t,"favoriteStudyTemplatesService",(function(){return b}));var s=i("FBuY"),a=i("Vdly"),n=i("Kxc7"),o=i("pPtI"),r=i("SanE"),l=i("FCWJ"),c=i("54XG");const d={Area:3,Bars:0,Candles:1,"Heiken Ashi":8,"Hollow Candles":9,Line:2},h=["1","30","60"];function u(e=[]){let t=e.map(e=>d[e])||[1,4,5,6];return n.enabled("widget")&&(t=[0,1,3]),t}function v(e=[]){return Object(o.mergeResolutions)(e,n.enabled("star_some_intervals_by_default")?h:[])}const p=new r.a(s.TVXWindowEvents,a,v()),m=new l.a(s.TVXWindowEvents,a,u()),b=new c.FavoriteStudyTemplateService(s.TVXWindowEvents,a)},"ji/R":function(e,t,i){e.exports={wrap:"wrap-3obNZqvj",wrapWithArrowsOuting:"wrapWithArrowsOuting-3obNZqvj",wrapOverflow:"wrapOverflow-3obNZqvj",scrollWrap:"scrollWrap-3obNZqvj",noScrollBar:"noScrollBar-3obNZqvj",icon:"icon-3obNZqvj",scrollLeft:"scrollLeft-3obNZqvj",scrollRight:"scrollRight-3obNZqvj",isVisible:"isVisible-3obNZqvj",iconWrap:"iconWrap-3obNZqvj",fadeLeft:"fadeLeft-3obNZqvj",fadeRight:"fadeRight-3obNZqvj"}},"tO+E":function(e,t,i){e.exports={"css-value-header-toolbar-height":"38px",wrap:"wrap-1ETeWwz2"}},tU7i:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c}));var s=i("mrSG"),a=i("q1tI"),n=i("TSYQ"),o=i("Iivm"),r=i("bQ7Y");const l=r,c=a.forwardRef((e,t)=>{const{icon:i,isActive:l,isOpened:c,isDisabled:d,isGrouped:h,isHovered:u,onClick:v,text:p,textBeforeIcon:m,title:b,theme:S=r,className:f,forceInteractive:g,"data-name":_}=e,y=Object(s.d)(e,["icon","isActive","isOpened","isDisabled","isGrouped","isHovered","onClick","text","textBeforeIcon","title","theme","className","forceInteractive","data-name"]),C=n(f,S.button,b&&"apply-common-tooltip",{[S.isActive]:l,[S.isOpened]:c,[S.isInteractive]:(g||Boolean(v))&&!d,[S.isDisabled]:d,[S.isGrouped]:h,[S.hover]:u}),w=i&&("string"==typeof i?a.createElement(o.a,{className:S.icon,icon:i}):a.cloneElement(i,{className:n(S.icon,i.props.className)}));return a.createElement("div",Object.assign({},y,{ref:t,"data-role":"button",className:C,onClick:d?void 0:v,title:b,"data-name":_}),m&&p&&a.createElement("div",{className:n("js-button-text",S.text)},p),w,!m&&p&&a.createElement("div",{className:n("js-button-text",S.text)},p))})},upcD:function(e){
e.exports=JSON.parse('{"ACCD@tv-basicstudies":"STD;Accumulation_Distribution","studyADR@tv-basicstudies":"STD;Advance_Decline_Ratio_Bars","AROON@tv-basicstudies":"STD;Aroon","ATR@tv-basicstudies":"STD;Average_True_Range","AwesomeOscillator@tv-basicstudies":"STD;Awesome_Oscillator","BB@tv-basicstudies":"STD;Bollinger_Bands","BollingerBandsR@tv-basicstudies":"STD;Bollinger_Bands_B","BollingerBandsWidth@tv-basicstudies":"STD;Bollinger_Bands_Width","CMF@tv-basicstudies":"STD;Chaikin_Money_Flow","ChaikinOscillator@tv-basicstudies":"STD;Chaikin_Oscillator","ChoppinessIndex@tv-basicstudies":"STD;Choppiness_Index","DoubleEMA@tv-basicstudies":"STD;DEMA","WilliamR@tv-basicstudies":"STD;Willams_R","CCI@tv-basicstudies":"STD;CCI","CRSI@tv-basicstudies":"STD;Connors_RSI","DetrendedPriceOscillator@tv-basicstudies":"STD;DPO","DM@tv-basicstudies":"STD;DMI","DONCH@tv-basicstudies":"STD;Donchian_Channels","EaseOfMovement@tv-basicstudies":"STD;EOM","EFI@tv-basicstudies":"STD;EFI","ENV@tv-basicstudies":"STD;ENV","FisherTransform@tv-basicstudies":"STD;Fisher_Transform","HV@tv-basicstudies":"STD;Historical_Volatility","KLTNR@tv-basicstudies":"STD;Keltner_Channels","MOM@tv-basicstudies":"STD;Momentum","MF@tv-basicstudies":"STD;Money_Flow","UltimateOsc@tv-basicstudies":"STD;Ultimate_Oscillator","Trix@tv-basicstudies":"STD;TRIX","Stochastic@tv-basicstudies":"STD;Stochastic","StochasticRSI@tv-basicstudies":"STD;Stochastic_RSI","RSI@tv-basicstudies":"STD;RSI","ROC@tv-basicstudies":"STD;ROC","PriceOsc@tv-basicstudies":"STD;Price_Oscillator","MASimple@tv-basicstudies":"STD;SMA","OBV@tv-basicstudies":"STD;On_Balance_Volume","PSAR@tv-basicstudies":"STD;PSAR","VigorIndex@tv-basicstudies":"STD;Relative_Vigor_Index","VolatilityIndex@tv-basicstudies":"STD;Relative_Volatility_Index","SMIErgodicIndicator@tv-basicstudies":"STD;SMI_Ergodic_Indicator_Oscillator","SMIErgodicOscillator@tv-basicstudies":"STD;SMI_Ergodic_Oscillator","MACD@tv-basicstudies":"STD;MACD","MAWeighted@tv-basicstudies":"STD;WMA","MAExp@tv-basicstudies":"STD;EMA","hullMA@tv-basicstudies":"STD;Hull%1MA","chandeMO@tv-basicstudies":"STD;Chande_Momentum_Oscillator","TripleEMA@tv-basicstudies":"STD;TEMA","MAVolumeWeighted@tv-basicstudies":"STD;VWMA","WilliamsAlligator@tv-basicstudies":"STD;Williams_Alligator","WilliamsFractal@tv-basicstudies":"STD;Whilliams_Fractals"}')}}]);