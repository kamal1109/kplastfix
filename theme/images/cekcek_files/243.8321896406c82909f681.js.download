(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{"23di":function(e,t,a){e.exports={wrap:"wrap-3FnlLKfX",titleWrap:"titleWrap-3FnlLKfX",indicators:"indicators-3FnlLKfX",title:"title-3FnlLKfX",icon:"icon-3FnlLKfX",text:"text-3FnlLKfX",titleTabletSmall:"titleTabletSmall-3FnlLKfX",labelRow:"labelRow-3FnlLKfX",label:"label-3FnlLKfX"}},"39J6":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a("q1tI"),n=a("6KyJ"),i=a("Oy6E");function s(e){return l.createElement("div",{className:i.spinnerWrap},l.createElement(n.a,null))}},"5c9J":function(e,t,a){"use strict";var l=a("q1tI"),n=a.n(l),i=a("TSYQ"),s=a.n(i),o=a("YFKU"),r=(a("EsMY"),a("pr86")),c=a("i/MG"),m=a("N5tr"),u=a("8d0Q"),d=a("nPPD"),p=a("8RO/"),v=a("s0T6");function h(e){return l.createElement("div",{className:i(v.description,e.className)},e.children)}var f=a("fESK");const b=Object(d.a)(m.a,{labelRow:f.labelRow,toolbox:f.toolbox,item:f.titleItem}),g=Object(d.a)(m.a,{labelRow:f.labelRow,toolbox:f.toolbox,item:f.titleItemTabletSmall}),T=Object(d.a)(m.a,{item:f.item}),S=Object(d.a)(m.a,{item:f.itemTabletSmall});function w(e){const{item:t,onApply:a,onRemove:i,onFavor:o,favorite:d,isFavoritingAllowed:v,isTabletSmall:w}=e,[_,E]=Object(u.b)(),F=t.meta_info,y=F?Object(p.b)(F.indicators):void 0,C=w?g:b,O=w?S:T,N=Object(l.useCallback)(()=>a(t),[a,t]),j=Object(l.useCallback)(()=>i(t),[i,t]),x=Object(l.useCallback)(()=>{o&&o(t)},[o,t]);return n.a.createElement("div",Object.assign({},E,{className:f.wrap,"data-name":t.name,"data-id":t.id,"data-is-default":Boolean(t.is_default)}),n.a.createElement(m.b,{theme:C,label:t.name,labelRowClassName:s()(w&&f.itemLabelTabletSmall),isHovered:_,showToolboxOnHover:!d&&!_,onClick:N,toolbox:n.a.createElement(n.a.Fragment,null,!t.is_default&&n.a.createElement(c.a,{key:"remove",hidden:!Modernizr.touch&&!_,onClick:j}),Boolean(o)&&v&&n.a.createElement(r.a,{key:"favorite",isFilled:Boolean(d),onClick:x}))}),y&&n.a.createElement(m.b,{theme:O,label:n.a.createElement(h,{className:s()(f.description,w&&f.descriptionTabletSmall)},y),onClick:N,isHovered:_}))}var _=a("Iivm"),E=a("2uTr"),F=a("jKyl"),y=a("23di");const C=Object(d.a)(m.a,y),O={text:Object(E.appendEllipsis)(window.t("Save Indicator template"))};function N(e){const{onClick:t,isTabletSmall:a}=e;return n.a.createElement(m.b,{theme:C,className:y.wrap,label:n.a.createElement("div",{className:y.titleWrap},n.a.createElement("div",{className:s()(y.title,a&&y.titleTabletSmall)},n.a.createElement(_.a,{className:y.icon,icon:F}),n.a.createElement("div",{className:y.text},O.text))),onClick:t})}var j=a("39J6"),x=a("GeUm"),L=a("cwLw"),k=a("KKsp"),I=a("gla1"),K=a("PN6A"),U=a("iYBL"),B=a("Sl3V");function A(e){const{templates:t,favorites:a,onTemplateSave:i,onTemplateRemove:o,onTemplateSelect:r,onTemplateFavorite:c,isTabletSmall:m,isLoading:u}=e,d=Object(l.useMemo)(()=>t.filter(e=>e.is_default),[t]),p=Object(l.useMemo)(()=>t.filter(e=>!e.is_default),[t]),v=Object(l.useMemo)(()=>new Set(a.map(e=>e.name)),[a]),h=Object(l.useContext)(U.a),f=Object(l.useContext)(K.a),b=Object(I.a)()
;Object(l.useEffect)(()=>{if(null!==h){const e={};return h.getOnChange().subscribe(e,()=>{b(),f&&f.update()}),()=>h.getOnChange().unsubscribeAll(e)}return()=>{}},[]);const g=e=>n.a.createElement(w,{key:e.name,item:e,isFavoritingAllowed:Boolean(c),favorite:v.has(e.name),onApply:r,onFavor:c,onRemove:o,isTabletSmall:m});return n.a.createElement("div",{className:s()(B.menu,m&&B.menuSmallTablet)},n.a.createElement(N,{onClick:i,isTabletSmall:m}),u&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(j.a,null)),!u&&(m?n.a.createElement(R,{defaults:d,customs:p,render:g}):n.a.createElement(Y,{defaults:d,customs:p,render:g,state:h})))}function R(e){const{defaults:t,customs:a,render:l}=e;return n.a.createElement(n.a.Fragment,null,a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(x.a,{className:B.menuItemHeaderTabletSmall},Object(o.t)("My templates")),a.map(l)),t.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(x.a,{className:B.menuItemHeaderTabletSmall},Object(o.t)("Default templates")),t.map(l)))}function Y(e){const{defaults:t,customs:a,render:l,state:i}=e;return n.a.createElement(n.a.Fragment,null,a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(x.a,{className:B.menuItemHeader},Object(o.t)("My templates")),a.map(l)),a.length>0&&t.length>0&&i&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(L.a,{summary:Object(o.t)("Default templates"),open:!i.get().defaultsCollapsed,onStateChange:e=>i.set({defaultsCollapsed:!e})},t.map(l))),0===a.length&&t.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(k.a,null),n.a.createElement(x.a,{className:B.menuItemHeader},Object(o.t)("Default templates")),t.map(l)))}a.d(t,"a",(function(){return A}))},"8RO/":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var l=a("3ClC");function n(e,t){return{indicators:e.orderedDataSources(!0).filter(e=>Object(l.isStudy)(e)&&!Object(l.isESDStudy)(e)).map(e=>({id:e.metaInfo().id,description:e.title(!0,void 0,!0)})),interval:t}}function i(e){const t=new Map;return e.forEach(e=>{const[a,l]=t.get(e.id)||[e.description,0];t.set(e.id,[a,l+1])}),Array.from(t.values()).map(([e,t])=>`${e}${t>1?" x "+t:""}`).join(", ")}},GeUm:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a("q1tI"),n=a("TSYQ"),i=a("sHKj");function s(e){return l.createElement("div",{className:n(e.className,i.title)},e.children)}},Oy6E:function(e,t,a){e.exports={spinnerWrap:"spinnerWrap-1dkAsm33"}},"R4+T":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},Sl3V:function(e,t,a){e.exports={menu:"menu-N-Iyk8ip",menuSmallTablet:"menuSmallTablet-N-Iyk8ip",menuItemHeaderTabletSmall:"menuItemHeaderTabletSmall-N-Iyk8ip",menuItemHeader:"menuItemHeader-N-Iyk8ip"}},
To8B:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="currentColor" d="M9.707 9l4.647-4.646-.707-.708L9 8.293 4.354 3.646l-.708.708L8.293 9l-4.647 4.646.708.708L9 9.707l4.646 4.647.708-.707L9.707 9z"/></svg>'},XfUw:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M9 2.13l1.903 3.855.116.236.26.038 4.255.618-3.079 3.001-.188.184.044.259.727 4.237-3.805-2L9 12.434l-.233.122-3.805 2.001.727-4.237.044-.26-.188-.183-3.079-3.001 4.255-.618.26-.038.116-.236L9 2.13z"/></svg>'},cwLw:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var l=a("q1tI"),n=a.n(l),i=a("TSYQ"),s=a.n(i),o=a("ML8+"),r=a("fioS");function c(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:s()(e.className,r.summary),onClick:function(){e.onStateChange&&e.onStateChange(!e.open)},"data-open":e.open},e.summary,n.a.createElement(o.a,{className:r.caret,dropped:Boolean(e.open)})),e.open&&e.children)}},fESK:function(e,t,a){e.exports={labelRow:"labelRow-2noQNU_F",toolbox:"toolbox-2noQNU_F",description:"description-2noQNU_F",descriptionTabletSmall:"descriptionTabletSmall-2noQNU_F",item:"item-2noQNU_F",titleItem:"titleItem-2noQNU_F",titleItemTabletSmall:"titleItemTabletSmall-2noQNU_F",itemTabletSmall:"itemTabletSmall-2noQNU_F",itemLabelTabletSmall:"itemLabelTabletSmall-2noQNU_F",wrap:"wrap-2noQNU_F",hovered:"hovered-2noQNU_F"}},fEjm:function(e,t,a){e.exports={favorite:"favorite-I_fAY9V2",disabled:"disabled-I_fAY9V2",active:"active-I_fAY9V2",checked:"checked-I_fAY9V2"}},fioS:function(e,t,a){e.exports={summary:"summary-3UYGeClB",hovered:"hovered-3UYGeClB",caret:"caret-3UYGeClB"}},gla1:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var l=a("q1tI");const n=()=>{const[,e]=Object(l.useReducer)((e,t)=>e+1,0);return e}},"i/MG":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var l=a("mrSG"),n=(a("YFKU"),a("q1tI")),i=a("TSYQ"),s=a("Iivm"),o=a("To8B"),r=a("kXJy");const c={remove:window.t("Remove")};function m(e){const{className:t,isActive:a,onClick:m,title:u,hidden:d,"data-name":p="remove-button"}=e,v=Object(l.d)(e,["className","isActive","onClick","title","hidden","data-name"]);return n.createElement(s.a,Object.assign({},v,{"data-name":p,className:i(r.button,"apply-common-tooltip",a&&r.active,d&&r.hidden,t),icon:o,onClick:m,title:u||c.remove}))}},iYBL:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var l=a("q1tI");const n=a.n(l).a.createContext(null)},jKyl:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><g fill="none"><path stroke="currentColor" d="M11 20.5H7.5a5 5 0 1 1 .42-9.98 7.5 7.5 0 0 1 14.57 2.1 4 4 0 0 1-1 7.877H18"/><path stroke="currentColor" d="M14.5 24V12.5M11 16l3.5-3.5L18 16"/></g></svg>'},kXJy:function(e,t,a){e.exports={button:"button-3B9fDLtm",disabled:"disabled-3B9fDLtm",active:"active-3B9fDLtm",hidden:"hidden-3B9fDLtm"}},pr86:function(e,t,a){"use strict";a.d(t,"a",(function(){
return u}));var l=a("mrSG"),n=(a("YFKU"),a("q1tI")),i=a("TSYQ"),s=a("Iivm"),o=a("sg5d"),r=a("XfUw"),c=a("fEjm");const m={add:window.t("Add to favorites"),remove:window.t("Remove from favorites")};function u(e){const{className:t,isFilled:a,isActive:u,onClick:d}=e,p=Object(l.d)(e,["className","isFilled","isActive","onClick"]);return n.createElement(s.a,Object.assign({},p,{className:i(c.favorite,"apply-common-tooltip",a&&c.checked,u&&c.active,t),icon:a?o:r,onClick:d,title:a?m.remove:m.add}))}},s0T6:function(e,t,a){e.exports={description:"description-2U1ZnBls"}},sHKj:function(e,t,a){e.exports={title:"title-2VoDfDWK"}},sg5d:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path fill="currentColor" d="M9 1l2.35 4.76 5.26.77-3.8 3.7.9 5.24L9 13l-4.7 2.47.9-5.23-3.8-3.71 5.25-.77L9 1z"/></svg>'},"y+Pn":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a("Kxc7"),n=a("hY0g"),i=a.n(n);class s{constructor(e,t){var a,n;this._isFavoriteEnabled=l.enabled("items_favoriting"),this.handleFavorTemplate=e=>{if(!this._isFavoriteEnabled)return;const{name:t}=e;this._isTemplateFavorite(t)?this._removeFavoriteTemplate(t):this._addFavoriteTemplate(t)},this.handleDropdownOpen=()=>{this._setState({isLoading:!0}),this._studyTemplates.invalidate(),this._studyTemplates.refreshStudyTemplateList(()=>this._setState({isLoading:!1}))},this.handleApplyTemplate=e=>{this._studyTemplates.applyTemplate(e.name)},this.handleRemoveTemplate=e=>{this._studyTemplates.deleteStudyTemplate(e.name)},this.handleSaveTemplate=()=>{this._studyTemplates.showSaveAsDialog()},this._studyTemplates=e,this._favoriteStudyTemplatesService=t;const s=(null===(a=this._favoriteStudyTemplatesService)||void 0===a?void 0:a.get())||[],o=this._studyTemplates.list();this._state=new i.a({isLoading:!1,studyTemplatesList:o,favorites:s}),this._studyTemplates.getOnChange().subscribe(this,this._handleTemplatesChange),this._studyTemplates.refreshStudyTemplateList(),this._isFavoriteEnabled&&(null===(n=this._favoriteStudyTemplatesService)||void 0===n||n.getOnChange().subscribe(this,this._handleFavoritesChange))}destroy(){var e;this._studyTemplates.getOnChange().unsubscribe(this,this._handleTemplatesChange),this._isFavoriteEnabled&&(null===(e=this._favoriteStudyTemplatesService)||void 0===e||e.getOnChange().unsubscribe(this,this._handleFavoritesChange))}state(){return this._state.readonly()}_setState(e){this._state.setValue(Object.assign(Object.assign({},this._state.value()),e))}_handleTemplatesChange(){this._setState({studyTemplatesList:this._studyTemplates.list()})}_handleFavoritesChange(e){this._isFavoriteEnabled&&this._setState({favorites:e})}_removeFavoriteTemplate(e){var t;const{favorites:a}=this._state.value();null===(t=this._favoriteStudyTemplatesService)||void 0===t||t.set(a.filter(t=>t!==e))}_addFavoriteTemplate(e){var t;const{favorites:a}=this._state.value();null===(t=this._favoriteStudyTemplatesService)||void 0===t||t.set([...a,e])}_isTemplateFavorite(e){const{favorites:t}=this._state.value()
;return t.includes(e)}}}}]);