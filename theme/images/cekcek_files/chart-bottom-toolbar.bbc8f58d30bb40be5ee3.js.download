(window.webpackJsonp=window.webpackJsonp||[]).push([["chart-bottom-toolbar","object-tree-panel","username-hints-list"],{"+EG+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var i=n("q1tI");class s extends i.Component{shouldComponentUpdate(){return!1}render(){return i.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const o=i.createContext(null)},"+GaQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("q1tI");function s(e){if(e.map){return i.Children.toArray(e.children).map(e.map)}return e.children}},"/KDZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("q1tI");class s extends i.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},"02pg":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI"),s=n("TSYQ"),o=n("XiJV");function a(e){return i.createElement("div",{className:s(o.separator,e.className)})}},"0YpW":function(e,t,n){"use strict";n.r(t),n.d(t,"setFixedBodyState",(function(){return r}));var i=n("J7Nl"),s=n("IoBF");let o=0,a=!1;function r(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++o){const e=Object(i.a)(t,"overflow"),s=Object(i.b)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&(Object(i.f)(n,"right",Object(i.d)()+"px"),t.style.paddingRight=s+Object(i.d)()+"px",a=!0),t.classList.add("i-no-scroll")}else if(!e&&o>0&&0==--o&&(t.classList.remove("i-no-scroll"),a)){Object(i.f)(n,"right","0px");let e=0;e=Object(s.a)(Object(i.c)(n)||0),t.scrollHeight<=t.clientHeight&&(e-=Object(i.d)()),t.style.paddingRight=(e<0?0:e)+"px",a=!1}}},"2mG+":function(e,t,n){e.exports={button:"button-2-onvH7F"}},"5o6O":function(e,t,n){e.exports={tabs:"tabs-3I2ohC86",tab:"tab-3I2ohC86",noBorder:"noBorder-3I2ohC86",disabled:"disabled-3I2ohC86",active:"active-3I2ohC86",defaultCursor:"defaultCursor-3I2ohC86",slider:"slider-3I2ohC86",content:"content-3I2ohC86"}},"7mz7":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M6.701 12.441l.516-.827c.35.387.795.58 1.332.58.995 0 1.493-.487 1.493-1.46 0-.445-.145-.804-.435-1.08-.29-.28-.675-.42-1.155-.42h-.086v-.87h.049c.91 0 1.364-.4 1.364-1.202 0-.838-.428-1.257-1.284-1.257-.465 0-.836.156-1.112.467l-.478-.73c.333-.434.89-.65 1.67-.65.688 0 1.249.184 1.682.553.433.365.65.834.65 1.407 0 .437-.122.824-.366 1.16-.24.337-.522.562-.848.677.451.147.81.398 1.074.752.269.35.403.777.403 1.278 0 .73-.231 1.295-.693 1.692-.462.398-1.11.596-1.944.596-.351 0-.695-.064-1.032-.193-.336-.132-.603-.29-.8-.473z"/></svg>'},"8GpO":function(e,t,n){"use strict";n.r(t),n.d(t,"openMobileChartPickerCommand",(function(){return i})),n.d(t,"closeMobileChartPickerCommand",(function(){return s}));const i="OPEN_MOBILE_CHART_PICKER_COMMAND",s="CLOSE_MOBILE_CHART_PICKER_COMMAND"},"8Rai":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI"),s=n("efOF"),o=n("R5JZ");function a(e){const{click:t,mouseDown:n,touchEnd:a,touchStart:r,handler:l,reference:c,ownerDocument:h=document}=e,d=Object(i.useRef)(null),u=Object(i.useRef)(new s.a("timestamp").timeStamp);return Object(i.useLayoutEffect)(()=>{const e={click:t,mouseDown:n,touchEnd:a,touchStart:r},i=c?c.current:d.current;return Object(o.a)(u.current,i,l,h,e)},[t,n,a,r,l]),c||d}},AiMB:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n("q1tI"),s=n("i8i4"),o=n("e3/o"),a=n("jAh7"),r=n("+EG+");class l extends i.PureComponent{constructor(){super(...arguments),this._uuid=Object(o.guid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);return e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"",s.createPortal(i.createElement(c.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){return null===this.context?Object(a.getRootOverlapManager)():this.context}}l.contextType=r.b;const c=i.createContext(null)},ApAi:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/></svg>'},D756:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M6.486 13v-.215L8.952 9.01c.515-.791.773-1.462.773-2.014 0-.727-.41-1.09-1.23-1.09-.29 0-.562.077-.816.23-.255.151-.439.343-.554.575l-.692-.569c.121-.35.36-.63.714-.838.358-.207.79-.311 1.294-.311.756 0 1.347.175 1.773.526.426.347.639.84.639 1.477 0 .59-.283 1.336-.849 2.234l-1.767 2.804h3.083V13H6.486z"/></svg>'},Iivm:function(e,t,n){"use strict";var i=n("mrSG"),s=n("q1tI");const o=s.forwardRef((e,t)=>{const{icon:n=""}=e,o=Object(i.d)(e,["icon"]);return s.createElement("span",Object.assign({},o,{ref:t,dangerouslySetInnerHTML:{__html:n}}))});n.d(t,"a",(function(){return o}))},IoBF:function(e,t,n){"use strict";function i(e){return Boolean(window.widgetbar&&window.widgetbar.resizerBridge.fullscreen.value())?0:e}n.d(t,"a",(function(){return i}))},JBxk:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><g fill="none" stroke="currentColor"><rect width="6" height="6" rx="1.5" x="1.5" y="1.5"/><rect width="6" height="6" rx="1.5" x="10.5" y="1.5"/><rect width="6" height="6" rx="1.5" x="1.5" y="10.5"/><rect width="6" height="6" rx="1.5" x="10.5" y="10.5"/></g></svg>'},K3s3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return h}));var i=n("q1tI"),s=n("TSYQ"),o=n("Eyy1"),a=n("5o6O");const r=a;function l(e){const t=s(e.className,a.tab,{[a.active]:e.isActive,[a.disabled]:e.isDisabled,[a.defaultCursor]:!!e.shouldUseDefaultCursor,[a.noBorder]:!!e.noBorder});return i.createElement("div",{className:t,onClick:e.onClick,ref:e.reference},e.children)}function c(e){return class extends i.PureComponent{constructor(){super(...arguments),this.activeTab={current:null}}componentDidUpdate(){Object(o.ensureNotNull)(this._slider).style.transition="transform 350ms",this._componentDidUpdate()}componentDidMount(){this._componentDidUpdate()}render(){const{className:t}=this.props,n=this._generateTabs();return i.createElement("div",{className:s(t,a.tabs),"data-name":this.props["data-name"]},n,i.createElement(e,{reference:e=>{this._slider=e}}))}_generateTabs(){return this.activeTab.current=null,i.Children.map(this.props.children,e=>{const t=e,n=Boolean(t.props.isActive),s={reference:e=>{n&&(this.activeTab.current=e),t.props.reference&&t.props.reference(e)}};return i.cloneElement(t,s)})}_componentDidUpdate(){const e=Object(o.ensureNotNull)(this._slider).style;if(this.activeTab.current){const t=this.activeTab.current.offsetWidth,n=this.activeTab.current.offsetLeft;e.transform=`translateX(${n}px)`,e.width=t+"px",e.opacity="1"}else e.opacity="0"}}}const h=c((function(e){return i.createElement("div",{className:a.slider,ref:e.reference})}))},KKsp:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("q1tI"),s=n("TSYQ"),o=n.n(s),a=n("NOPy");function r(e){
const{size:t="normal",className:n}=e;return i.createElement("div",{className:o()(a.separator,"small"===t&&a.small,"normal"===t&&a.normal,"large"===t&&a.large,n)})}},MfqI:function(e,t,n){"use strict";n.r(t);var i=n("q1tI"),s=n("i8i4"),o=n("mrSG"),a=n("YFKU"),r=n("17x9"),l=n("TSYQ"),c=n("cvc5"),h=n("Kxc7"),d=n("82wv"),u=n("Iksw"),m=n("tWVy"),p=n("/KDZ"),g=n("N5tr"),b=n("KKsp"),v=n("g/A1"),_=n("cdbK"),C=n("1TxM"),f=n("ibHI"),x=n("2uTr"),y=n("J3OW");const w={title:window.t("Date Range"),goToDate:Object(x.appendEllipsis)(window.t("Go to"))},E=Object(C.b)();class S extends i.PureComponent{constructor(e,t){super(e,t),this._handleGoToDateClick=()=>{const{chartWidget:e}=this.context;Object(_.showGoToDateDialog)(e),Object(m.b)()},this._handleRangeSelect=e=>{e&&this.props.onSelectRange&&this.props.onSelectRange(e),Object(m.b)()},this._renderChildren=e=>{const{ranges:t,activeRange:n,goToDateButton:s}=this.props;return e?i.createElement(i.Fragment,null,i.createElement(f.b,{ranges:t,activeRange:n,onSelectRange:this._handleRangeSelect}),s&&i.createElement(f.a,{onGoToDateClick:this._handleGoToDateClick})):i.createElement(i.Fragment,null,t.map(e=>i.createElement(g.b,{key:e.value.value,label:e.description||e.text,isActive:n===e.value.value,onClick:this._handleRangeSelect,onClickArg:e})),s&&i.createElement(b.a,null),s&&i.createElement(g.b,{label:w.goToDate,onClick:this._handleGoToDateClick}))},Object(C.d)(t,{chartWidget:r.any.isRequired})}render(){return i.createElement(p.a,{rule:"screen and (max-width: 428px)"},e=>i.createElement(d.b,{className:y.button,content:w.title,arrow:!0,verticalAttachEdge:u.c.Top,verticalDropDirection:u.d.FromBottomToTop,horizontalMargin:4,"data-name":"date-ranges-menu",isDrawer:e},this._renderChildren(e)))}}S.contextType=E;const j=Object(v.a)(S);var M=n("K3s3"),N=n("W9Y+");function O(e){const t=l(e.className,N.item,{[N.isActive]:e.isActive,[N.isFirst]:e.isFirst,[N.isLast]:e.isLast});return i.createElement("div",{className:t,onClick:e.onClick,ref:e.reference},e.children)}var A=n("nPPD"),W=n("RZ2Z");const R=Object(A.a)(M.a,W);var B=n("qSb5");const k=Object(M.d)((function(e){return i.createElement("div",{className:l(e.className,R.slider),ref:e.reference},i.createElement("div",{className:R.inner}))}));const T=Object(v.a)((function(e){const{className:t,ranges:n,activeRange:s,onSelectRange:o}=e;return i.createElement(k,{className:l(B.sliderRow,t),"data-name":"date-ranges-tabs"},n.map((e,t)=>i.createElement(O,{key:e.value.value,isFirst:0===t,isLast:t===n.length-1,isActive:s===e.value.value,onClick:o&&o.bind(null,e)},i.createElement("div",{title:e.description||e.text,className:"apply-common-tooltip"},e.text))))}));var D=n("Iivm"),L=n("/DW5"),P=n("JWMC"),z=n("ul7r"),I=n("c7H2");const H=Object(L.b)({keys:["Alt","G"],text:"{0} + {1}"}),F=Object(C.b)();class q extends i.PureComponent{constructor(e,t){super(e,t),this._handleClick=()=>{const{chartWidget:e}=this.context;Object(P.trackEvent)("GUI","Chart Bottom Toolbar","go to"),Object(_.showGoToDateDialog)(e)},Object(C.d)(t,{chartWidget:r.any.isRequired})}render(){
const{className:e,ranges:t}=this.props;return t.length>0&&i.createElement("div",{className:l("apply-common-tooltip",I.button,e),"data-name":"go-to-date","data-tooltip-hotkey":H,onClick:this._handleClick,title:Object(a.t)("Go to")},i.createElement(D.a,{className:I.icon,icon:z}))}}q.contextType=F;const U=Object(v.a)(q);var V=n("Eyy1"),G=n("URQ3");function X(e){const{reference:t,className:n,children:s}=e,a=Object(o.d)(e,["reference","className","children"]);return i.createElement("button",Object.assign({},a,{className:l(n,G.button),ref:t}),i.createElement("span",{className:G.inner},s))}var Z=n("/+9u"),Y=n("4kQX"),K=n("7KDR"),Q=n("5VQP");class J extends i.PureComponent{constructor(e){super(e),this._element=null,this._menu=null,this._handleRef=e=>{this._element=e},this._showMenu=()=>{if(this._menu&&this._menu.isShown())return this._menu.hide(),void this._menu.destroy();const{getActions:e,right:t}=this.props,n=Object(V.ensureNotNull)(this._element),i=e();0!==i.length&&Q.ContextMenuManager.createMenu(i).then(e=>{this._menu=e,e.show((e,i)=>{const s=n.getBoundingClientRect();return{clientX:t?s.right-e:s.left,clientY:s.top-Math.min(i,s.top),overrideHeight:s.top<i?s.top:void 0}},this._element||void 0)})}}render(){const{children:e}=this.props;return i.createElement("span",{onClick:this._showMenu,ref:this._handleRef},e)}}var $=n("jCNj"),ee=n("2mG+");const te={hint:window.t("Timezone")};const ne=Object(C.b)();class ie extends i.PureComponent{constructor(e,t){super(e,t),this._timeFormatter=new Y.TimeFormatter,this._tickInterval=void 0,this._tickClock=()=>{const{chartApiInstance:e}=this.context;if(void 0!==this._timezone){const t=Object($.utc_to_cal)(this._timezone,e.serverTime());this.setState({time:this._timeFormatter.format(t)})}},this._getActions=()=>{if(!this.props.withMenu)return[];const{chartWidget:e}=this.context;return function(e){e.updateActions();const t=e.actions();return t&&t.applyTimeZone instanceof K.Action?t.applyTimeZone.getSubItems():[]}(e)},Object(C.d)(t,{chartWidget:r.any.isRequired,chartApiInstance:r.any.isRequired}),this.state={time:""}}componentDidMount(){const{chartWidget:e}=this.context;this._tickInterval=setInterval(this._tickClock,1e3),e.withModel(null,()=>{const t=e.model();t.model().mainSeries().dataEvents().symbolResolved().subscribe(this,this.updateTimezonesButton),t.model().properties().timezone.subscribe(this,this.updateTimezonesButton)})}componentWillUnmount(){const{chartWidget:e}=this.context;clearInterval(this._tickInterval),e.withModel(null,()=>{const t=e.model();t.model().mainSeries().dataEvents().symbolResolved().unsubscribe(this,this.updateTimezonesButton),t.model().properties().timezone.unsubscribe(this,this.updateTimezonesButton)})}render(){const{className:e,withMenu:t}=this.props,{time:n}=this.state,s=void 0!==this._timezone?Object(Z.a)(this._timezone.name()).string:null;return i.createElement(J,{getActions:this._getActions},i.createElement(X,{className:l(e,ee.button,"apply-common-tooltip"),title:t?te.hint:void 0,disabled:!t,"data-name":"time-zone-menu"},n&&s&&`${n} (${s})`))}
updateTimezonesButton(){const{chartWidget:e}=this.context;if(!e.model())return;if(null===e.model().mainSeries().symbolInfo())return;let t=e.model().model().timezone();if("exchange"===t){const n=Object(V.ensureNotNull)(e.model().mainSeries().symbolInfo()).timezone;n&&(t=n)}this._timezone=Object($.get_timezone)(t),this._tickClock()}}ie.contextType=ne;var se=n("z6ID");function oe(e){return i.createElement("span",{className:l(se.separator,e.className)})}var ae=n("tU7i"),re=n("qFKp");class le{constructor(e,t,n){this._highlighted=!1,this._chartWidget=e,this._priceScaleGetter=t,this._owner=n,this._setHighlight=this._setHighlight.bind(this),this._removeHighlight=this._removeHighlight.bind(this)}destroy(){this._highlighted&&this._removeHighlight()}handlers(){const e=re.CheckMobile.any();return{onMouseEnter:e?void 0:this._setHighlight,onMouseLeave:e?void 0:this._removeHighlight}}_setHighlight(){const e=this._chartWidget.model().model(),t=e.paneForSource(e.mainSeries()),n=this._priceScaleGetter();if(null===t||null===n)return;const i=this._chartWidget.paneByState(t);if(null!==i){const t=i.rightPriceAxisesContainer().findAxisWidgetForScale(n);let s=null;null!==t&&(s=t.axisInfo());const o=i.leftPriceAxisesContainer().findAxisWidgetForScale(n);null!==o&&(s=o.axisInfo());const a=i.highlightedPriceAxis();null!==s&&a.value().axis!==s&&(a.setValue({owner:this._owner,axis:s}),e.lightUpdate(),this._highlighted=!0)}}_removeHighlight(){const e=this._chartWidget.model().model(),t=e.paneForSource(e.mainSeries());if(null===t)return;const n=this._chartWidget.paneByState(t);if(null!==n){const t=n.highlightedPriceAxis(),i=t.value();null!==i.axis&&i.owner===this._owner&&(t.setValue({owner:this._owner,axis:null}),e.lightUpdate(),this._highlighted=!1)}}}const ce=Object(C.b)();const he=Object(C.b)();const de=Object(C.b)();var ue=n("vPbs"),me=n("FQhm"),pe=n("VNzU");const ge={1:void 0,2:n("D756"),3:n("7mz7"),4:n("cdq6"),5:n("tgbL"),6:n("N7Ur"),8:n("pGSG")};var be=n("uqKQ"),ve=n("RgaO"),_e=n("pPtI"),Ce=n("RLwU");const fe=Object(C.b)();class xe extends i.PureComponent{constructor(e,t){super(e,t),this._handleChartSelect=()=>{const{chart:e,onSelect:t}=this.props;e.requestFullscreen(),t&&t()},this._handleActiveChartChange=()=>this.forceUpdate(),Object(C.d)(t,{chartWidgetCollection:r.any.isRequired})}componentDidMount(){const{chartWidgetCollection:e}=this.context;e.activeChartWidget.subscribe(this._handleActiveChartChange)}componentWillUnmount(){const{chartWidgetCollection:e}=this.context;e.activeChartWidget.unsubscribe(this._handleActiveChartChange)}render(){const{chart:e,width:t,height:n}=this.props,{chartWidgetCollection:s}=this.context,o=s.activeChartWidget.value()===e;let a,r;const c=e.model();if(c){const e=Object(V.ensureDefined)(c.mainSeries());a=e.symbol(),r=e.interval()}else{const t=e.properties().childs().mainSeriesProperties.childs();a=t.symbol.value(),r=t.interval.value()}return i.createElement("div",{className:l(Ce.swatch,o&&Ce.active),style:{maxWidth:t,width:t,height:n},onClick:this._handleChartSelect
},i.createElement(i.Fragment,null,i.createElement("div",{className:Ce.swatchInner},i.createElement("div",{className:l(Ce.text,o&&Ce.active)},a)),i.createElement("div",{className:l(Ce.resolution,o&&Ce.active)},Object(_e.getTranslatedResolution)(r))))}}xe.contextType=fe;var ye=n("JBxk"),we=n("YcaB");const Ee=window.t("Close",{context:"input"}),Se=Object(C.b)();class je extends i.PureComponent{constructor(e,t){super(e,t),this._preventPhoneLayoutButtonClick=()=>{const{onClose:e}=this.props,{resizerDetacher:t,chartWidgetCollection:n}=this.context;n.setViewMode(ue.CollectionViewMode.Multichart),t.exitFullscreen(),e&&e()},Object(C.d)(t,{onContentBoxChanged:r.any.isRequired,computeContentBox:r.any.isRequired,chartWidgetCollection:r.any.isRequired,resizerDetacher:r.any.isRequired})}componentDidMount(){const{onContentBoxChanged:e}=this.context;e.subscribe(this,this.forceUpdate)}componentWillUnmount(){const{onContentBoxChanged:e}=this.context;e.unsubscribe(this,this.forceUpdate)}render(){const{onClose:e}=this.props,{chartWidgetCollection:t,computeContentBox:n}=this.context,{top:s,left:o,height:a,width:r}=n(),c=pe.layouts[t.layout.value()].count,h=t.getAll().slice(0,c),d=a-2,u=r+4,m=u<d,p=h.length>3,g=p?2:1,b=Math.ceil(h.length/g),v=m?g:b,_=m?b:g,C=p||!m?(u-4*v)/v:void 0,f=p||m?(d-4*_)/_:void 0;return i.createElement("div",{className:we.container},i.createElement("div",{className:we.swatchContainerBackdrop,style:{top:s,left:o,height:a+39,width:r}}),i.createElement("div",{className:we.backdrop}),i.createElement(ve.a,{click:!0,handler:e},t=>i.createElement("span",{ref:t},i.createElement("div",{className:l(we.swatchContainer,m&&!p&&we.column,p&&we.twoColumns),style:{top:s,left:o,height:d,width:u}},h.map((t,n)=>i.createElement(xe,{key:n,width:C,height:f,chart:t,onSelect:e}))),i.createElement("div",{className:we.bottomToolbarContainer,style:{top:s+a,left:o,height:39,width:r}},i.createElement(ae.b,{className:we.bottomToolbarButton,isActive:!0,icon:ge[c],title:Ee,onClick:e}),i.createElement(ae.b,{icon:ye,className:we.bottomToolbarButton,onClick:this._preventPhoneLayoutButtonClick})))))}}je.contextType=Se;const Me=Object(be.a)(je);var Ne=n("8GpO");const Oe=window.t("Select Chart"),Ae=Object(C.b)();class We extends i.PureComponent{constructor(e,t){super(e,t),this._handleClick=()=>{const{isOpened:e}=this.state,t=e?"mobileChartPickerClose":"mobileChartPickerOpen";me.emit(t),this.setState({isOpened:!e})},this._handleLayoutChange=e=>{this.setState({layoutChartsCount:pe.layouts[e].count})},this._handleLayoutChangeGlobalOpen=()=>{this.setState({isOpened:!0})},this._handleLayoutChangeGlobalClose=()=>{this.setState({isOpened:!1})},Object(C.d)(t,{chartWidgetCollection:r.any.isRequired});const{chartWidgetCollection:n}=t;this.state={isOpened:!1,layoutChartsCount:pe.layouts[n.layout.value()].count}}componentDidMount(){const{chartWidgetCollection:e}=this.context;e.layout.subscribe(this._handleLayoutChange),me.subscribe(Ne.openMobileChartPickerCommand,this._handleLayoutChangeGlobalOpen,null),
me.subscribe(Ne.closeMobileChartPickerCommand,this._handleLayoutChangeGlobalClose,null)}componentWillUnmount(){const{chartWidgetCollection:e}=this.context;e.layout.unsubscribe(this._handleLayoutChange),me.unsubscribe(Ne.openMobileChartPickerCommand,this._handleLayoutChangeGlobalOpen,null),me.unsubscribe(Ne.closeMobileChartPickerCommand,this._handleLayoutChangeGlobalClose,null)}render(){const{className:e}=this.props,{isOpened:t,layoutChartsCount:n}=this.state,s=Object(V.ensureDefined)(ge[n]);return i.createElement(i.Fragment,null,i.createElement(ae.b,{icon:s,className:l("apply-common-tooltip",e),title:Oe,onClick:this._handleClick}),i.createElement(Me,{isOpened:t,onClose:this._handleClick}))}}We.contextType=Ae;var Re=n("Nkvk");const Be=Object(C.b)();var ke=n("+GaQ"),Te=n("XAms");const De=Object(C.b)();function Le(e){const t=Pe(e);return e.properties().dividendsAdjustment.value()&&"splits"!==t&&"none"!==t||"dividends"===t}function Pe(e){const t=e.symbolInfo();return null===t?"none":t.allowed_adjustment}const ze=Object(C.b)();const Ie=Object(C.b)();class He extends i.PureComponent{constructor(e,t){super(e,t),this._handleClick=()=>{const{resizerDetacher:e,chartWidgetCollection:t}=this.context;t.setViewMode(ue.CollectionViewMode.Multichart),e.exitFullscreen()},Object(C.d)(t,{chartWidgetCollection:r.any.isRequired,resizerDetacher:r.any.isRequired})}render(){const{className:e}=this.props;return i.createElement(ae.b,{icon:ye,className:e,onClick:this._handleClick})}}He.contextType=Ie;var Fe=n("T4/F"),qe=n("ApAi"),Ue=n("PP+v");const Ve={extLabel:window.t("ext"),extHint:window.t("Extended Hours is available only for intraday charts"),percentageHint:window.t("Toggle Percentage"),logLabel:window.t("log",{context:"scale"}),logHint:window.t("Toggle Log Scale"),autoLabel:window.t("auto",{context:"scale"}),autoHint:window.t("Toggle Auto Scale"),fullscreenHint:window.t("Toggle Maximize Chart"),adjLabel:window.t("adj",{context:"adjustments"}),adjHint:window.t("Adjust data for dividends"),adjForDividendsOnlyHint:window.t("Data is adjusted for dividends only"),adjForSplitsOnlyHint:window.t("Data is adjusted for splits only")},Ge={any:Ve.adjHint,dividends:Ve.adjForDividendsOnlyHint,splits:Ve.adjForSplitsOnlyHint,none:""},Xe=(Ze=e=>i.createElement(ae.b,{text:Ve.logLabel,title:Ve.logHint,className:e.className,isActive:e.isLogarithm,isGrouped:!0,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,"data-name":"logarithm"}),(Ye=class extends i.PureComponent{constructor(e,t){super(e,t),this._priceScale=null,this._handleSelect=()=>{const e=this.context.chartWidget.model(),t=Object(V.ensureNotNull)(this.state.series),n=t.priceScale(),i=n.mode();t.priceScale().isLockScale()||e.setPriceScaleMode({log:!i.log},n,window.t("Toggle Log Scale"))},Object(C.d)(t,{chartWidget:r.any.isRequired}),this.state={isActive:!1,series:null},this._priceAxisHighlighter=new le(this.context.chartWidget,()=>this._priceScale,"logarithm")}componentDidMount(){const e=this.context.chartWidget;e.withModel(null,()=>{
const t=e.model().mainSeries(),n=t.priceScale();this._handleMainSeriesPriceScaleChanged(n),t.priceScaleChanged().subscribe(this,this._handleMainSeriesPriceScaleChanged),this._handleModeChanged({},n.mode()),this.setState({isActive:t.priceScale().isLog(),series:t})})}componentWillUnmount(){const e=this.context.chartWidget;e.withModel(null,()=>{e.model().mainSeries().priceScaleChanged().unsubscribe(this,this._handleMainSeriesPriceScaleChanged)}),null!==this._priceScale&&(this._priceScale.modeChanged().unsubscribeAll(this),this._priceScale=null),this._priceAxisHighlighter.destroy()}render(){const{className:e}=this.props,{isActive:t,series:n}=this.state;return i.createElement(Ze,Object.assign({},this._priceAxisHighlighter.handlers(),{className:e,isLogarithm:t,isDisabled:null===n,onClick:this._handleSelect}))}_handleMainSeriesPriceScaleChanged(e){let t={};null!==this._priceScale&&(t=this._priceScale.mode(),this._priceScale.modeChanged().unsubscribe(this,this._handleModeChanged)),this._priceScale=e,this._priceScale.modeChanged().subscribe(this,this._handleModeChanged),this._handleModeChanged(t,e.mode())}_handleModeChanged(e,t){e.log!==t.log&&this.setState({isActive:t.log})}}).contextType=ce,Ye);var Ze,Ye;const Ke=function(e){var t;return(t=class extends i.PureComponent{constructor(e,t){super(e,t),this._priceScale=null,this._handleSelect=()=>{const e=this.context.chartWidget.model(),t=Object(V.ensureNotNull)(this.state.series).priceScale(),n=t.mode();e.setPriceScaleMode({autoScale:!n.autoScale},t,window.t("Toggle Auto Scale"))},Object(C.d)(t,{chartWidget:r.any.isRequired}),this.state={isActive:!1,series:null},this._priceAxisHighlighter=new le(this.context.chartWidget,()=>this._priceScale,"auto")}componentDidMount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries(),n=t.priceScale();this._handleMainSeriesPriceScaleChanged(n),t.priceScaleChanged().subscribe(this,this._handleMainSeriesPriceScaleChanged),this._handleModeChanged({},n.mode()),this.setState({isActive:t.priceScale().isAutoScale(),series:t})})}componentWillUnmount(){const e=this.context.chartWidget;e.withModel(null,()=>{e.model().mainSeries().priceScaleChanged().unsubscribe(this,this._handleMainSeriesPriceScaleChanged)}),null!==this._priceScale&&(this._priceScale.modeChanged().unsubscribeAll(this),this._priceScale=null),this._priceAxisHighlighter.destroy()}render(){const{className:t}=this.props,{isActive:n,series:s}=this.state;return i.createElement(e,Object.assign({},this._priceAxisHighlighter.handlers(),{className:t,isAuto:n,isDisabled:null===s,onClick:this._handleSelect}))}_handleMainSeriesPriceScaleChanged(e){let t={};null!==this._priceScale&&(t=this._priceScale.mode(),this._priceScale.modeChanged().unsubscribe(this,this._handleModeChanged)),this._priceScale=e,this._priceScale.modeChanged().subscribe(this,this._handleModeChanged),this._handleModeChanged(t,e.mode())}_handleModeChanged(e,t){e.autoScale!==t.autoScale&&this.setState({isActive:t.autoScale})}}).contextType=he,t}(e=>i.createElement(ae.b,{text:Ve.autoLabel,
title:Ve.autoHint,className:e.className,isActive:e.isAuto,isGrouped:!0,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,"data-name":"auto"})),Qe=function(e){var t;return(t=class extends i.PureComponent{constructor(e,t){super(e,t),this._priceScale=null,this._handleSelect=()=>{const e=this.context.chartWidget.model(),t=Object(V.ensureNotNull)(this.state.series),n=t.priceScale(),i=n.mode();t.priceScale().isLockScale()||e.setPriceScaleMode({percentage:!i.percentage},n,window.t("Toggle Percentage Scale"))},Object(C.d)(t,{chartWidget:r.any.isRequired}),this.state={isActive:!1,series:null},this._priceAxisHighlighter=new le(this.context.chartWidget,()=>this._priceScale,"percentage")}componentDidMount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries(),n=t.priceScale();this._handleMainSeriesPriceScaleChanged(n),t.priceScaleChanged().subscribe(this,this._handleMainSeriesPriceScaleChanged),this._handleScaleChange({},n.mode()),this.setState({isActive:t.priceScale().isPercentage(),series:t})})}componentWillUnmount(){const e=this.context.chartWidget;e.withModel(null,()=>{e.model().mainSeries().priceScaleChanged().unsubscribe(this,this._handleMainSeriesPriceScaleChanged)}),null!==this._priceScale&&(this._priceScale.modeChanged().unsubscribeAll(this),this._priceScale=null),this._priceAxisHighlighter.destroy()}render(){const{className:t}=this.props,{isActive:n,series:s}=this.state;return i.createElement(e,Object.assign({},this._priceAxisHighlighter.handlers(),{className:t,isPercentage:n,isDisabled:null===s,onClick:this._handleSelect}))}_handleMainSeriesPriceScaleChanged(e){let t={};null!==this._priceScale&&(t=this._priceScale.mode(),this._priceScale.modeChanged().unsubscribe(this,this._handleScaleChange)),this._priceScale=e,this._priceScale.modeChanged().subscribe(this,this._handleScaleChange),this._handleScaleChange(t,e.mode())}_handleScaleChange(e,t){e.percentage!==t.percentage&&this.setState({isActive:t.percentage})}}).contextType=de,t}(e=>i.createElement(ae.b,{icon:Fe,title:Ve.percentageHint,className:e.className,isActive:e.isPercentage,isDisabled:e.isDisabled,isGrouped:!0,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,"data-name":"percentage"}));let Je,$e;Je=function(e){var t;return(t=class extends i.PureComponent{constructor(e,t){super(e,t),this._handleSelect=()=>{const{allowedAdjustment:e}=this.state;if("dividends"===e||"splits"===e)return;const t=this.context.chartWidget.model(),n=Object(V.ensureNotNull)(this.state.series).properties();t.setProperty(n.dividendsAdjustment,!n.dividendsAdjustment.value(),window.t("Dividends Adjustment"))},Object(C.d)(t,{chartWidget:r.any.isRequired}),this.state={shouldAdjustForDividends:!1,allowedAdjustment:"none",series:null}}componentDidMount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries();t.properties().dividendsAdjustment.subscribe(this,this._handleAdjustChange),t.dataEvents().symbolResolved().subscribe(this,this._handleAdjustChange),this.setState({
shouldAdjustForDividends:Le(t),allowedAdjustment:Pe(t),series:t})})}componentWillUnmount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries();t.properties().dividendsAdjustment.unsubscribe(this,this._handleAdjustChange),t.dataEvents().symbolResolved().unsubscribe(this,this._handleAdjustChange)})}render(){const{className:t}=this.props,{shouldAdjustForDividends:n,allowedAdjustment:s}=this.state;return i.createElement(e,{className:t,shouldAdjustForDividends:n,allowedAdjustment:s,isDisabled:"any"!==s,onClick:this._handleSelect})}_handleAdjustChange(){const e=Object(V.ensureNotNull)(this.state.series);this.setState({shouldAdjustForDividends:Le(e),allowedAdjustment:Pe(e)})}}).contextType=ze,t}(e=>i.createElement(ae.b,{text:Ve.adjLabel,title:Ge[e.allowedAdjustment],className:e.className,isActive:e.shouldAdjustForDividends,isDisabled:e.isDisabled,isGrouped:!0,onClick:e.onClick,"data-name":"adj"})),$e=function(e){var t;return(t=class extends i.PureComponent{constructor(e,t){super(e,t),this._handleSelect=()=>{const e=this.context.chartWidget.model(),t=Object(V.ensureNotNull)(this.state.series).properties();e.setProperty(t.extendedHours,!t.extendedHours.value(),window.t("Extended Hours"))},Object(C.d)(t,{chartWidget:r.any.isRequired}),this.state={isActive:!1,series:null}}componentDidMount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries(),n=t.properties();n.extendedHours.subscribe(this,this._handleExtendedHoursChange),n.interval.subscribe(this,this._handleExtendedHoursChange),this.setState({isActive:Boolean(n.extendedHours.value()),series:t})})}componentWillUnmount(){const e=this.context.chartWidget;e.withModel(null,()=>{const t=e.model().mainSeries().properties();t.extendedHours.unsubscribe(this,this._handleExtendedHoursChange),t.interval.unsubscribe(this,this._handleExtendedHoursChange)})}render(){const{className:t}=this.props,{isActive:n,series:s}=this.state;return i.createElement(e,{className:t,isExtendedHours:n,isDisabled:null===s,onClick:this._handleSelect})}_handleExtendedHoursChange(){const e=Object(V.ensureNotNull)(this.state.series).properties();this.setState({isActive:Boolean(e.extendedHours.value())})}}).contextType=De,t}(e=>i.createElement(ae.b,{text:Ve.extLabel,title:Ve.extHint,className:e.className,isActive:e.isExtendedHours,isDisabled:e.isDisabled,isGrouped:!0,onClick:e.onClick,"data-name":"ext"}));const et=Object(L.b)({keys:["Alt","Enter"],text:"{0} + {1}"}),tt=function(e){var t;return(t=class extends i.PureComponent{constructor(e,t){super(e,t),this._handleClick=e=>{const{resizerDetacher:t,chartWidgetCollection:n}=this.context;e.shiftKey&&t.detachable.value()?t.detach():this.state.isFullscreen?t.exitFullscreen():(n.setViewMode(ue.CollectionViewMode.ForceFullscreen),t.requestFullscreen())},this._handleLayoutChange=e=>{this.setState({isFullscreen:e})},this._handlePhoneSize=()=>{this.setState({isChangeLayoutButton:this._isChangeLayoutButton()})},Object(C.d)(t,{chartWidgetCollection:r.any.isRequired,resizerDetacher:r.any.isRequired})
;const{resizerDetacher:n}=t;this.state={isFullscreen:n.fullscreen.value(),isChangeLayoutButton:this._isChangeLayoutButton()}}componentDidMount(){const{resizerDetacher:e,chartWidgetCollection:t}=this.context,{mobileChangeLayoutEnabled:n}=this.props;e.fullscreen.subscribe(this._handleLayoutChange),n&&(t.viewMode.subscribe(this._handlePhoneSize),Re.mediaState.on("changeDevice",this._handlePhoneSize))}componentWillUnmount(){const{resizerDetacher:e,chartWidgetCollection:t}=this.context,{mobileChangeLayoutEnabled:n}=this.props;e.fullscreen.unsubscribe(this._handleLayoutChange),n&&(t.viewMode.unsubscribe(this._handlePhoneSize),Re.mediaState.off("changeDevice",this._handlePhoneSize))}render(){const{className:t}=this.props,{isFullscreen:n,isChangeLayoutButton:s}=this.state;return s?i.createElement(We,{className:t}):i.createElement(e,{className:t,isFullscreen:n,onClick:this._handleClick})}_isChangeLayoutButton(){{const{chartWidgetCollection:e}=this.context,{mobileChangeLayoutEnabled:t}=this.props;return Boolean(t)&&Re.mediaState.isPhoneSizeDevice()&&e.viewMode.value()===ue.CollectionViewMode.ForceFullscreen}}}).contextType=Be,t}(e=>i.createElement(ae.b,{icon:qe,title:Ve.fullscreenHint,className:e.className,isActive:e.isFullscreen,onClick:e.onClick,"data-tooltip-hotkey":et,"data-name":"fullscreen"})),nt={properties:!0,fullscreen:!0,preventPhoneLayout:!0},it={fullscreen:Number.MIN_SAFE_INTEGER,preventPhoneLayout:Number.MIN_SAFE_INTEGER,properties:Number.MIN_SAFE_INTEGER,timeZones:-1,auto:0,logarithm:1,percentage:2,ext:3,adj:4},st=(()=>{const e=new Map;return e.set(Xe,"logarithm"),e.set(Qe,"percentage"),e.set(Ke,"auto"),void 0!==$e&&e.set($e,"ext"),void 0!==Je&&e.set(Je,"adj"),e.set(tt,"fullscreen"),e.set(He,"preventPhoneLayout"),e})();function ot(e){Object(P.trackEvent)("GUI","Chart Bottom Toolbar",e)}const at={dateRangeMode:"hidden",timeZones:!0,fullscreen:!0,preventPhoneLayout:!0,properties:!0,auto:!0,logarithm:!0,percentage:!0,ext:!0,adj:!0},rt=Object(C.b)();class lt extends i.PureComponent{constructor(e,t){var n,o;super(e,t),this._timezoneButtonRef=null,this._layout=Object.assign({},at),this._raf=null,this._toolbar=null,this._rangeExpanded=null,this._rangeCollapsed=null,this._seriesComponents={},this._injector=(n=()=>this._layout,o=(e,t)=>this._seriesComponents[t]=e,(e,t,s)=>{if(i.isValidElement(e)&&"string"!=typeof e.type){const{props:a}=e;if("string"==typeof a.className){const r={className:l(a.className,0===t&&Ue.first,t===s.length-1&&Ue.last)},c=n(),h=Object(V.ensureDefined)(st.get(e.type));return i.createElement("div",{key:null===e.key?void 0:e.key,className:l(Ue.inline,c[h]&&Ue.collapsed),ref:e=>o(e,h),onClick:()=>ot(h)},i.cloneElement(e,r))}}return e}),this._handleResize=()=>{null===this._raf&&(this._raf=requestAnimationFrame(()=>{const e=this._layout,t=Object(V.ensureNotNull)(this._toolbar),n=Object(V.ensureNotNull)(this._rangeExpanded),i=(o=function(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];if(null!==i){const e=s.findDOMNode(i);null!==e&&(t[n]=e)}}),t}(this._seriesComponents),
Object.keys(o).map(e=>({name:e,width:o[e].offsetWidth})).sort((e,t)=>it[e.name]-it[t.name]));var o;const a=t.offsetWidth,r=i.reduce((e,t)=>e+t.width,0),l=n.offsetWidth,c=!Boolean(n.textContent)||a-r-l<=0?"collapsed":"expanded";if(Object.assign(e,{dateRangeMode:c}),"expanded"!==c){const t=a-Object(V.ensureNotNull)(this._rangeCollapsed).offsetWidth-0;let n=0,s=0;for(const o of i)n+=o.width,o.name in nt?(s+=o.width,Object.assign(e,{[o.name]:!1})):Object.assign(e,{[o.name]:t<=n});t<=s&&Object.assign(e,{dateRangeMode:"hidden"})}else Object.assign(e,{timeZones:!1,fullscreen:!1,preventPhoneLayout:!1,properties:!1,auto:!1,logarithm:!1,percentage:!1,ext:!1,adj:!1});this._applyResizing(),this._raf=null}))},this._handleTimezoneButtonRef=e=>{this._timezoneButtonRef=e},this._handleMeasure=()=>{null!==this._toolbar&&this.resizeUI()},this._handleFullscreenableChange=e=>{this._setStateWithResize({isFullscreenable:e}),this._handlePreventPhoneLayoutButtonVisibility()},this._handlePreventPhoneLayoutButtonVisibility=()=>{this._setStateWithResize({isPreventPhoneLayoutButton:this._isPreventPhoneLayoutButton()})},this._handleToolbarRef=e=>this._toolbar=e,this._handleRangeCollapsedRef=e=>this._rangeCollapsed=e,this._handleRangeExpandedRef=e=>this._rangeExpanded=e,this._handleTimeZonesRef=e=>{this._seriesComponents.timeZones=e},Object(C.d)(t,{onContentBoxChanged:r.any.isRequired,chartApiInstance:r.any.isRequired,chartWidget:r.any.isRequired,chartWidgetCollection:r.any.isRequired,resizerDetacher:r.any.isRequired});const{resizerDetacher:a}=this.context;this.state={isFullscreenable:a.fullscreenable.value(),isPreventPhoneLayoutButton:this._isPreventPhoneLayoutButton()}}componentDidMount(){const{onContentBoxChanged:e,resizerDetacher:t,chartWidgetCollection:n,chartWidget:i}=this.context;e.subscribe(this,this._handleResize),Re.mediaState.on("changeDevice",this._handlePreventPhoneLayoutButtonVisibility),n.viewMode.subscribe(this._handlePreventPhoneLayoutButtonVisibility),t.fullscreenable.subscribe(this._handleFullscreenableChange),i.withModel(null,()=>{const e=i.model().mainSeries();e.dataEvents().symbolResolved().subscribe(this,this._updateButtonsVisibility),e.isDWMProperty().subscribe(this,this._updateButtonsVisibility),this._updateButtonsVisibility()}),this.updateTimezonesButton(),this.resizeUI()}componentWillUnmount(){const{onContentBoxChanged:e,resizerDetacher:t,chartWidgetCollection:n,chartWidget:i}=this.context;e.unsubscribe(this,this._handleResize),Re.mediaState.off("changeDevice",this._handlePreventPhoneLayoutButtonVisibility),n.viewMode.unsubscribe(this._handlePreventPhoneLayoutButtonVisibility),t.fullscreenable.unsubscribe(this._handleFullscreenableChange),i.withModel(null,()=>{const e=i.model().mainSeries();e.dataEvents().symbolResolved().unsubscribe(this,this._updateButtonsVisibility),e.isDWMProperty().unsubscribe(this,this._updateButtonsVisibility)}),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null)}render(){const e=this._layout;return i.createElement("div",{className:Ue.toolbar,ref:this._handleToolbarRef,
onContextMenu:Te.a},this.props.timeFramesWidgetEnabled&&i.createElement(ke.a,null,i.createElement("div",{className:l(Ue.dateRangeWrapper,"collapsed"!==e.dateRangeMode&&Ue.collapsed),ref:this._handleRangeCollapsedRef},i.createElement("div",{className:l(Ue.dateRangeCollapsed)},i.createElement(j,{goToDateButton:this.props.goToDateEnabled}))),i.createElement(c,{onMeasure:this._handleMeasure},i.createElement("div",{className:l(Ue.dateRangeWrapper,"expanded"!==e.dateRangeMode&&Ue.collapsed),ref:this._handleRangeExpandedRef},i.createElement("div",{className:l(Ue.dateRangeExpanded)},i.createElement(T,null),this.props.goToDateEnabled&&i.createElement(oe,null),this.props.goToDateEnabled&&i.createElement(U,null))))),i.createElement("div",{className:Ue.seriesControlWrapper},this.props.timeWidgetEnabled&&i.createElement(c,{onMeasure:this._handleMeasure},i.createElement("div",{className:l(Ue.inline,e.timeZones&&Ue.collapsed),ref:this._handleTimeZonesRef},i.createElement("div",{className:Ue.inline,onClick:this._trackTimezonesButtonClick},i.createElement(ie,{className:Ue.timezone,withMenu:this.props.timezoneMenuEnabled,ref:this._handleTimezoneButtonRef})),i.createElement("div",{className:Ue.inline},i.createElement(oe,null)))),i.createElement(ke.a,{map:this._injector},void 0!==Je&&this.props.adjustForDividendsButtonEnabled&&this.state.symbolAllowsAdjButton&&i.createElement(Je,{className:Ue.item}),void 0!==$e&&this.props.extendedHoursButtonEnabled&&this.state.symbolAllowsExtButton&&this.state.intervalAllowsExtButton&&i.createElement($e,{className:Ue.item}),this.props.percentageScaleButtonEnabled&&!h.enabled("fundamental_widget")&&i.createElement(Qe,{className:Ue.icon}),this.props.logScaleButtonEnabled&&i.createElement(Xe,{className:Ue.item}),this.props.autoScaleButtonEnabled&&i.createElement(Ke,{className:Ue.item}),this.props.fullscreenButtonEnabled&&this.state.isFullscreenable&&i.createElement(tt,{className:Ue.icon,mobileChangeLayoutEnabled:this.props.mobileChangeLayoutEnabled}),this.props.fullscreenButtonEnabled&&this.props.mobileChangeLayoutEnabled&&this.state.isPreventPhoneLayoutButton&&i.createElement(He,{className:Ue.icon}))))}updateTimezonesButton(){null!==this._timezoneButtonRef&&this._timezoneButtonRef.updateTimezonesButton()}resizeUI(){this._handleResize()}_updateButtonsVisibility(){{const{chartWidget:e}=this.context,t=e.model().mainSeries(),n=t.symbolInfo(),i=t.isDWMProperty();this._setStateWithResize({symbolAllowsAdjButton:null!==n&&"none"!==n.allowed_adjustment,symbolAllowsExtButton:null!==n&&Boolean(n.has_extended_hours),intervalAllowsExtButton:!i.value()})}}_trackTimezonesButtonClick(){ot("timeZones")}_setStateWithResize(e){Object.assign(this._layout,at),this._applyResizing(),this.setState(e,()=>this._handleResize())}_applyResizing(){const e=this._layout,{dateRangeMode:t}=e,n=Object(o.d)(e,["dateRangeMode"]);this._rangeExpanded&&this._rangeExpanded.classList.toggle(Ue.collapsed,"expanded"!==t),this._rangeCollapsed&&this._rangeCollapsed.classList.toggle(Ue.collapsed,"collapsed"!==t),Object.keys(n).forEach(e=>{
const t=e,i=this._seriesComponents[t];i&&i.classList.toggle(Ue.collapsed,n[t])})}_isPreventPhoneLayoutButton(){{const{chartWidgetCollection:e,resizerDetacher:t}=this.context;return t.fullscreenable.value()&&re.CheckMobile.any()&&Re.mediaState.isPhoneSizeDevice()&&e.viewMode.value()===ue.CollectionViewMode.ForceFullscreen}}}lt.contextType=rt;const ct={onContentBoxChanged:r.any,computeContentBox:r.any,chartWidget:r.any,chartApiInstance:r.any,chartWidgetCollection:r.any,resizerDetacher:r.any,availableTimeFrames:r.any};class ht extends i.PureComponent{constructor(e){super(e),this._setActiveChart=e=>{this._defineRegistry(e),this.setState({chartWidget:e})};const t=this.props.chartWidgetCollection.activeChartWidget.value();this.state={chartWidget:t},this._defineRegistry(t)}componentDidMount(){this.props.chartWidgetCollection.activeChartWidget.subscribe(this._setActiveChart)}componentWillUnmount(){this.props.chartWidgetCollection.activeChartWidget.unsubscribe(this._setActiveChart)}render(){const{chartWidget:e}=this.state;if(!e)return null;const{options:t}=this.props,n={timeFramesWidgetEnabled:t.timeFramesWidgetEnabled,goToDateEnabled:t.timeFramesWidget.goToDateEnabled,timeWidgetEnabled:t.timeWidgetEnabled,timezoneMenuEnabled:t.timeWidget&&t.timeWidget.timezoneMenuEnabled,extendedHoursButtonEnabled:t.extendedHoursButtonEnabled,adjustForDividendsButtonEnabled:t.adjustForDividendsButtonEnabled,logScaleButtonEnabled:t.logScaleButtonEnabled,percentageScaleButtonEnabled:t.percentageScaleButtonEnabled,autoScaleButtonEnabled:t.autoScaleButtonEnabled,fullscreenButtonEnabled:t.fullscreenButtonEnabled,mobileChangeLayoutEnabled:t.mobileChangeLayoutEnabled};return i.createElement(C.a,{validation:ct,value:this._registry},i.createElement(lt,Object.assign({key:e.id()},n)))}_defineRegistry(e){const{onContentBoxChanged:t,computeContentBox:n,chartApiInstance:i,chartWidgetCollection:s,options:{timeFramesWidgetEnabled:o,timeFramesWidget:a}}=this.props,r=o?a.availableTimeFrames:void 0;this._registry={onContentBoxChanged:t,computeContentBox:n,chartWidget:e,availableTimeFrames:r,chartApiInstance:i,chartWidgetCollection:s,resizerDetacher:e.getResizerDetacher()}}}n.d(t,"BottomToolbarRenderer",(function(){return dt}));class dt{constructor(e,t,n,o,a,r,l){this._container=e;const c=i.createElement(ht,{onContentBoxChanged:t,computeContentBox:n,chartWidgetCollection:o,chartApiInstance:a,chartWidgetOptions:r,options:l});s.render(c,e),e.setAttribute("data-initialized","true")}destroy(){s.unmountComponentAtNode(this._container),this._container.removeAttribute("data-initialized")}}},N7Ur:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M9.725 4.992l.521.574c-.315.126-.772.55-1.37 1.273-.594.72-.923 1.275-.988 1.665.297-.286.711-.43 1.24-.43.696 0 1.252.223 1.671.667.42.444.629 1.054.629 1.831 0 .77-.217 1.39-.65 1.859-.43.469-.97.703-1.622.703-1.726 0-2.59-1.144-2.59-3.432 0-.952.337-1.926 1.01-2.922.677-.999 1.394-1.595 2.15-1.788zm-2.03 5.548c0 1.12.46 1.681 1.38 1.681.387 0 .691-.145.913-.435.226-.293.339-.68.339-1.16 0-.498-.118-.895-.355-1.192a1.114 1.114 0 0 0-.913-.446c-.91 0-1.364.517-1.364 1.552z"/></svg>'},NOPy:function(e,t,n){e.exports={separator:"separator-eqcGT_ow",small:"small-eqcGT_ow",normal:"normal-eqcGT_ow",large:"large-eqcGT_ow"}},"PP+v":function(e,t,n){e.exports={toolbar:"toolbar-2yU8ifXU",dateRangeWrapper:"dateRangeWrapper-2yU8ifXU",seriesControlWrapper:"seriesControlWrapper-2yU8ifXU",dateRangeExpanded:"dateRangeExpanded-2yU8ifXU",dateRangeCollapsed:"dateRangeCollapsed-2yU8ifXU",item:"item-2yU8ifXU",first:"first-2yU8ifXU",last:"last-2yU8ifXU",inline:"inline-2yU8ifXU",timezone:"timezone-2yU8ifXU",icon:"icon-2yU8ifXU",hidden:"hidden-2yU8ifXU",collapsed:"collapsed-2yU8ifXU"}},"R4+T":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},R5JZ:function(e,t,n){"use strict";function i(e,t,n,i,s){function o(s){if(e>s.timeStamp)return;const o=s.target;void 0!==n&&null!==t&&null!==o&&o.ownerDocument===i&&(t.contains(o)||n(s))}return s.click&&i.addEventListener("click",o,!1),s.mouseDown&&i.addEventListener("mousedown",o,!1),s.touchEnd&&i.addEventListener("touchend",o,!1),s.touchStart&&i.addEventListener("touchstart",o,!1),()=>{i.removeEventListener("click",o,!1),i.removeEventListener("mousedown",o,!1),i.removeEventListener("touchend",o,!1),i.removeEventListener("touchstart",o,!1)}}n.d(t,"a",(function(){return i}))},RLwU:function(e,t,n){e.exports={swatch:"swatch-1Y2ZbXvs",active:"active-1Y2ZbXvs",swatchInner:"swatchInner-1Y2ZbXvs",text:"text-1Y2ZbXvs",resolution:"resolution-1Y2ZbXvs"}},RZ2Z:function(e,t,n){e.exports={slider:"slider-3GYrNsPp",inner:"inner-3GYrNsPp"}},RgaO:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),s=n("8Rai");function o(e){const{children:t}=e,n=Object(i.d)(e,["children"]);return t(Object(s.a)(n))}},"T4/F":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"><g fill="none" stroke="currentColor"><circle cx="3.5" cy="3.5" r="2"/><circle cx="10.5" cy="10.5" r="2"/><path stroke-linecap="square" d="M9.5 1.5l-5 11"/></g></svg>'},URQ3:function(e,t,n){e.exports={button:"button-2pZNJ24z",hover:"hover-2pZNJ24z",inner:"inner-2pZNJ24z"}},"W9Y+":function(e,t,n){e.exports={item:"item-3SbREAgE",hover:"hover-3SbREAgE",isActive:"isActive-3SbREAgE",
isFirst:"isFirst-3SbREAgE",isLast:"isLast-3SbREAgE"}},X0gx:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI"),s=n.n(i),o=n("tWVy");const a=s.a.createContext(o.a)},XiJV:function(e,t,n){e.exports={separator:"separator-3No0pWrk"}},YcaB:function(e,t,n){e.exports={container:"container-oqejjTIw",backdrop:"backdrop-oqejjTIw",swatchContainerBackdrop:"swatchContainerBackdrop-oqejjTIw",swatchContainer:"swatchContainer-oqejjTIw",column:"column-oqejjTIw",twoColumns:"twoColumns-oqejjTIw",bottomToolbarContainer:"bottomToolbarContainer-oqejjTIw",bottomToolbarButton:"bottomToolbarButton-oqejjTIw"}},bQ7Y:function(e,t,n){e.exports={button:"button-2Vpz_LXc",hover:"hover-2Vpz_LXc",isInteractive:"isInteractive-2Vpz_LXc",isGrouped:"isGrouped-2Vpz_LXc",isActive:"isActive-2Vpz_LXc",isOpened:"isOpened-2Vpz_LXc",isDisabled:"isDisabled-2Vpz_LXc",text:"text-2Vpz_LXc",icon:"icon-2Vpz_LXc"}},c7H2:function(e,t,n){e.exports={button:"button-yLOygoSG",hover:"hover-yLOygoSG",icon:"icon-yLOygoSG"}},cdq6:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M10.853 10.857V13h-1.02v-2.143H6.25v-.612l4.227-5.146h.376v4.93h.795v.828h-.795zm-1.02-3.615l-2.31 2.788h2.31V7.242z"/></svg>'},ijHL:function(e,t,n){"use strict";function i(e){return o(e,a)}function s(e){return o(e,r)}function o(e,t){const n=Object.entries(e).filter(t),i={};for(const[s,o]of n)i[s]=o;return i}function a(e){const[t,n]=e;return 0===t.indexOf("data-")&&"string"==typeof n}function r(e){return 0===e[0].indexOf("aria-")}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return r}))},jAh7:function(e,t,n){"use strict";n.r(t),n.d(t,"OverlapManager",(function(){return o})),n.d(t,"getRootOverlapManager",(function(){return r}));var i=n("Eyy1");class s{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter(t=>e!==t)}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class o{constructor(e=document){this._storage=new s,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)})}(t,n),this._container=n}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);const i=this._document.createElement("div");if(i.style.position=t.position,i.style.zIndex=this._index.toString(),i.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length
;if(t.index>=e)this._container.appendChild(i);else if(t.index<=0)this._container.insertBefore(i,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(i,e)}}else"reverse"===t.direction?this._container.insertBefore(i,this._container.firstChild):this._container.appendChild(i);return this._windows.set(e,i),++this._index,i}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveToTop(e){if(this.getZindex(e)!==this._index){this.ensureWindow(e).style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const a=new WeakMap;function r(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return Object(i.ensureDefined)(a.get(t));{const t=new o(e),n=function(e){const t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t}(e);return a.set(n,t),t.setContainer(n),e.body.appendChild(n),t}}},nPPD:function(e,t,n){"use strict";function i(e,t,n={}){const i=Object.assign({},t);for(const s of Object.keys(t)){const o=n[s]||s;o in e&&(i[s]=[e[o],t[s]].join(" "))}return i}function s(e,t,n={}){return Object.assign({},e,i(e,t,n))}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}))},pGSG:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M8.012 8.623a2.238 2.238 0 0 1-.817-.747 1.766 1.766 0 0 1-.317-.988c0-.584.197-1.046.591-1.386.398-.34.91-.51 1.536-.51.677 0 1.202.17 1.574.51.372.34.559.804.559 1.391 0 .344-.113.695-.339 1.053-.225.354-.487.616-.784.784.945.53 1.418 1.226 1.418 2.09 0 .726-.218 1.29-.655 1.691-.437.398-1.037.596-1.8.596-1.59 0-2.384-.762-2.384-2.288 0-.44.136-.873.408-1.3.272-.426.609-.725 1.01-.896zm1.316-.333c.487-.459.73-.933.73-1.424 0-.293-.098-.526-.295-.698-.194-.175-.446-.263-.758-.263-.701 0-1.052.324-1.052.972 0 .48.458.95 1.375 1.413zm-.478.8c-.788.426-1.182 1.002-1.182 1.73 0 .39.122.717.365.982.244.262.559.392.946.392.4 0 .73-.129.988-.386.261-.258.392-.588.392-.989 0-.29-.09-.562-.269-.816-.179-.258-.592-.562-1.24-.913z"/></svg>'},qSb5:function(e,t,n){e.exports={sliderRow:"sliderRow-1emAA4_D"}},tU7i:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var i=n("mrSG"),s=n("q1tI"),o=n("TSYQ"),a=n("Iivm"),r=n("bQ7Y");const l=r,c=s.forwardRef((e,t)=>{
const{icon:n,isActive:l,isOpened:c,isDisabled:h,isGrouped:d,isHovered:u,onClick:m,text:p,textBeforeIcon:g,title:b,theme:v=r,className:_,forceInteractive:C,"data-name":f}=e,x=Object(i.d)(e,["icon","isActive","isOpened","isDisabled","isGrouped","isHovered","onClick","text","textBeforeIcon","title","theme","className","forceInteractive","data-name"]),y=o(_,v.button,b&&"apply-common-tooltip",{[v.isActive]:l,[v.isOpened]:c,[v.isInteractive]:(C||Boolean(m))&&!h,[v.isDisabled]:h,[v.isGrouped]:d,[v.hover]:u}),w=n&&("string"==typeof n?s.createElement(a.a,{className:v.icon,icon:n}):s.cloneElement(n,{className:o(v.icon,n.props.className)}));return s.createElement("div",Object.assign({},x,{ref:t,"data-role":"button",className:y,onClick:h?void 0:m,title:b,"data-name":f}),g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p),w,!g&&p&&s.createElement("div",{className:o("js-button-text",v.text)},p))})},tgbL:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18"><path fill="none" stroke="currentColor" d="M11 1.5h3.5a2 2 0 0 1 2 2V7m0 5v2.5a2 2 0 0 1-2 2H11m-4 0H3.5a2 2 0 0 1-2-2V11m0-4V3.5a2 2 0 0 1 2-2H7"/><path fill="currentColor" d="M7.362 9.16l-.365-.253V5.1h3.915v.913H8.017v1.912c.265-.197.602-.295 1.01-.295.73 0 1.287.218 1.67.655.387.437.58 1.058.58 1.864 0 1.973-.879 2.96-2.637 2.96-.734 0-1.343-.205-1.826-.613l.414-.897c.487.398.956.596 1.407.596 1.01 0 1.514-.63 1.514-1.89 0-1.175-.497-1.762-1.493-1.762-.48 0-.911.206-1.294.618z"/></svg>'},ul7r:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M1.5 8V6.5m7.5 9h5.5a2 2 0 0 0 2-2v-7m-15 0v-2c0-1.1.9-2 2-2h11a2 2 0 0 1 2 2v2m-15 0h15"/><path fill="currentColor" d="M5 1h1v3H5V1zM12 1h1v3h-1V1z"/><path stroke="currentColor" d="M0 12.5h7.5m0 0L4 16m3.5-3.5L4 9"/></svg>'},uqKQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("q1tI"),s=n("AiMB");function o(e){return class extends i.PureComponent{render(){const{isOpened:t,root:n}=this.props;if(!t)return null;const o=i.createElement(e,Object.assign({},this.props,{zIndex:150}));return"parent"===n?o:i.createElement(s.a,null,o)}}}},z0Cx:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("aIyQ"),s=n.n(i),o=n("Kxc7"),a=n("dfhE");class r{constructor(e){this._state={ranges:[]},this._change=new s.a,this._rangeChangedListenerBound=this._onRangeChanged.bind(this);const{chartWidget:t}=this._context=e;t.withModel(null,()=>{const e=t.model(),n=e.mainSeries();n.onStatusChanged().subscribe(this,this._updateAvailableRanges),o.enabled("update_timeframes_set_on_symbol_resolve")&&n.dataEvents().symbolResolved().subscribe(this,this._updateAvailableRanges),n.priceScale().properties().childs().lockScale.subscribe(this,this._updateAvailableRanges);const i=e.model().appliedTimeFrame();i.subscribe(this._rangeChangedListenerBound),this._rangeChangedListenerBound(i.value()),this._updateAvailableRanges()})}state(){return this._state}onChange(){return this._change}
selectRange(e){this._setState({activeRange:e.value.value});const{chartWidgetCollection:t}=this._context,n={val:e.value,res:e.targetResolution};t.setTimeFrame(n)}destroy(){const{chartWidget:e}=this._context;e.withModel(null,()=>{const t=e.model(),n=t.mainSeries();n.onStatusChanged().unsubscribe(this,this._updateAvailableRanges),o.enabled("update_timeframes_set_on_symbol_resolve")&&n.dataEvents().symbolResolved().unsubscribe(this,this._updateAvailableRanges),n.priceScale().properties().childs().lockScale.unsubscribe(this,this._updateAvailableRanges),t.model().appliedTimeFrame().unsubscribe(this._rangeChangedListenerBound)}),this._change.destroy()}_setState(e){this._state=Object.assign({},this._state,e),this._change.fire(this._state)}_onRangeChanged(e){let t;null!==e&&"period-back"===e.val.type&&(t=e.val.value),this._setState({activeRange:t})}_updateAvailableRanges(){const{availableTimeFrames:e,chartWidget:t}=this._context;if(!t.model())return;const n=t.model().mainSeries(),i=n.status();if(i===a.STATUS_LOADING||i===a.STATUS_RESOLVING)return;const s=e(n.symbolInfo(),n.status());0!==s.length&&this._setState({ranges:s})}}},z6ID:function(e,t,n){e.exports={separator:"separator-13-1nlsQ"}}}]);