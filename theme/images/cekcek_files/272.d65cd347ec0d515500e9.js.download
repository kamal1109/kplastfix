(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{"3g8u":function(t,i,e){"use strict";e.r(i),function(t,o,n){e.d(i,"MiniChartWidget",(function(){return v}));var s=e("jFln"),r=e("FIi8"),a=e("c2JX"),h=e("ogJP"),l=e("txPx"),p=e("e3/o"),u=e("Hr11"),_=e("ikwP"),d=e("Ialn"),c=e("zDbI"),g=e("HGP3");const f=Object(l.getLogger)("Chart.MiniChartWidget");function v(i,e,o={}){this._options=Object(r.deepExtend)(this.defaults(),o),this._elContainer=e,this._canvasBinding=null,this._ctx=null,this._onResizeThrottled=null,this._isResizeScheduled=!1,this._plots=(i||[]).map(t=>(o=Object(r.deepExtend)({},this._options.plot,t.options||{}),new m(t.data,o))),this._initCanvas();const n=()=>this._plots;this._xScale=new x(n,this._canvasBinding,this._options.xScale),this._yScale=new S(n,this._canvasBinding,this._options.yScale),this._plotArea=new b(n,this._canvasBinding,this._xScale,this._yScale,{grid:this._options.grid,plot:this._options.plot,loading:this._options.loading,overlayLines:this._options.overlayLines}),this.height=new t(0),this.width=new t(0),this._initSizeHandling(),this._onPlotsChanged(),!0!==o.noAutoResize&&this.bindOnResize()}function m(t,i){this.id=Object(p.guid)(),this._options=Object(h.clone)(i),this._x=null,this._y=null,t&&this.setData(t,!0),this.dataChanged=new o}function y(i,e,o,n){this.originX=new t(i||0),this.originY=new t(e||0),this.width=new t(o||0),this.height=new t(n||0)}function b(t,i,e,o,n){y.call(this),this.getWidgetPlots=t,this._canvasBinding=i,this._ctx=Object(_.getPretransformedContext2D)(this._canvasBinding),this._xScale=e,this._yScale=o,this._options=n,this._elLoadingIndicator=null;var s=this._xScale._options.visible&&"top"===this._xScale._options.position&&!this._xScale._options.drawOverPlotArea?this._xScale.height.value():0;this.originY.setValue(s),this.originY.setValue=function(){f.logWarn("updating originY forbidden")}}function w(t,i,e){y.call(this),this._canvasBinding=i,this._ctx=Object(_.getPretransformedContext2D)(this._canvasBinding),this._options=e,this._min=null,this._max=null,this._tickMarks=[],this.getWidgetPlots=t}function x(t,i,e){w.apply(this,arguments),this._series=[];var o="number"==typeof this._options.height&&this._options.height||this._options.paddingBottom+this._options.font.size+this._options.paddingTop;this.height.setValue(o),this.height.setValue=function(){f.logWarn("updating height forbidden")},this.width.subscribe(this._updateSize.bind(this))}function S(t,i,e){w.apply(this,arguments),this._min=null,this._max=null,this.height.subscribe(this._updateSize.bind(this))}v.prototype.setYScaleFormatter=function(t){this._yScale.setFormatter(t)},v.prototype.defaults=function(){return{showMessage:!0,minWidth:100,minHeight:75,bgColor:null,grid:{xIsVisible:!0,yIsVisible:!0,line:{width:1,style:s.LINESTYLE_DASHED,color:"#e9e9ea"}},xScale:{visible:!0,position:"bottom",isTimeScale:!0,height:null,paddingTop:4,paddingBottom:4,font:{size:10,family:c.CHART_FONT_FAMILY,color:"#83888d"},drawOverPlotArea:!0,ingnoreFloats:!1,bgColor:"transparent",borderColor:"transparent",drawTickMarkLine:!1,
maxTickMarkAmount:10,paddingHorz:10,fade:!1},yScale:{visible:!0,position:"right",isPercentage:!1,paddingLeft:4,paddingRight:4,marginInPercents:10,font:{size:10,family:c.CHART_FONT_FAMILY,color:"#83888d"},drawOverPlotArea:!0,ingnoreFloats:!1,bgColor:"transparent",borderColor:"transparent",drawTickMarkLine:!1,fade:!1},plot:{line:{width:2,color:g.colorsPalette["color-success"],colorGrowing:null,colorFalling:null},belowLineFillStyle:"rgba(60, 188, 152, 0.05)",belowLineFillStyleGrowing:null,belowLineFillStyleFalling:null,aboveLineFillStyle:null,aboveLineFillStyleGrowing:null,aboveLineFillStyleFalling:null,last:{visible:!1,style:s.LINESTYLE_DASHED,color:null,colorGrowing:null,colorFalling:null}},loading:{width:4,color:g.colorsPalette["color-brand"]}}},v.prototype._initCanvas=function(){this._canvasBinding=Object(_.createBoundCanvas)(this._elContainer,{width:this._options.minWidth,height:this._options.minHeight}),this._canvasBinding.canvas.style.display="block",this._ctx=Object(_.getPretransformedContext2D)(this._canvasBinding),this._ctx._fillText=(t,i,e)=>{i=Math.round(i),e=Math.round(e),this._ctx.fillText(t,i,e)}},v.prototype._initSizeHandling=function(){var t=this,i=this._xScale,e=this._yScale,o=this._plotArea;function n(t){return!t._options.drawOverPlotArea&&t._options.visible}function s(){var e=n(i)?t.height.value()-i.height.value():t.height.value();o.height.setValue(e)}function r(){var i=n(e)?t.width.value()-e.width.value():t.width.value();const s=[];for(const e of t._plots)s.push(e._options.line.width);const r=.5*Math.max(s);o.width.setValue(i-r)}function a(){var t=0;"right"===e._options.position&&(t=n(e)?o.width.value():o.width.value()-e.width.value()),e.originX.setValue(t)}t.height.subscribe(s),i.height.subscribe(s),o.height.subscribe((function(t){var s;e.height.setValue(t),s=0,"bottom"===i._options.position&&(s=n(i)?o.height.value():o.height.value()-i.height.value()),i.originY.setValue(s)})),t.width.subscribe(r),e.width.subscribe(r),e.width.subscribe((function(){var t=0;"left"===e._options.position&&n(e)&&(t=e.width.value()),o.originX.setValue(t)})),e.width.subscribe(a),e.width.subscribe((function(){var t=0;"left"===e._options.position&&n(e)&&(t=e.width.value()),i.originX.setValue(t)})),o.width.subscribe((function(t){i.width.setValue(t),a()}))},v.prototype.resetSize=function(){const t=this._elContainer.clientHeight||this._options.minHeight,i=this._elContainer.clientWidth||this._options.minWidth,e="left"===this._yScale._options.position?this._yScale.width.value():0,o="top"===this._xScale._options.position?this._xScale.height.value():0;this._xScale.originX.setValue(e),this._yScale.originY.setValue(o),this._canvasBinding.resizeCanvas({width:i,height:t}),this._ctx=Object(_.getPretransformedContext2D)(this._canvasBinding),this.height.setValue(t),this.width.setValue(i)},v.prototype.onResize=function(){this._isResizeScheduled=!1,this.resetSize(),this.draw()},v.prototype.bindOnResize=function(){this._onResizeThrottled||(this._onResizeThrottled=()=>{this._isResizeScheduled||(this._isResizeScheduled=!0,
window.requestAnimationFrame(this.onResize.bind(this)))},window.addEventListener("resize",this._onResizeThrottled))},v.prototype.unbindOnResize=function(){this._onResizeThrottled&&(window.removeEventListener("resize",this._onResizeThrottled),delete this._onResizeThrottled)},v.prototype.destroy=function(){this.unbindOnResize()},v.prototype.addPlot=function(t){var i=t;if(!(i instanceof m)){if(!i.data)return void f.logError("wrong plot format");let t=Object(h.clone)(this._options.plot);t=Object(r.deepExtend)(t,i.options||{}),i=new m(i.data,t)}if(!!!this._plots.filter(t=>t.id===i.id).length)return this._plots.push(i),i.dataChanged.subscribe(this,this._onPlotsChanged),this._onPlotsChanged(),i},v.prototype._onPlotsChanged=function(){this.resetSize(),this._yScale.onPlotsChanged(),this._xScale.onPlotsChanged(),this.draw()},v.prototype.removePlot=function(t){this._plots=this._plots.filter(i=>i.id!==t.id),this._yScale.onPlotsChanged.call(this._yScale),this._xScale.onPlotsChanged.call(this._xScale),this.draw()},v.prototype.removeAllPlots=function(){this._plots=[],this._yScale.onPlotsChanged.call(this._yScale),this._xScale.onPlotsChanged.call(this._xScale),this.draw()},v.prototype.draw=function(){this._messageShown?this.showMessage(this._messageShown):(this._plotArea.draw(),this._yScale.draw(),this._xScale.draw())},v.prototype.showMessage=function(t){this._options.showMessage&&(this._showMessage(t),this._messageShown=t)},v.prototype.hideMessage=function(t){delete this._messageShown,this.draw()},v.prototype._showMessage=function(t){this._plotArea._hideLoading(),this._options.bgColor&&"transparent"!==this._options.bgColor?(this._ctx.fillStyle=this._options.bgColor,this._ctx.fillRect(0,0,this.width.value(),this.height.value())):this._ctx.clearRect(0,0,this.width.value(),this.height.value());var i=this._ctx.measureText(t).width;this._ctx.fillStyle=this._options.xScale.font.color,this._ctx.font=this._options.xScale.font.size+"px "+this._options.xScale.font.family,this._ctx._fillText(t,(this.width.value()-i)/2,(this.height.value()-this._options.xScale.font.size)/2)},v.prototype.xScale=function(){return this._xScale},v.prototype.yScale=function(){return this._yScale},v.prototype.getContainer=function(){return this._elContainer},m.prototype.setData=function(t,i){t.x&&t.y||f.logError("wrong data format"),this._x=t.x,this._y=t.y,i||this.dataChanged.fire()},m.prototype.setOptions=function(t={},i){this._options=Object(r.deepExtend)(this._options,t),i||this.dataChanged.fire()},m.prototype.x=function(){return this._x},m.prototype.y=function(t){var i,e,o,n=this._y;if(!t)return n;i=function(){for(var t=0,i=n.length;t<i;t++)if(isNumber(n[t]))return n[t]}()/100,e=[];for(var s=0;s<n.length;s++)o=n[s],e.push(isNumber(o)?o/i-100:void 0);return e},y.prototype.left=function(){return this.originX.value()},y.prototype.right=function(){return this.originX.value()+this.width.value()},y.prototype.top=function(){return this.originY.value()},y.prototype.bottom=function(){return this.originY.value()+this.height.value()},y.prototype.clearBack=function(t){
var i=this.left()-.5,e=this.top()-.5,o=this.right()+.5,n=this.bottom()+.5;this._options.bgColor&&"transparent"!==this._options.bgColor?(t.fillStyle=this._options.bgColor,t.fillRect(i,e,o,n)):t.clearRect(i,e,o,n)},Object(h.inherit)(b,y),b.prototype.draw=function(){var t=this._ctx;this.clearBack(t),this._drawGrid(t),this.getWidgetPlots().length?(this._drawPlots(t),this._drawOverlayLines(t),this._hideLoading()):this._options.loading.showWhileNoPlots&&this._showLoading()},b.prototype._drawGrid=function(t,i){var e,o,n,r,a=this.left(),h=this.right(),l=this.top(),p=this.bottom();t.lineWidth=this._options.grid.line.width,t.strokeStyle=this._options.grid.line.color,t.lineStyle=this._options.grid.line.style;var u=this._xScale.tickMarks();if(u.length&&this._options.grid.xIsVisible)for(var _=0;_<u.length;_++)e=u[_].coordinate,o=l,n=u[_].coordinate,r=p,s.drawLine(t,e,o,n,r);var d=this._yScale.tickMarks();if(d.length&&this._options.grid.yIsVisible)for(_=0;_<d.length;_++)e=a,o=d[_].coordinate,n=h,r=d[_].coordinate,s.drawLine(t,e,o,n,r)},b.prototype._drawOverlayLine=function(t,i){if("number"==typeof i.x||"number"==typeof i.y){var e,o,n,r,a=isNumber(i.width)&&i.width||1,h=i.color||"#000",l=i.style||s.LINESTYLE_SOLID;isNumber(i.x)?e=o=p(this._xScale,i.x):(e=this.left(),o=this.right()),isNumber(i.y)&&!isNumber(i.x)?n=r=p(this._yScale,i.y):(n=this.top(),r=this.bottom()),t.lineWidth=a,t.strokeStyle=h,t.lineStyle=l,s.drawLine(t,e,n,o,r)}function p(t,i){var e=Math.round(t.valueToCoord(i));return a%2==0&&(e-=.5),e}},b.prototype._drawOverlayLines=function(t){Array.isArray(this._options.overlayLines)&&this._options.overlayLines.length&&this._options.overlayLines.forEach(i=>this._drawOverlayLine(t,i))},b.prototype._drawPlots=function(t){for(var i,e,o,n,r,a,h,l,p,u=this.getWidgetPlots(),_=this._xScale.valueToCoord.bind(this._xScale),d=this._yScale.valueToCoord.bind(this._yScale),c=this.left(),g=this.right(),f=this.top(),v=this.bottom(),m=0;m<u.length;m++)if(e=(i=u[m]).x(),n=(o=i.y(this._yScale._options.isPercentage))[0],r=o[o.length-1],e=e.map((function(t,i){return _(i)})),o=o.map(d),n<r?(a=i._options.line.colorGrowing||i._options.line.color,h=i._options.last.colorGrowing||a,l=i._options.belowLineFillStyleGrowing||i._options.belowLineFillStyle,p=i._options.aboveLineFillStyleGrowing||i._options.aboveLineFillStyle):n>r?(a=i._options.line.colorFalling||i._options.line.color,h=i._options.last.colorFalling||a,l=i._options.belowLineFillStyleFalling||i._options.belowLineFillStyle,p=i._options.aboveLineFillStyleFalling||i._options.aboveLineFillStyle):(a=i._options.line.color,h=i._options.last.color||a,l=i._options.belowLineFillStyle,p=i._options.aboveLineFillStyle),1!==e.length){if(l&&"transparent"!==l&&this._drawNearAroundArea(t,e,o,v,l),p&&"transparent"!==p&&this._drawNearAroundArea(t,e,o,f,p),this._drawLine(t,e,o,i._options.line.width,a),i._options.last.visible){var y=Math.round(d(r));t.lineStyle=i._options.last.style,t.strokeStyle=h,t.lineWidth=i._options.line.width,s.drawLine(t,c,y,g,y)}
}else this._drawCircle(t,e[0],o[0],i._options.line.width,i._options.line.color)},b.prototype._drawNearAroundArea=function(t,i,e,o,n){var s=function(){for(var t=0,o=i.length;t<o;t++)if(isNumber(i[t])&&isNumber(e[t]))return t;return null}(),r=function(){for(var t=i.length-1;t>=0;t--)if(isNumber(i[t])&&isNumber(e[t]))return t;return null}();if(null!==s||null!==r){t.fillStyle=n,t.beginPath(),t.moveTo(i[s],o);for(var a=s;a<=r;a++)isNumber(i[a])&&isNumber(e[a])&&t.lineTo(i[a],e[a]);t.lineTo(i[r],o),t.closePath(),t.fill()}},b.prototype._drawLine=function(t,i,e,o,n){var s=function(){for(var t=0,o=i.length;t<o;t++)if(isNumber(i[t])&&isNumber(e[t]))return t;return null}(),r=function(){for(var t=i.length-1;t>=0;t--)if(isNumber(i[t])&&isNumber(e[t]))return t;return null}();if(null!==s||null!==r){t.lineWidth=o,t.strokeStyle=n,t.lineJoin="round",t.moveTo(i[s],e[s]),t.beginPath();for(var a=s;a<=r;a++)isNumber(i[a])&&isNumber(e[a])&&t.lineTo(i[a],e[a]);t.stroke()}},b.prototype._drawCircle=function(t,i,e,o,n){isNumber(i)&&isNumber(e)&&(t.beginPath(),t.arc(i,e,o,0,2*Math.PI,!1),t.fillStyle=n,t.fill())},b.prototype._showLoading=function(){this._isLoading||(this._canvasBinding.canvas.classList.add("i-invisible"),this._options.loading.noSpinner||(this._spinner||(this._spinner=new a.Spinner("mini").setStyle({color:this._options.loading.color||this._options.grid.line.color,width:this._options.loading.width,zIndex:1})),this._spinner.spin(this._canvasBinding.canvas.parentNode)),this._isLoading=!0)},b.prototype._hideLoading=function(){this._isLoading&&(this._spinner&&this._spinner.stop(),this._canvasBinding.canvas.classList.remove("i-invisible"),this._isLoading=!1)},Object(h.inherit)(w,y),w.prototype.setFormatter=function(t){this._formatter=t},w.prototype._calculateTickMarks=function(t,i,e){var o=this,n=o._min,s=o._max;if(!t||null===n||null===s||"function"!=typeof i)return[];e=e||"vertical";var r=o._options.maxTickMarkAmount||10,a=t/(r||20),h=!o._options.drawOverPlotArea;function l(t){return!o._options.isPercentage&&o._formatter?o._formatter.format(t):Math.round(1e6*t)/1e6+(o._options.isPercentage?"%":"")}function p(t){var n=l(t),s=o.valueToCoord(t);return"vertical"!==e||h?"vertical"===e&&h?s+.5*i(n):"horizontal"!==e||h?"horizontal"===e&&h?s-.5*i(n):void 0:s:s}function u(t){var n=l(t),s=o.valueToCoord(t);return"vertical"!==e||h?"vertical"===e&&h?s-.5*i(n):"horizontal"!==e||h?"horizontal"===e&&h?s+.5*i(n):void 0:s+i(n):s-i(n)}function _(t,i){return"vertical"===e?u(t)-a>p(i):o.originX.value()+o._options.paddingHorz<=p(i)&&p(i)<=o.originX.value()+o.width.value()-o._options.paddingHorz&&u(t)+a<p(i)}function d(t,i){var e=Math.pow(10,i||0).toFixed(i<0?-i:0);return Math.round(t*e)/e}var c=[];if(n===s)c=[n];else for(;r>0;){var g=(s-n)/r,f=Math.pow(10,Math.ceil(Math.log(g)/Math.LN10));f/5>=g&&(f/=5),f/2>=g&&(f/=2);var v,m=Math.floor(n/f)*f;for(m<n&&(m=Math.ceil(n/f)*f),c=[m];(v=d(c[c.length-1]+f,12))<=s;)c.push(v);for(var y,b=!1,w=m,x=1;x<c.length;x++){if(!_(w,y=c[x])){b=!0;break}w=y}if(!b)break;r--}
return!0===o._options.ingnoreFloats&&(c=c.filter((function(t){return d(t,12)%1==0}))),c.map((function(t){return{text:l(t),coordinate:Math.round(o.valueToCoord(t))}}))},w.prototype.tickMarks=function(){return this._tickMarks},w.prototype.draw=function(){if(this._options.visible){var t,i=this._tickMarks,e=this._ctx;if(this._options.drawOverPlotArea&&this._options.fade&&this._drawFade(e),this._options.drawOverPlotArea||this.clearBack(e),!this._options.drawOverPlotArea&&this._options.borderColor&&"transparent"!==this._options.borderColor){switch(e.strokeStyle=this._options.borderColor,e.lineWidth=1,e.beginPath(),this._options.position){case"left":e.moveTo(this.right(),this.top()),e.lineTo(this.right(),this.bottom());break;case"right":e.moveTo(this.left(),this.top()),e.lineTo(this.left(),this.bottom());break;case"top":e.moveTo(this.left(),this.bottom()),e.lineTo(this.right(),this.bottom());break;case"bottom":e.moveTo(this.left(),this.top()),e.lineTo(this.right(),this.top())}e.stroke()}e.fillStyle=this._options.font.color,e.font=this._options.font.size+"px "+this._options.font.family;for(var o=0;o<i.length;o++)t=i[o],this._drawLabel(e,t.coordinate,Object(d.startWithLTR)(t.text))}},w.prototype._drawFade=function(t){var i=t.globalCompositeOperation,e=this._getFadeRectCoords(),o=this._getFadeGradient(t);o.addColorStop(0,"transparent"),o.addColorStop(1,"white"),t.globalCompositeOperation="destination-out",t.fillStyle=o,t.fillRect(Math.min(e.startX,e.endX),Math.min(e.startY,e.endY),Math.abs(e.endX-e.startX),Math.abs(e.endY-e.startY)),t.globalCompositeOperation=i},Object(h.inherit)(x,w),x.prototype.valueToCoord=function(t){return this._minIndex===this._maxIndex?(this.right()-this.left())/2:this.left()+this._pixelsPerValue*(t-this._minIndex)},x.prototype.onPlotsChanged=function(){this._updateSeries(),this._updateMinMax(),this._updateSize()},x.prototype._updateSize=function(){this._updatePixelsPerValue(),this._updateTickMarks()},x.prototype._updateSeries=function(){this._series=this.getWidgetPlots().length?this.getWidgetPlots()[0].x():[]},x.prototype._updateMinMax=function(){this._min=this._series.length?this._series[0]:null,this._max=this._series.length?this._series[this._series.length-1]:null,this._minIndex=0,this._maxIndex=this._series.length},x.prototype._updatePixelsPerValue=function(){this._pixelsPerValue=this._maxIndex-this._minIndex>1?this.width.value()/(this._maxIndex-this._minIndex-1):this.width.value()},x.prototype._updateTickMarks=function(){var t=this.width.value(),i=function(t){return this._ctx.measureText(t).width}.bind(this);this._options.isTimeScale?this._tickMarks=this._calculateTimeTickMarks(t,i):this._tickMarks=this._calculateTickMarks(t,i,"horizontal")},x.prototype._calculateTimeTickMarks=function(t,i){if(!t||null===this._min||null===this._max)return[];var e=this._max-this._min,o=e/86400,n=[],s=[],r=this._ctx;if(r.font=this._options.fontSize+"px "+this._options.fontFamily,r.fillStyle=this._options.fontColor,r.textBaseline="bottom",
o<2)n=this._timeSplit(t,i,this._trimToHour,this._formatHour);else if(o<3)n=this._timeSplit(t,i,this._trimToHour,this._formatDayHour);else if(o<6)n=this._timeSplit(t,i,this._trimToDay,this._formatDay);else{if(e/604800<6)n=this._timeSplit(t,i,this._trimToWeek,this._formatDay);else if(e/2592e3<15){var a=new Date(1e3*this._max).getFullYear()===(new Date).getFullYear()?this._formatMonthOnly:this._formatMonthYear;n=this._timeSplit(t,i,this._trimToMonth,a)}else{var h=e/31104e3;n=h<6?this._timeSplit(t,i,this._trimToYear,this._formatYear):h<30?this._timeSplit(t,i,this._trimTo5Years,this._formatYear):h<50?this._timeSplit(t,i,this._trimTo10Years,this._formatYear):this._timeSplit(t,i,this._trimTo25Years,this._formatYear)}}for(var l=0,p=n.length;l<p;l++){var u=this.valueToCoord(n[l].index);s.push({text:""+n[l].text,coordinate:u})}return s},x.prototype._timeSplit=function(t,i,e,o){var n=this._options.paddingHorz,s=this.originX.value(),r=[],a=null,h=t/20,l=this._options.visible,p=!this._options.drawOverPlotArea;function u(e,o){var r=0,a=e,h=e;return l&&(r=i(o),p?(a=e-r/2,h=e+r/2):(a=e,h=e+r)),s+n<a&&h<s+t-n}for(var _=0,d=this._series.length;_<d;_++){var c=new Date(1e3*this._series[_]),g=e.call(this,c),f=o.call(this,g);if(null!==a){var v=this.valueToCoord(_),m=u(v,f);if(r.length&&m)m=this.valueToCoord(r[r.length-1].index)+i(r[r.length-1].text)+h<=v;m&&a.valueOf()!==g.valueOf()&&(r.push({dt:c,index:_,text:f}),a=g)}else a=g}for(var y=r,b=1;y.length>this._options.maxTickMarkAmount;){b++,y=[];for(_=0;_<r.length;_++)_%b==0&&y.push(r[_])}1===y.length&&(y=[r[Math.floor(r.length/2)]]);return y},x.prototype._trimToHour=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},x.prototype._trimToDay=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},x.prototype._trimToMonth=function(t){return new Date(t.getFullYear(),t.getMonth(),1)},x.prototype._trimToYear=function(t){return new Date(t.getFullYear(),1,1)},x.prototype._trimToWeek=function(t){var i=this._trimToDay(t);return new Date(i.valueOf()-1e3*i.getDay()*3600*24)},x.prototype._trimTo5Years=function(t){var i=t.getFullYear();return i-=i%5,new Date(i,1,1)},x.prototype._trimTo10Years=function(t){var i=t.getFullYear();return i-=i%10,new Date(i,1,1)},x.prototype._trimTo25Years=function(t){var i=t.getFullYear();return i-=i%25,new Date(i,1,1)},x.prototype._formatHour=function(t){var i=t.getHours().toString();return 1===i.length&&(i="0"+i),i+":00"},x.prototype._formatDayHour=function(t){return this._formatDay(t)+" "+this._formatHour(t)},x.prototype._formatDay=function(t){return n().month(t.getMonth()).format("MMM")+","+t.getDate()},x.prototype._formatMonthOnly=function(t){return n().month(t.getMonth()).format("MMM")},x.prototype._formatMonthYear=function(t){return n().month(t.getMonth()).format("MMM")+", "+t.getFullYear()},x.prototype._formatYear=function(t){return t.getFullYear()},x.prototype._drawLabel=function(t,i,e){var o=t.measureText(e).width,n=!this._options.drawOverPlotArea?i-o/2:i;n=Math.min(this.right(),n),n=Math.max(this.left(),n),
Object(d.isRtl)()&&(n+=o);var s="bottom"===this._options.position?this.bottom()-this._options.paddingBottom:this.top()+this._options.paddingTop+this._options.font.size;if(t.textBaseline="bottom",t._fillText(e,Math.round(n),Math.round(s)),this._options.drawTickMarkLine&&this._options.borderColor&&"transparent"!==this._options.borderColor){t.strokeStyle=this._options.borderColor,t.beginPath(),"bottom"===this._options.position?(t.moveTo(i,this.top()),t.lineTo(i,this.top()+2)):(t.moveTo(i,this.bottom()),t.lineTo(i,this.bottom()-2)),t.stroke()}},x.prototype._getFadeGradient=function(t){var i=this._getFadeRectCoords();return t.createLinearGradient(i.startX,i.startY,i.startX,i.endY)},x.prototype._getFadeRectCoords=function(){switch(this._options.position){case"top":return{startX:this.originX.value()+this.width.value(),startY:this.originY.value()+1.5*this.height.value(),endX:this.originX.value(),endY:this.originY.value()};case"bottom":return{startX:this.originX.value(),startY:this.originY.value()-.5*this.height.value(),endX:this.originX.value()+this.width.value(),endY:this.originY.value()+this.height.value()};default:f.logError("Unknown X scale position")}},Object(h.inherit)(S,w),S.prototype.onPlotsChanged=function(){this._updateMinMax(),this._updateSize()},S.prototype._updateMinMax=function(){var t,i,e,o,n,s=this.getWidgetPlots(),r=null,a=null;if("number"==typeof this._options.forceMin&&isFinite(this._options.forceMin)&&(r=this._options.forceMin,t=!0),"number"==typeof this._options.forceMax&&isFinite(this._options.forceMax)&&(a=this._options.forceMax,i=!0),!t||!i)for(var h=0;h<s.length;h++)n=s[h].y(this._options.isPercentage).filter(isNumber),t||(e=Object(u.min)(n),(null===r||e<r)&&(r=e)),i||(o=Object(u.max)(n),(null===a||a<o)&&(a=o));this._min=r,this._max=a},S.prototype._updatePixelsPerValue=function(){this._pixelsPerValue=(this.height.value()-2*this._margin())/(this._max-this._min)},S.prototype._updateTickMarks=function(){var t=this.height.value(),i=function(){return this._options.font.size}.bind(this);this._tickMarks=this._calculateTickMarks(t,i,"vertical")},S.prototype._updateSize=function(){this._updatePixelsPerValue(),this._updateTickMarks();var t="number"==typeof this._options.width&&this._options.width||this._options.paddingLeft+this._maxLabelWidth()+this._options.paddingRight;this.width.setValue(t)},S.prototype._maxLabelWidth=function(){for(var t=0,i=0;i<this._tickMarks.length;i++)t=Math.max(t,this._ctx.measureText(this._tickMarks[i].text).width);return t},S.prototype._margin=function(){return this.height.value()*this._options.marginInPercents/100},S.prototype.valueToCoord=function(t){return this._min===this._max?(this.bottom()-this.top())/2:this.height.value()-this._margin()-this._pixelsPerValue*(t-this._min)},S.prototype._drawLabel=function(t,i,e){var o=!this._options.drawOverPlotArea?i+this._options.font.size/2:i;o=Math.max(this.top()+this._options.font.size,o),o=Math.min(this.bottom(),o)
;var n="number"==typeof this._options.width&&this._options.width||this._options.paddingLeft+this._maxLabelWidth()+this._options.paddingRight,s="left"===this._options.position?this.left()+n-t.measureText(e).width-this._options.paddingRight:this.right()-n+this._options.paddingLeft;if(Object(d.isRtl)()&&(s+=t.measureText(e).width),t.textBaseline="bottom",t._fillText(e,s,o),this._options.drawTickMarkLine){this._options.borderColor&&"transparent"!==this._options.borderColor&&(t.strokeStyle=this._options.borderColor),t.beginPath(),"left"===this._options.position?(t.moveTo(this.right(),i),t.lineTo(this.right()-2,i)):(t.moveTo(this.left(),i),t.lineTo(this.left()+2,i)),t.stroke()}},S.prototype._getFadeGradient=function(t){var i=this._getFadeRectCoords();return t.createLinearGradient(i.startX,i.startY,i.endX,i.startY)},S.prototype._getFadeRectCoords=function(){switch(this._options.position){case"left":return{startX:this.originX.value()+1.2*this.width.value(),startY:this.originY.value()+this.height.value(),endX:this.originX.value(),endY:this.originY.value()};case"right":return{startX:this.originX.value()-.2*this.width.value(),startY:this.originY.value(),endX:this.originX.value()+this.width.value(),endY:this.originY.value()+this.height.value()};default:f.logError("Unknown Y scale position")}}}.call(this,e("hY0g"),e("aIyQ"),e("ldgD"))}}]);