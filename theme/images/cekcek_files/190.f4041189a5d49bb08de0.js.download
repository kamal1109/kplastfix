(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{"6waE":function(e,n,t){"use strict";t.r(n),t.d(n,"showBanner",(function(){return o})),t.d(n,"fill",(function(){return r}));t("bSeV");var a=t("eI3D");async function o(e,n){(await Promise.all([t.e("vendors"),t.e(2),t.e(88),t.e(227),t.e(17),t.e(30),t.e(84),t.e("six-months-banner")]).then(t.bind(null,"iMeb"))).renderBanner(e,n)}function r(){var e,n;const t=document.querySelector(".js-six-months-area"),r=null===(n=null===(e=window.user.available_offers)||void 0===e?void 0:e[a.OFFERS.six_months])||void 0===n?void 0:n.expire_on;t&&r&&o(t,{expiration:r}).then(()=>{t.classList.remove("js-hidden")})}},"8CjT":function(e,n,t){"use strict";async function a(e){(await Promise.all([t.e("vendors"),t.e(1),t.e(2),t.e(16),t.e(25),t.e(88),t.e(593),t.e(17),t.e(30),t.e(84),t.e("early-bird-dialog")]).then(t.bind(null,"igN3"))).renderEarlyBirdDialog(e)}t.r(n),t.d(n,"showEarlyBirdDialog",(function(){return a}))},JHm1:function(e,n,t){"use strict";var a;t.r(n),t.d(n,"TrialTokenStates",(function(){return a})),function(e){e.Started="started",e.Week1="after 1 week",e.Week2="after 2 weeks",e.Week3="after 3 weeks",e.Week4="after 4 weeks",e.Finished="finished"}(a||(a={}))},LRfD:function(e,n,t){"use strict";t.r(n),t.d(n,"getLastChanceExpiration",(function(){return o})),t.d(n,"showLastChanceBanner",(function(){return r})),t.d(n,"fill",(function(){return i}));var a=t("eI3D");function o(){var e,n;return null===(n=null===(e=window.user.available_offers)||void 0===e?void 0:e[a.OFFERS.last_chance])||void 0===n?void 0:n.expire_on}async function r(e,n){(await Promise.all([t.e("vendors"),t.e(2),t.e(88),t.e(227),t.e(17),t.e(30),t.e(84),t.e("last-chance-banner")]).then(t.bind(null,"kEC6"))).renderLastChanceBanner(e,n)}function i(){const e=document.querySelector(".js-last-chance-area"),n=o();e&&n&&r(e,{expiration:n}).then(()=>{e.classList.remove("js-hidden")})}},Uohu:function(e,n,t){"use strict";t.r(n),t.d(n,"getEarlyAccessDiscount",(function(){return c})),t.d(n,"visitEarlyAccessPaymentPage",(function(){return u})),t.d(n,"showEarlyBirdBanner",(function(){return d})),t.d(n,"fill",(function(){return f}));t("bSeV");var a=t("T7XC"),o=t("KuNA"),r=t("Qrgc"),i=t("FfBj"),s=t("fsuG"),l=t("eI3D");function c(){return window.user&&window.user.available_offers&&window.user.available_offers.early_access?Object(r.a)(window.user.available_offers.early_access):null}function u(e,n,t={}){e=e||o.ProPlans.ProRealtime,(n=n||c())&&(e="{0}_{1}{2}".format(e,n,i.EA_SUFFIX)),Object(s.visitPaymentPage)(a.BillingCycle.OneYear,{fixedCycle:!1,paymentMethod:t.paymentMethod,productName:e})}async function d(e,n){(await Promise.all([t.e("vendors"),t.e(2),t.e(88),t.e(227),t.e(17),t.e(30),t.e(84),t.e("early-bird-banner")]).then(t.bind(null,"wP7s"))).renderEarlyBirdBanner(e,n)}function f(e){var n;const t=document.querySelector(".js-early-access-area"),a=c(),o=window.user.available_offers?null===(n=window.user.available_offers[l.OFFERS.early_access])||void 0===n?void 0:n.expire_on:void 0;t&&a&&o&&d(t,{discount:a,onButtonClick:e,expiration:o
}).then(()=>{t.classList.remove("js-hidden")})}},bYLp:function(e,n,t){"use strict";async function a(e){(await Promise.all([t.e("vendors"),t.e(1),t.e(2),t.e(16),t.e(25),t.e(88),t.e(602),t.e(17),t.e(30),t.e(84),t.e("six-months-dialog")]).then(t.bind(null,"MjWQ"))).renderSixMonthsDialog(e)}t.r(n),t.d(n,"showSixMonthsDialog",(function(){return a}))},cKoy:function(e,n,t){"use strict";async function a(e={}){return(await Promise.all([t.e("vendors"),t.e(18),t.e("dialogs-core"),t.e(24),t.e(32),t.e(33),t.e(49),t.e(560),t.e(38),t.e(48),t.e(253),t.e("trial-message-success-dialog")]).then(t.bind(null,"PnfC"))).trialMessageSuccessDialog(e)}t.r(n),t.d(n,"trialMessageSuccessDialog",(function(){return a}))},fyFw:function(e,n,t){"use strict";t.r(n),t.d(n,"startFreeTrialDialog",(function(){return r}));var a=t("+GxX"),o=t("MGL6");function r(e){return Object(a.isFeatureEnabled)("braintree-trial-in-order-dialog")?Object(o.a)({productId:e.startTrial,billingCycle:e.billingCycle,isTrial:!0}):Object(a.isFeatureEnabled)("braintree-trial-implementation")?Promise.all([t.e("vendors"),t.e(0),t.e(2),t.e(3),t.e(5),t.e(6),t.e(9),t.e(12),t.e(13),t.e(15),t.e(19),t.e(32),t.e(35),t.e(37),t.e(40),t.e(60),t.e(81),t.e(101),t.e(135),t.e(152),t.e(171),t.e(229),t.e(595),t.e(4),t.e(8),t.e(17),t.e(21),t.e(30),t.e(36),t.e(38),t.e(45),t.e(46),t.e(53),t.e(75),t.e(77),t.e(125),t.e(114),t.e(146),t.e(131),t.e(207),t.e(298),t.e("start-free-trial-bt-impl")]).then(t.bind(null,"NKy4")).then(n=>{(0,n.showStartFreeTrialDialog)(e)}):Promise.all([t.e("vendors"),t.e(0),t.e(2),t.e(3),t.e(5),t.e(6),t.e(9),t.e(12),t.e(19),t.e(33),t.e(35),t.e(37),t.e(40),t.e(49),t.e(69),t.e(81),t.e(102),t.e(118),t.e(135),t.e(171),t.e(219),t.e(229),t.e(394),t.e(596),t.e(4),t.e(8),t.e(21),t.e(36),t.e(38),t.e(48),t.e(112),t.e(125),t.e(162),t.e(203),t.e(207),t.e(343),t.e("start-free-trial-impl")]).then(t.bind(null,"f2yZ")).then(n=>{(0,n.showStartFreeTrialDialog)(e)})}},gzSH:function(e,n,t){"use strict";var a=t("YFKU"),o=t("VVxS").TVLocalStorage,r=t("cKoy").trialMessageSuccessDialog,i=t("fyFw").startFreeTrialDialog,s=t("moLg").getEarlyBirdDialogDay,l=t("8CjT").showEarlyBirdDialog,c=t("bYLp").showSixMonthsDialog,u=t("qtrt").blackFridayDialog,d=t("24R9").getUrlParams,f=t("fsuG").visitPaymentPage,p=t("JWMC").trackEvent,_=t("FfBj"),h=t("Uohu").fill,w=t("LRfD").fill,g=t("sdz4").fill,v=t("6waE").fill,y=t("Uohu").visitEarlyAccessPaymentPage,b=t("Uohu").getEarlyAccessDiscount,m=t("Vdly"),D=t("eI3D").OFFERS,P=t("JHm1").TrialTokenStates,x=(t("NNtz"),t("wVAQ").fetch),S=t("KuNA").ProPlans,k=t("T7XC").BillingCycle,F=t("0UyP").getTracker,C=t("qFKp").onGoPro,T=t("qFKp").onOrder,E=t("oOPW").createGoProDialog,O=t("rVXP").PredefinedAction;function B(){this._inited=!1}var V=new B;B.prototype.init=function(){if(!this._inited)return this._inited=!0,W(),!0}
;var j=a.t("Now you have even more tools and features to make your trading successful."),M=a.t("Your trial was successfully downgraded. You can always upgrade again to a more powerful plan before it runs out."),R=a.t("The amount charged at the end of the trial (if you donâ€™t cancel) also reflects the new plan."),A="<p>"+j+"</p><p><span>"+R+"</span></p>",L="<p>"+M+"</p><p><span>"+R+"</span></p>",W=function(){function e(e){p("ProRT trial",e)}function n(e,n){return function(e){var n=$.Deferred();e=e||{};var o=new FormData;return o.append("product_id",e.product_id),x("/trial/change/",{method:"POST",credentials:"include",headers:new Headers({acccept:"application/json","X-Requested-With":"XMLHttpRequest"}),body:o}).then((function(e){return e.json()})).then((function(o){!function(e,n){if(!e.code)return!1;var o,r=_.humanizeProPlan(n.product_id),i="",s=a.t("{0} Trial").format(r),l=a.t("Sorry, {0} trial could not be set.").format(r),c=a.t("Close",{context:"input"});switch(e.code){case"user_has_product":i=B(a.t("You already have {0} trial.").format(r),l);break;case"trial_failed":i=B(a.t("You are already PRO. {0} trial cannot be activated on PRO accounts.").format(r),l);break;case"unable_find_order":case"unable_change_trial":case"unable_update_subscription":i=B(a.t("We were unable to change your subscription plan to {0}. Please try again.").format(r),a.t("Something went wrong."));break;case"user_not_on_trial":i=B(a.t("Wrong product for trial"),l);break;case"trial_not_available":s=a.t("Trial is not available",{context:"prohibited_trial"}),i=B(a.t("A trial could not be applied to this account. You can purchase a plan to take advantage of extra features.")),c=a.t("Pay now",{context:"prohibited_trial"}),o=function(){f(k.OneYear,{paymentMethod:"paypal",productName:n.product_id})}}return Promise.all([t.e("vendors"),t.e(18),t.e("dialogs-core"),t.e(24),t.e(32),t.e(33),t.e(49),t.e(38),t.e(48),t.e("warning-dialog")]).then(t.bind(null,"eD2p")).then(({warningDialog:e})=>{const n=e({title:s,content:i,closeButtonText:c}).open();o&&n.on("action:no",o)}),!0}(o,e)?n.resolve():n.reject()})),n.promise()}({product_id:e}).done((function(){r({title:a.t("Congrats! Your new trial is setup"),content:n||A}).then((function(e){e.on("afterClose",(function(){TradingView.onChartPage||location.reload()}))}))}))}function B(e,n){return n&&(n="<p>"+n+"</p>"),"<div>"+(n||"")+(e?"<p>"+e+"</p>":"")+"</div>"}function j(e){e=e||{},is_authenticated&&function(e){var n={startTrial:(e=e||{}).product_id,billingCycle:e.billing_cycle};window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("afterClose",(function(){i(n)})):i(n)}(e)}function M(n){var t=function(){var t=(n=n||{}).discount=n.discount||b();if(user.is_trial&&t&&!T()&&!C()){var a=user.available_offers[D.early_access],o=n.trialDaysPassed||void 0!==a&&a.trial_days_passed,r=function(e,n){return"early_bird_dialog_"+s(e,n)}(n.state,o),i={state:n.state,trialDaysPassed:o,discount:t,actionHref:"/gopro/?source=early_bird_dialog&feature=show_options",onActionClick:function(){U(r,"accept",window.user.id),
runOrSignIn((function(){R("popup with discount: {0}%".format(t))}),{source:"Early access trial dialog"})},onClose:function(){U(r,"decline",window.user.id),n.onDecline?n.onDecline():function(n){e("Offer declined with discount: {0}%".format(n)),W()}(t)},root:document.createElement("div")};l(i),U(r,"open",window.user.id),e(n.ga_shown_msg||"Early access dialog shown with {0}% discount".format(t))}};"undefined"!=typeof pro?pro.runOrUpdate(t):t()}function R(n){W(),e("GoPro after trial: {0}".format(n))}function W(){$.get("/accounts/update-trial-marker/"),window.user&&user.available_offers&&user.available_offers[D.early_access]&&delete user.available_offers[D.early_access].offer_state}function U(e,n,t){F().then((function(a){null!==a&&a.trackPermissionDialog(e,n,(t||"").toString())}))}function G(){var e;is_authenticated&&user.is_trial&&TradingView.setTrialAvailiable(!1),function(){if(window.is_authenticated&&window.user&&window.user.available_offers&&window.user.available_offers[D.early_access]){var e=b();h((function(){R("from billing page with discount: {0}%".format(e))}));var n=window.user.available_offers[D.early_access];if(n.actual_state){switch(n.offer_state){case P.Week1:case P.Week2:case P.Week3:case P.Week4:case P.Finished:M({state:n.offer_state})}delete n.offer_state}}}(),function(){var e=user.available_offers&&user.available_offers[D.six_months];if(is_authenticated&&e&&(v(),!T()&&!C())){if(!m.getValue("six_months.last_day_shown_popup")){var n=new Date(1e3*(e.expire_on-86400));if(new Date>n)return c({actionHref:"/gopro/?source=six_months_last_day_popup&feature=show_options",onActionClick:function(){U("six_months_dialog_last_day","accept",window.user.id)},onClose:function(){U("six_months_dialog_last_day","decline",window.user.id)},root:document.createElement("div")}),m.setValue("six_months.last_day_shown_popup",1,{forceFlush:!0}),void U("six_months_dialog_last_day","open",window.user.id)}if(!m.getValue("six_months.week_shown_popup")){n=new Date(1e3*(e.expire_on-1987200));new Date>n&&(E({feature:"SixMonths",actions:[{text:a.t("Explore offer"),action:O.OpenGopro},{text:a.t("Decline offer"),action:O.Close,appearance:"text",intent:"danger"}],closeButton:!1,closeOnEsc:!1,goproSource:"six_months_first_week_popup"}),m.setValue("six_months.week_shown_popup",1,{forceFlush:!0}))}}}(),function(){var e=user.available_offers&&user.available_offers[D.upgrade];if(is_authenticated&&e&&e.last_payment_date){if(!d().upgrade_popup){if(m.getValue("upgrade.shown_popup"))return;var n=new Date(1e3*e.last_payment_date);const t=Math.abs(new Date-n);if(Math.ceil(t/864e5)<30)return}E({feature:"upgradeNotification",actions:[{text:a.t("Show my options"),action:O.OpenGopro},{text:a.t("Don't need"),action:O.Close,appearance:"text",intent:"danger"}],closeButton:!1,closeOnEsc:!1,goproSource:"upgrade_info_popup"}),m.setValue("upgrade.shown_popup",1,{forceFlush:!0})}}(),e=user.available_offers&&user.available_offers[D.last_chance],C()||T()||is_authenticated&&e&&(w(),m.getValue("lastChance.shown_popup")||(E({feature:"LastChance",actions:[{
text:a.t("Explore special offers"),action:O.OpenGopro},{text:a.t("Decline offer"),action:O.Close,appearance:"text",intent:"danger"}],closeButton:!1,closeOnEsc:!1,goproSource:"last_chance_info_popup"}),m.setValue("lastChance.shown_popup",1,{forceFlush:!0}))),function(){var e=user.available_offers&&user.available_offers[D.one_usd];if(!C()&&!T()&&is_authenticated&&e){g();var n=new Date(1e3*e.expire_on),t="oneUsd.shown_popup_"+n.getFullYear()+"_"+n.getMonth();m.getValue(t)||(E({feature:"oneUsd",actions:[{text:a.t("Upgrade Now"),action:O.OpenGopro},{text:a.t("Decline offer"),action:O.Close,appearance:"text",intent:"danger"}],closeButton:!1,closeOnEsc:!1,goproSource:"one_usd_info_popup"}),m.setValue(t,1,{forceFlush:!0}))}}();const n=user.available_offers[D.black_friday]||{},t=user.available_offers[D.cyber_monday]||{};(n.show_popup||t.show_popup)&&u(user.available_offers)}var N=!1;function Y(){var e=o.getItem("trial_availiable");return null!=e&&1==+e}return V.startTrial=function(e){var n={product_id:S.ProRealtime,billing_cycle:k.Monthly};Object.assign(n,e||{}),runOrSignIn(j.bind(this,n),{mode:"signup",source:"before_start_trial",verifiedPhoneRequired:!0,doNotCheckSocialActivity:!0,doNotShowConfirmation:!0})},V.earlyAccessDialog=M,V.changeTrial=n,V.upgradeTrial=function(e){return n(e,A)},V.downgradeTrial=function(e){return n(e,L)},V.isTrialAvailable=Y,V.openEarlyAccessPaymentPage=function(n){var t;y((n=n||{}).product_id,n.discount,{paymentMethod:n.paymentMethod}),t=n.reason,W(),e("Order after trial: {0}".format(t))},function(){if(N)return!1;N=!0;var e=function(){var e=$(document.documentElement);window.is_authenticated&&Y()?e.addClass("is-trial-available").removeClass("is-not-trial-available"):e.addClass("is-not-trial-available").removeClass("is-trial-available")};loginStateChange.subscribe(null,(function(n){n||e()})),e(),$(G)}}();e.exports=V},moLg:function(e,n,t){"use strict";t.r(n),t.d(n,"getEarlyBirdDialogDay",(function(){return o}));var a=t("JHm1");function o(e,n){switch(e){case a.TrialTokenStates.Week1:return"7";case a.TrialTokenStates.Week2:return"14";case a.TrialTokenStates.Week3:return"21";case a.TrialTokenStates.Week4:case a.TrialTokenStates.Finished:return 28===n?"28":"30";default:return null}}},qtrt:function(e,n,t){"use strict";t.r(n),t.d(n,"blackFridayDialog",(function(){return r}));var a=t("Vdly"),o=t("eI3D");function r(e){const n=o.OFFERS.cyber_monday in e?o.OFFERS.cyber_monday:o.OFFERS.black_friday;if(a.getBool(n+".shown_popup_2020"))return Promise.resolve();const r=e[o.OFFERS.cyber_monday];return r&&(1e3*r.date_end-Date.now())/864e5>1||["","black-friday","order","jobs","gopro","paypal"].includes(window.location.pathname.split("/")[1])?Promise.resolve():Promise.all([t.e("vendors"),t.e(2),t.e(18),t.e("dialogs-core"),t.e(24),t.e(32),t.e(33),t.e(49),t.e(88),t.e(396),t.e(473),t.e(38),t.e(48),t.e(84),t.e("blackfriday-dialog-impl")]).then(t.bind(null,"/eS7")).then(e=>{(0,e.showBlackFridayDialog)().on("afterClose",()=>{a.setValue(n+".shown_popup_2020",!0,{forceFlush:!0})})})}},rVXP:function(e,n,t){"use strict"
;var a,o;t.r(n),t.d(n,"PredefinedAction",(function(){return a})),t.d(n,"ContentAlign",(function(){return o})),function(e){e.Close="close",e.OpenGopro="openGopro"}(a||(a={})),function(e){e.Center="center",e.Left="left"}(o||(o={}))},sdz4:function(e,n,t){"use strict";t.r(n),t.d(n,"showOneUsdBanner",(function(){return o})),t.d(n,"fill",(function(){return r}));var a=t("eI3D");async function o(e,n){(await Promise.all([t.e("vendors"),t.e(2),t.e(88),t.e(227),t.e(17),t.e(30),t.e(84),t.e("one-usd-banner")]).then(t.bind(null,"4BPD"))).renderOneUsdBanner(e,n)}function r(){var e;const n=document.querySelector(".js-one-usd-area"),t=window.user.available_offers?null===(e=window.user.available_offers[a.OFFERS.one_usd])||void 0===e?void 0:e.expire_on:void 0;n&&o(n,{expiration:t}).then(()=>{n.classList.remove("js-hidden")})}}}]);