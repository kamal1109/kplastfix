(window.webpackJsonp=window.webpackJsonp||[]).push([["alert-notifier","chat-widget"],{"25b6":function(t,i,e){"use strict";e.r(i),e.d(i,"htmlEscape",(function(){return s})),e.d(i,"removeTags",(function(){return l})),e.d(i,"removeSpaces",(function(){return a})),e.d(i,"capitalizeFirstLetterInWord",(function(){return r}));const n=/[<"'&>]/g,o=t=>`&#${t.charCodeAt(0)};`;function s(t){return t.replace(n,o)}function l(t=""){return t.replace(/(<([^>]+)>)/gi,"")}function a(t=""){return t.replace(/\s+/g,"")}function r(t=""){return t.replace(/\b\w/g,t=>t.toUpperCase())}},"8JMQ":function(t,i,e){},"9Z7D":function(t,i,e){"use strict";function n(t){return t.includes(":")?t.split(":"):["",t]}e.d(i,"a",(function(){return n}))},IWoC:function(t,i,e){"use strict";const n=e("txPx").getLogger("CommonUI.CreateTVBlockPlugin");t.exports.createTvBlockPlugin=function(t){if(t)return function(i,e,n){var o,s=$(this);function l(i,e){return e?t[i](s,e):t[i](s)}return"get"===i?"function"==typeof t[o=e]?l(o,n):t[o]:t[i]?s.each((function(){return l(i,void 0)})):s}},t.exports.createTvBlockWithInstance=function(t,i){if(t&&i)return t=t.toString(),function(o,s,l){var a,r,c;return"get"===o?a=s:(r=s,"object"==typeof o&&void 0===s?(r=o,o="init"):"string"!=typeof o&&(o="init")),"getInstance"===o?$(this).eq(0).data(t):"destroy"===o?(c=$(this).eq(0).data(t))?void("function"==typeof c.destroy?(e(c,"destroy",r),$(this).eq(0).removeData(t)):n.logError("[Block Plugin] "+t+" does not support destroy command")):void console.warn("[Block Plugin] Trying to execute destroy method of "+t+" but it has not been inited"):"get"===o?(c=$(this).eq(0).data(t))?"function"==typeof c[a]?e(c,a,l):c[a]:void console.warn("[Block Plugin] Trying to get prop or execute method of "+t+" but it has not been inited"):$(this).each((function(){var s=$(this),l=s.data(t);void 0===l&&(l=void 0===r?i(s):i(s,r),s.data(t,l)),"init"!==o&&("function"==typeof l[o]?e(l,o,r):n.logError("[Block Plugin] "+t+" does not support command "+o))}))};function e(t,i,e){return void 0===e?t[i]():t[i](e)}}},Iivm:function(t,i,e){"use strict";var n=e("mrSG"),o=e("q1tI");const s=o.forwardRef((t,i)=>{const{icon:e=""}=t,s=Object(n.d)(t,["icon"]);return o.createElement("span",Object.assign({},s,{ref:i,dangerouslySetInnerHTML:{__html:e}}))});e.d(i,"a",(function(){return s}))},IwoD:function(t,i,e){},J7Nl:function(t,i,e){"use strict";e.d(i,"d",(function(){return n})),e.d(i,"e",(function(){return o})),e.d(i,"c",(function(){return s})),e.d(i,"f",(function(){return l})),e.d(i,"a",(function(){return a})),e.d(i,"b",(function(){return r}));const n=(()=>{let t;return()=>{var i;if(void 0===t){const e=document.createElement("div"),n=e.style;n.visibility="hidden",n.width="100px",n.msOverflowStyle="scrollbar",document.body.appendChild(e);const o=e.offsetWidth;e.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",e.appendChild(s);const l=s.offsetWidth;null===(i=e.parentNode)||void 0===i||i.removeChild(e),t=o-l}return t}})();function o(t,i){
return i===1/0?window.matchMedia(`(min-width: ${t}px)`):window.matchMedia(`(min-width: ${t}px) and (max-width: ${i}px)`)}function s(t){if(null===t)return;return r(t,"width")-r(t,"padding-left")-r(t,"padding-right")}function l(t,i,e){null!==t&&t.style.setProperty(i,e)}function a(t,i){return getComputedStyle(t,null).getPropertyValue(i)}function r(t,i){return parseInt(a(t,i))}},JpHp:function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 42 42" width="42px" height="42px"><path d="M38.626 17.554h-2.81c-.354-1.755-1.055-3.157-1.756-4.566l1.756-1.755c1.4-1.4 1.4-3.51 0-4.912s-3.51-1.4-4.912 0l-1.756 1.76c-1.4-.7-2.81-1.4-4.565-1.752V3.51c0-2.11-1.402-3.51-3.51-3.51s-3.52 1.41-3.52 3.51v2.81c-1.754.355-3.156 1.056-4.565 1.756L11.233 6.32c-1.4-1.4-3.51-1.4-4.912 0s-1.4 3.512 0 4.913l1.76 1.755c-.7 1.402-1.4 2.81-1.753 4.566H3.51c-2.1 0-3.51 1.41-3.51 3.51s1.4 3.512 3.51 3.512h2.81c.355 1.755 1.056 3.156 1.756 4.565L6.32 30.9c-1.4 1.402-1.4 3.51 0 4.913s3.512 1.4 4.913 0l1.755-1.756c1.402.7 2.81 1.402 4.566 1.756v2.815c0 2.11 1.4 3.51 3.51 3.51s3.51-1.4 3.51-3.51v-2.81c1.757-.354 3.158-1.055 4.567-1.756l1.76 1.754c1.4 1.4 3.51 1.4 4.915 0s1.4-3.51 0-4.912l-1.756-1.756c.7-1.4 1.4-2.81 1.755-4.565h2.81c2.107 0 3.51-1.4 3.51-3.51.006-2.11-1.403-3.52-3.505-3.52zm-17.56 14.05c-5.968 0-10.534-4.565-10.534-10.532s4.566-10.54 10.533-10.54 10.532 4.566 10.532 10.533-4.558 10.54-10.532 10.54zm0-14.05c-2.11 0-3.512 1.4-3.512 3.51s1.4 3.512 3.51 3.512 3.51-1.402 3.51-3.51-1.4-3.512-3.51-3.512z"/></svg>'},KskR:function(t,i){t.exports='<svg viewBox="0 0 6 10" width="6" height="10"><path d="M0 0l6 5-6 5"/></svg>'},LSqz:function(t,i,e){"use strict";e.d(i,"a",(function(){return r}));var n=e("q1tI"),o=e.n(n),s=e("8woN"),l=e("zNIe"),a=e("qeEu");function r(t){const{symbolName:i,onSymbolClick:e}=t;return o.a.createElement("a",{href:Object(l.a)(i),target:"_blank",className:a.link,onClick:function(t){e&&(t.preventDefault(),e(i))}},Object(s.shortName)(i))}},Nkvk:function(t,i,e){"use strict";e.r(i),e.d(i,"mediaState",(function(){return c}));var n=e("4O8T"),o=e.n(n),s=e("qocr"),l=e("BI5g"),a=e("J7Nl");class r extends o.a{constructor(){super(),this.width=0,this.height=0,this.device=null,this.breakpoints=l.breakpoints,this._checkDevice(),window.addEventListener("resize",this._checkDevice),Object.entries(l.breakpoints).sort(([t,i],[e,n])=>i-n).forEach(([t,i],e,n)=>{let o;if(0!==e){const[,t]=n[e-1];o=t+1}else o=0;const s=Object(a.e)(o,i);s.matches&&this._setNewDevice(t),s.addListener(i=>{i.matches&&(this._checkDevice(),this._setNewDevice(t))})}),Object(s.a)(this._checkDevice.bind(this)),this.isPhoneSizeDevice.bind(this)}isPhoneSizeDevice(){return"phone"===this.device||"phone-vertical"===this.device}_checkDevice(){this.width=window.innerWidth,this.height=window.innerHeight}_setNewDevice(t){const i=this.device;this.device=t,this.trigger("changeDevice",[t,i])}}const c=new r},PQvG:function(t,i,e){"use strict";var n=e("TxTq"),o=e("FBuY").TVXWindowEvents,s=e("JWMC").trackEvent,l=function(){var t="tvdesktopnotifications."
;o.on("desktop-notification-tab-visibility-request",(function(){"true"===TVLocalStorage.getItem(t+"tabs-hidden")&&TVLocalStorage.setItem(t+"tabs-hidden",document.hidden)}));function i(t){var i=t.split("\n");return i.length>1&&(t=i[0]),((t=t.trim()).length>30||i.length>1)&&(t=t.substring(0,30)+"..."),t}function e(){return window.Notification.permission}function l(t){var i=e();"granted"===i&&"function"==typeof t?t():"default"===i&&window.Notification.requestPermission((function(i){"granted"===i&&"function"==typeof t&&t()}))}return window.Notification?{show:function(a,r,c,d){n.ownPushStream()&&(s("Desktop Notifications","Notification Show Attempt"),"denied"!==e()&&l((function(){TVLocalStorage.setItem(t+"tabs-hidden",document.hidden),o.emit("desktop-notification-tab-visibility-request"),setTimeout((function(){"false"!==TVLocalStorage.getItem(t+"tabs-hidden")&&document.hidden?(!function(t,e,n,o){var s=new window.Notification(t,{body:i(e),icon:n||"/static/images/desktop-notification.png"});s.onclick=function(){window.focus(),"function"==typeof o&&o()},setTimeout(s.close.bind(s),5e3)}(a,r,c,d),s("Desktop Notifications","Notification Show Success")):s("Desktop Notifications","Notification Show Tab Visible")}),100)})))},askPermission:l}:{show:function(){},askPermission:function(){}}}();t.exports=l},SgqT:function(t,i,e){"use strict";e.d(i,"a",(function(){return o}));var n=e("PT1i");function o(t,i){var e;const o=i?i.model():null,s=i?i.model().mainSeries():null;let l;const a=t.get("symbol"),r=null===(e=t.get("extra"))||void 0===e?void 0:e.getMainSeries();let c;n.linking.symbol.setValue(a);const d=s&&s.symbolSameAsCurrent(a);function u(){t.get("crossInterval")||n.linking.interval.setValue(t.get("resolution")),i&&r&&o&&s&&(null!=r.getStyle()&&o.setChartStyleProperty(s.properties().style,parseInt(r.getStyle()),"Change Series Style"),c=r.getStyleInputs(),c&&s&&(l=s.getInputsProperties(),Object.keys(c).forEach(t=>{const i=l.child(t);void 0!==i&&i.setValue(c[t])})))}s&&!d?s.dataEvents().symbolResolved().subscribe(null,(function t(){s&&s.dataEvents().symbolResolved().unsubscribe(null,t);u()})):u()}},Z59a:function(t,i,e){"use strict";e.r(i);var n=e("hbEN"),o=e("PT1i"),s=e("FBuY"),l=e("IWHC"),a=e("PQvG"),r=e("hp/T"),c=e("aIyQ"),d=e.n(c),u=e("txPx"),h=(e("YFKU"),e("HbRj"),e("q1tI")),f=e("i8i4"),g=e.n(f),p=e("Eyy1"),m=e("tKRU"),_=e("TSYQ"),w=e("Iivm"),b=e("LSqz"),v=e("tSes");function y(t){const{children:i,className:e=v.cellWrap+" apply-overflow-tooltip apply-overflow-tooltip--allow-text"}=t;return h.createElement("td",{className:v.cell},h.createElement("div",{className:e},i))}const k=["id","notificationIds","isHighlighted"];function N(t){const{order:i,data:e,isHighlighted:n,onSymbolClick:o}=t,s=i.map(t=>{if(k.includes(t))return null;{const n=e[t];switch(t){case"actions":const s=e[t].map((t,i)=>h.createElement(w.a,{key:t.id,className:_(v.controlsIcon,"apply-common-tooltip"),icon:t.icon,onClick:t.callback,title:t.title}));return h.createElement(y,{key:t,className:v.controls},s);case"description":if(e.symbols){const i=e.symbols
;return h.createElement(y,{key:t},i.map((t,e)=>{const n=e===i.length-1;return h.createElement(h.Fragment,{key:t},h.createElement(b.a,{key:t,symbolName:t,onSymbolClick:o}),!n&&", ")}))}return h.createElement(y,{key:t},n);case"lastFired":return h.createElement(y,{key:t},n?`${(i=n).toLocaleDateString()} ${i.toLocaleTimeString()}`:n);default:return h.createElement(y,{key:t},n)}}var i});return h.createElement("tr",{className:_(v.row,n&&v.rowHighlighted)},s)}var C=e("cvc5"),S=e("fBQ7");const D={name:S.columnName,description:S.columnDescription,actions:S.columnActions,count:S.columnCount};function x(t){const i=t.columns.map(t=>h.createElement("th",{key:t.id,className:_(S.headerCell,D[t.id],t.isCollapsing&&S.collapsing)},t.title)),e=t.columns.map(t=>t.id),n=t.rows.sort(A).map(i=>h.createElement(N,{key:i.id,data:i,isHighlighted:i.isHighlighted,order:e,onSymbolClick:t.onSymbolClick}));return h.createElement(C,{onMeasure:t.onResize},h.createElement("table",{className:S.table},h.createElement("thead",null,h.createElement("tr",null,i)),h.createElement("tbody",null,n)))}function A(t,i){return t.lastFired&&i.lastFired?t.lastFired.getTime()-i.lastFired.getTime():0}var I=e("9uLv");e("8JMQ");const T=2*I.dur;class E extends m.a{constructor(t,i=[],e){super({addClass:"tv-alerts-multiple-notifications-dialog",closeOnClickAtOtherDialogs:!1,closeOnOutsideClick:!1,contentWrapTemplate:"<div></div>",content:(e.subTitle?`<div class="tv-alerts-multiple-notifications-dialog__title">${e.subTitle}</div>`:"")+(e.message?`<div class="tv-alerts-multiple-notifications-dialog__message">${e.message}</div>`:"")+'<div class="js-alerts-multiple-notifications-dialog__table-container"><div>',destroyOnClose:!1,title:e.title,width:600}),this._highlightTimeoutIds=[],this._tableContainer=Object(p.ensureNotNull)(this.el.querySelector(".js-alerts-multiple-notifications-dialog__table-container")),this._columns=t,this._rows=i,this._onSymbolClick=e.onSymbolClick,this._onResize=()=>{this.calcHeight(),this.fixPos()},this.on("destroy",()=>{this._flushTable(),f.unmountComponentAtNode(this._tableContainer)}),this._renderTable()}getRows(){return this._rows}updateRow(t){for(let i=0;i<this._rows.length;i++){const e=this._rows[i];if(e.id===t.id){t!==e&&Object.assign(e,t),this._highlightRow(e);break}}this._renderTable()}addRow(t){this._rows.push(t),this._renderTable()}removeRows(t){this._rows=this._rows.filter(i=>!t.includes(i.id)),this._renderTable()}_renderTable(){const t={rows:this._rows,columns:this._columns,onSymbolClick:this._onSymbolClick,onResize:this._onResize};f.render(h.createElement(x,Object.assign({},t)),this._tableContainer),this._rows.length||this.close()}_flushTable(){this._columns=[],this._rows=[]}_highlightRow(t){t.isHighlighted=!0;const i=setTimeout(()=>{delete t.isHighlighted;const e=this._highlightTimeoutIds.indexOf(i);e>-1&&this._highlightTimeoutIds.splice(e,1),this._renderTable()},T);this._highlightTimeoutIds.push(i)}}function R(t,i=[],e={title:window.t("Alert Notifications"),subTitle:"",message:""}){return new E(t,i,e)}var O=e("JZcM")
;const V=h.lazy(async()=>({default:(await Promise.all([e.e("vendors"),e.e(0),e.e(1),e.e(2),e.e(7),e.e(11),e.e(14),e.e(20),e.e(216),e.e(286),e.e(505),e.e(10),e.e(188),e.e("alert-single-notification")]).then(e.bind(null,"J2Ox"))).AlertSingleNotification}));class W{constructor(t){this._rootDiv=null,this._isOpened=!1,this._options=t}destroy(){this._unmountComponentAtNode()}isOpened(){return this._isOpened}close(){this._unmountComponentAtNode()}open(){this._rootDiv=document.createElement("div"),this._isOpened=!0,g.a.render(h.createElement(h.Suspense,{fallback:null},h.createElement(V,{title:this._options.title,content:this._options.message,subTitle:this._options.subTitle,actions:this._getActions(),onSymbolClick:this._options.onSymbolClick,onClose:()=>this._onClose()})),this._rootDiv)}_unmountComponentAtNode(){null!==this._rootDiv&&(g.a.unmountComponentAtNode(this._rootDiv),this._rootDiv=null,this._isOpened=!1,this._options.onClose())}_getActions(){return this._options.actions.map(t=>Object.assign(Object.assign({},t),{handler:()=>{t.handler&&t.handler(),this._onClose()}}))}_onClose(){this._options.onSetNotificationsViewed(),this._unmountComponentAtNode()}}var L=e("zNIe"),M=e("9Z7D"),j=e("25b6"),P=e("JpHp"),q=e("KskR");class ${constructor(t){this._notifications=[],this._events=t}setNotificationsViewed(t,i){const e=[],n=[];for(const o of this._notifications)t.includes(o.id)?e.push(o):n.push(o);if(e.length){if(this._singleNotificationDialogView&&(this._singleNotificationDialogView.close(),delete this._singleNotificationDialogView),this._multipleNotificationDialogView){const t=e.map(t=>this._notificationToDialogRow(t).id);this._multipleNotificationDialogView.removeRows(t)}this._notifications=n,i||this._events.onNotificationsViewed(e)}}addNotification(t){this._notifications.includes(t)||this._notifications.some(i=>i.id===t.id)||(this._notifications.push(t),this._singleNotificationDialogRequired()?this._showSingleAlertNotificationDialog(t):this._multipleNotificationDialogRequired()?(this._removeSingleAlertNotificationDialog(),this._multipleNotificationDialogView?this._addNotificationToMultipleDialog(t):this._showMultipleAlertNotificationDialog(this._notifications)):(this._removeSingleAlertNotificationDialog(),this._removeMultipleAlertNotificationsDialog()))}destroy(){this._removeSingleAlertNotificationDialog(),this._removeMultipleAlertNotificationsDialog(),this._notifications=[]}_showSingleAlertNotificationDialog(t){const i=this._singleNotificationDialogView;if(i){if(i.isOpened())return;this._removeSingleAlertNotificationDialog()}let e=Object.assign(Object.assign({},this._getDataForSingleNotificationDialog(t)),{onSetNotificationsViewed:()=>this.setNotificationsViewed([t.id]),onClose:()=>this._removeSingleAlertNotificationDialog()});window.TradingView.onChartPage&&(e=Object.assign(Object.assign({},e),{onSymbolClick:i=>this._events.onSymbolClick(i,t)})),this._singleNotificationDialogView=function(t){return new W(t)}(e),this._singleNotificationDialogView.open()}_removeSingleAlertNotificationDialog(){
this._singleNotificationDialogView&&(this._singleNotificationDialogView.close(),delete this._singleNotificationDialogView)}_showMultipleAlertNotificationDialog(t){const i=this._notificationsListToDialogRowsList(t),e=this._instanciateMultipleAlertNotificationDialog(i);this._multipleNotificationDialogView=e,e.on("afterClose",()=>{let t=[];e.getRows().forEach(i=>{t=t.concat(i.notificationIds)}),this.setNotificationsViewed(t),this._removeMultipleAlertNotificationsDialog()}),e.open()}_removeMultipleAlertNotificationsDialog(){this._multipleNotificationDialogView&&(this._multipleNotificationDialogView.destroy(),delete this._multipleNotificationDialogView)}_addNotificationToMultipleDialog(t){const i=this._multipleNotificationDialogView;if(!i)return;const e=this._notificationToDialogRow(t),n=this._findSimilarRow(i.getRows(),e);if(n){const t=this._mergeRows(n,e);i.updateRow(t)}else i.addRow(e)}_notificationsListToDialogRowsList(t){const i=[];return t.forEach(t=>{const e=this._notificationToDialogRow(t),n=this._findSimilarRow(i,e);n?this._mergeRows(n,e):i.push(e)}),i}}class F extends ${_singleNotificationDialogRequired(){return 1===this._notifications.length&&!(this._notifications[0].count>1)}_multipleNotificationDialogRequired(){return this._notifications.length>1||this._notifications[0].count>1}_getDataForSingleNotificationDialog(t){var i;const e=t.alertCategory===l.AlertCategory.Screener?`${window.t("New tickers in the filter:")} ${null===(i=t.symbols)||void 0===i?void 0:i.map(t=>`<a data-symbol="${t}" class="js-symbol" href="${Object(L.a)(t)}" target="_blank">${Object(M.a)(t)[1]}</span>`).join(", ")}`:Object(j.htmlEscape)(t.description);return{title:t.dialogTitle||t.desktopNotificationTitle,subTitle:t.dialogSubTitle||"",message:e,actions:[{name:"ok",title:window.t("Ok")},{name:"editAlert",title:window.t("Edit"),intent:"primary",appearance:"text",handler:()=>this._events.onEditAlert(t.alertId,t.alertCategory)}]}}_notificationToDialogRow(t){return{id:t.alertId.toString(),notificationIds:[t.id],name:t.title,description:t.description,count:t.count||1,lastFired:t.fired,symbols:t.symbols,actions:[{id:"edit",icon:P,title:window.t("Edit Alert"),callback:()=>{this._events.onEditAlert(t.alertId,t.alertCategory)}}]}}_findSimilarRow(t,i){return t.find((t,e,n)=>t.id===i.id)||null}_mergeRows(t,i){return t.id!==i.id||(t.lastFired&&i.lastFired&&t.lastFired<i.lastFired&&(t.lastFired=i.lastFired,t.symbols=i.symbols,t.description=i.description),void 0!==t.count&&t.count++,t.notificationIds=t.notificationIds.concat(i.notificationIds)),t}_instanciateMultipleAlertNotificationDialog(t){const i=[{id:"name",title:window.t("Alert")},{id:"description",title:window.t("Description")},{id:"count",title:"#"},{id:"lastFired",title:window.t("Last Fired"),isCollapsing:!0},{id:"actions",title:""}];let e={title:window.t("Alert Notifications")};return window.TradingView.onChartPage&&(e=Object.assign(Object.assign({},e),{onSymbolClick:t=>this._events.onSymbolClick(t)})),R(i,t,e)}}class B extends ${_singleNotificationDialogRequired(){
if(!this._notifications.length)return!1;const t=this._notifications[0];return this._notifications.every(i=>i.alertId===t.alertId)}_multipleNotificationDialogRequired(){return new Set(this._notifications.map(t=>t.alertId)).size>1}_getDataForSingleNotificationDialog(t){return{title:window.t("The alert is triggered too often!"),subTitle:t.description,message:window.t("We paused it so you don't get too many similar notifications. Please check alert conditions and edit them as required, or turn it back on if everything is ok."),actions:[{name:"editAlert",title:window.t("Edit"),handler:()=>this._events.onEditAlert(t.alertId,t.alertCategory)},{name:"restartAlert",title:window.t("Turn Alert Back On"),intent:"primary",appearance:"text",handler:()=>this._events.onRestartAlert(t.alertId,t.alertCategory)}]}}_notificationToDialogRow(t){const i=this.setNotificationsViewed.bind(this,[t.id]);return{id:t.alertId.toString(),notificationIds:[t.id],name:t.title,description:t.description,actions:[{id:"play",icon:q,title:window.t("Turn Alert Back On"),callback:()=>{this._events.onRestartAlert(t.alertId,t.alertCategory,{success:i})}},{id:"edit",icon:P,title:window.t("Edit Alert"),callback:()=>{this._events.onEditAlert(t.alertId,t.alertCategory,{onDeleteSuccess:i,onEditSuccess:i})}}]}}_findSimilarRow(t,i){return t.find(t=>t.id===i.id)||null}_mergeRows(t,i){return t.notificationIds=t.notificationIds.concat(i.notificationIds),t}_instanciateMultipleAlertNotificationDialog(t){return R([{id:"name",title:window.t("Alert")},{id:"description",title:window.t("Description")},{id:"actions",title:""}],t,{title:window.t("Alerts are triggered too often!"),message:window.t("We paused it so you don't get too many similar notifications. Please check alert conditions and edit them as required, or turn it back on if everything is ok.")})}}var z=e("PJXJ"),J=e("JUY+"),K=e("SgqT");e.d(i,"SOUND_DEBOUNCE_DELAY",(function(){return U})),e.d(i,"AlertNotifier",(function(){return Q})),e.d(i,"createAlertNotifier",(function(){return Y}));const H=Object(u.getLogger)("Alerts.AlertNotifier"),U=50;class Q{constructor(){this._notificationIds=[],this._dialogModels={},this.onEditAlert=new d.a,this.onRestartAlert=new d.a,this.onSymbolClick=new d.a,this.onNotificationsViewed=new d.a,this.onNotificationsViewed.subscribe(null,t=>{var i,e;const n=t.map(t=>(this._playingSound&&t.soundParams&&this._playingSound.name===t.soundParams.name&&r.stop(this._playingSound.name),t.id));null===(e=null===(i=window.TVD)||void 0===i?void 0:i.setNotificationViewed)||void 0===e||e.call(i),s.TVXWindowEvents.emit("Alerts.Notifier.notificationsViewed",JSON.stringify(n))}),this.onSymbolClick.subscribe(null,(t,i)=>{(null==i?void 0:i.alertCategory)===l.AlertCategory.Price?async function(t){const i=await Object(J.getPriceAlertsDispatcher)(),e=i.alerts.get(t.alertId);e&&Object(K.a)(e,i.chartWidget())}(i):o.linking.symbol.setValue(t)}),s.TVXWindowEvents.on("Alerts.Notifier.notificationsViewed",t=>{const i=JSON.parse(t);var e;e=t=>{const e=this._dialogModels[t];e&&e.setNotificationsViewed(i,!0)},
[O.a.FireControl,O.a.Fired].forEach(e)}),this._notifyWithSound=Object(n.default)(this._playSoundImpl,U),r.enableAlertSoundsForMobile()}addNotification(t){var i,e;if(this._notificationIds.includes(t.id))return;const n=function(t){var i,e,n;const o=Boolean(null===(i=window.TVD)||void 0===i?void 0:i.setNotification),s=Boolean(null===(e=t.notifyWith)||void 0===e?void 0:e.popup),l=Boolean((null===(n=t.notifyWith)||void 0===n?void 0:n.sound)&&t.soundParams),a=s||l;return{dialog:s,sound:!o&&l,desktopApplication:o&&a,desktopNotification:!o&&a}}(t);n.desktopApplication&&(null===(e=null===(i=window.TVD)||void 0===i?void 0:i.setNotification)||void 0===e||e.call(i,t)),n.dialog&&this._notifyWithDialog(t),n.sound&&(H.logNormal(`shouldNotifyWithSound alertId: ${t.alertId}, eventId: ${t.eventId}`),this._notifyWithSound(t.soundParams),n.dialog||this.onNotificationsViewed.fire([t])),n.desktopNotification&&this._notifyWithDesktopNotification(t.desktopNotificationTitle,t.description),this._notificationIds.push(t.id)}reset(){this._notificationIds=[],this._dialogModels={},this._playingSound&&(r.stop(this._playingSound.name),delete this._playingSound)}_playSoundImpl(t){if(this._playingSound){if(this._playingSound.name===t.name&&this._playingSound.duration===t.duration)return void H.logNormal("already playing "+t.name);r.stop(this._playingSound.name)}this._playingSound=t,r.play(t.name,Object(z.ensureDurationInSeconds)(t.duration)),r.onStopped(t.name,()=>{delete this._playingSound})}_notifyWithDesktopNotification(t,i){a.show(t,i)}_notifyWithDialog(t){this._getDialogModel(t.type).addNotification(t)}_getDialogModel(t){const i=this._dialogModels[t]||function(t,i){return new(0,{[O.a.Fired]:F,[O.a.FireControl]:B}[t])(i)}(t,{onEditAlert:this.onEditAlert.fire.bind(this.onEditAlert),onRestartAlert:this.onRestartAlert.fire.bind(this.onRestartAlert),onSymbolClick:this.onSymbolClick.fire.bind(this.onSymbolClick),onNotificationsViewed:this.onNotificationsViewed.fire.bind(this.onNotificationsViewed)});return this._dialogModels[t]||(this._dialogModels[t]=i),i}}let Z=null;function Y(){return Z||(Z=new Q),Z}},aLUT:function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11px" height="9px"><path fill="none" fill-rule="evenodd" stroke-width="2" d="M1 3.22l3.415 3.496L10 1"/></svg>'},"b6p+":function(t,i,e){},fBQ7:function(t,i,e){t.exports={table:"table-3Kfqu_WK",headerCell:"headerCell-3Kfqu_WK",columnName:"columnName-3Kfqu_WK",columnDescription:"columnDescription-3Kfqu_WK",columnActions:"columnActions-3Kfqu_WK",columnCount:"columnCount-3Kfqu_WK",collapsing:"collapsing-3Kfqu_WK"}},jAh7:function(t,i,e){"use strict";e.r(i),e.d(i,"OverlapManager",(function(){return s})),e.d(i,"getRootOverlapManager",(function(){return a}));var n=e("Eyy1");class o{constructor(){this._storage=[]}add(t){this._storage.push(t)}remove(t){this._storage=this._storage.filter(i=>t!==i)}has(t){return this._storage.includes(t)}getItems(){return this._storage}}class s{constructor(t=document){this._storage=new o,this._windows=new Map,this._index=0,
this._document=t,this._container=t.createDocumentFragment()}setContainer(t){const i=this._container,e=null===t?this._document.createDocumentFragment():t;!function(t,i){Array.from(t.childNodes).forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&i.appendChild(t)})}(i,e),this._container=e}registerWindow(t){this._storage.has(t)||this._storage.add(t)}ensureWindow(t,i={position:"fixed",direction:"normal"}){const e=this._windows.get(t);if(void 0!==e)return e;this.registerWindow(t);const n=this._document.createElement("div");if(n.style.position=i.position,n.style.zIndex=this._index.toString(),n.dataset.id=t,void 0!==i.index){const t=this._container.childNodes.length;if(i.index>=t)this._container.appendChild(n);else if(i.index<=0)this._container.insertBefore(n,this._container.firstChild);else{const t=this._container.childNodes[i.index];this._container.insertBefore(n,t)}}else"reverse"===i.direction?this._container.insertBefore(n,this._container.firstChild):this._container.appendChild(n);return this._windows.set(t,n),++this._index,n}unregisterWindow(t){this._storage.remove(t);const i=this._windows.get(t);void 0!==i&&(null!==i.parentElement&&i.parentElement.removeChild(i),this._windows.delete(t))}getZindex(t){const i=this.ensureWindow(t);return parseInt(i.style.zIndex||"0")}moveToTop(t){if(this.getZindex(t)!==this._index){this.ensureWindow(t).style.zIndex=(++this._index).toString()}}removeWindow(t){this.unregisterWindow(t)}}const l=new WeakMap;function a(t=document){const i=t.getElementById("overlap-manager-root");if(null!==i)return Object(n.ensureDefined)(l.get(i));{const i=new s(t),e=function(t){const i=t.createElement("div");return i.style.position="absolute",i.style.zIndex=150..toString(),i.style.top="0px",i.style.left="0px",i.id="overlap-manager-root",i}(t);return l.set(e,i),i.setContainer(e),t.body.appendChild(e),i}}},nec0:function(t,i,e){},qeEu:function(t,i,e){t.exports={link:"link-gh0VRqvm"}},qocr:function(t,i,e){"use strict";function n(t,i=!1){("attachEvent"in document?"complete"===document.readyState:"loading"!==document.readyState)?i?setTimeout(()=>t(),1):t():document.addEventListener("DOMContentLoaded",()=>t())}e.d(i,"a",(function(){return n})),e.d(i,"b",(function(){return o}));const o=new Promise(t=>{n(t)})},tSes:function(t,i,e){t.exports={row:"row-3wW-JF2e",rowHighlighted:"rowHighlighted-3wW-JF2e",cell:"cell-3wW-JF2e",cellWrap:"cellWrap-3wW-JF2e",controls:"controls-3wW-JF2e",controlsIcon:"controlsIcon-3wW-JF2e"}},uo4K:function(t,i){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'},xZmJ:function(t,i,e){"use strict";e.r(i),function(t){var n=e("IWoC");e("b6p+");const o=e("txPx").getLogger("Ui.TvControlCheckbox"),s={
labelWrapper:'{{#hasLabel}}<label>{{#labelLeft}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelLeft}}</span>{{/labelLeft}}{{> inputWrapper }}{{#labelRight}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelRight}}</span>{{/labelRight}}</label>{{/hasLabel}}{{^hasLabel}}{{> inputWrapper }}{{/hasLabel}}',inputWrapper:'<{{ tag }} class="{{ customClass }}{{#disabled}} i-disabled{{/disabled}}">{{^hasCheckbox}}{{> checkbox }}{{/hasCheckbox}}{{> box }}{{> ripple }}</{{ tag }}>',checkbox:'<input{{#id}} id="{{ id }}"{{/id}} class="{{> checkboxClass }}" type="checkbox"{{#name}} name="{{ name }}"{{/name}}{{#checked}} checked{{/checked}}{{#disabled}} disabled{{/disabled}}>',checkboxClass:"{{ customClass }}__input",box:'<span class="{{ customClass }}__box {{#boxAddClass}}{{boxAddClass}}{{/boxAddClass}}">'+e("aLUT")+"</span>",ripple:'<span class="{{ customClass }}__ripple js-ripple"></span>'};class l{constructor({customClass:t="tv-control-checkbox",$checkbox:i,tag:e,id:n,name:s,checked:l,disabled:a,labelLeft:r,labelRight:c,labelAddClass:d,boxAddClass:u}){this.$el=null,void 0===e&&(e=r||c?"span":"label");const h=i instanceof $&&!!i.length;if(h){if(!i.is("input[type=checkbox]"))return void o.logError("`$checkbox` need to be input[type=checkbox]");if(i.hasClass("i-inited"))return;this._setInputId(i,n),this._setInputClass(i,t),this._setInputName(i,s),this._setInputChecked(i,l),this._setInputDisabled(i,a),l=!!i.prop("checked"),a=!!i.attr("disabled")}this.$el=this.render({$checkbox:i,hasCheckbox:h,customClass:t,tag:e,id:n,name:s,checked:l,disabled:a,labelLeft:r,labelRight:c,hasLabel:r||c,labelAddClass:d,boxAddClass:u}),this.$checkbox=h?i:this.$el.find("input[type=checkbox]")}_setInputId(t,i){void 0!==i&&t.attr("id",i)}_setInputClass(i,e){const n=t.render(s.checkboxClass,{customClass:e});i.addClass(n)}_setInputName(t,i){void 0!==i&&t.attr("name",i)}_setInputChecked(t,i){void 0!==i&&t.prop("checked",!!i)}_setInputDisabled(t,i){void 0!==i&&(i?t.setAttribute("disabled","disabled"):t.removeAttr("disabled"))}render(i){const e=i.$checkbox,n=$(t.render(s.labelWrapper,i,s));if(i.hasCheckbox){n.insertBefore(e);n.find("."+i.customClass).andSelf().filter("."+i.customClass).eq(0).prepend(e.detach()),e.addClass("i-inited")}return n}set checked(t){this._setInputChecked(this.$checkbox,!!t)}get checked(){return!!this.$checkbox.prop("checked")}}$.fn.tvControlCheckbox=Object(n.createTvBlockWithInstance)("tv-control-checkbox",(function(t,i={}){return new l(TradingView.mergeObj(i,{$checkbox:t}))})),i.default=l}.call(this,e("nbsC"))},zNIe:function(t,i,e){"use strict";function n(t){const i=new URL("chart",window.location.origin);return i.searchParams.append("symbol",t),i.toString()}e.d(i,"a",(function(){return n}))}}]);