(window.webpackJsonp=window.webpackJsonp||[]).push([["marked-symbols","context-menu"],{"1pWb":function(t,e,s){"use strict";s.d(e,"b",(function(){return o}));var i=s("RwqP");function o(t){return Object(i.b)(t)}s.d(e,"a",(function(){return i.a}))},"5VQP":function(t,e,s){"use strict";s.r(e),s.d(e,"ContextMenuManager",(function(){return i}));var i,o=s("tWVy");!function(t){const e=[];function i(){Object(o.b)()}t.createMenu=async function(t,o={},n){const r=new((await Promise.all([s.e("vendors"),s.e(5),s.e(14),s.e(23),s.e(66),s.e(100),s.e(142),s.e(370),s.e(4),s.e(126),s.e(322),s.e("context-menu-renderer")]).then(s.bind(null,"cbq4"))).ContextMenuRenderer)(t,o,()=>{const t=e.indexOf(r);-1!==t&&e.splice(t,1),void 0!==n&&n()},i);return e.push(r),r},t.hideAll=i,t.getShown=function(){for(let t=0;t<e.length;t++)if(e[t].isShown())return e[t];return null}}(i||(i={}))},"7KDR":function(t,e,s){"use strict";s.r(e),s.d(e,"Action",(function(){return a})),s.d(e,"ActionAsync",(function(){return c})),s.d(e,"Separator",(function(){return h}));var i=s("zRdu"),o=s("aIyQ"),n=s.n(o),r=s("/3z9"),l=s("e3/o");class a{constructor(t,e=l.guid()){this.type=i.a.Action,this._destroyed=!1,this._binding=null,this.id=e,this._onUpdate=new n.a,this._options=t,this.update(t)}execute(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)}getLabel(){return this._options.label||""}getSubItems(){return this._options.subItems||[]}isDisabled(){return!0===this._options.disabled}isActive(){return!0===this._options.active}isCheckable(){return!0===this._options.checkable}isChecked(){return!0===this._options.checked}getPayload(){return this._options.payload}update(t){this._destroyed||(this._unbindShortcut(),t.hotkeyHash&&(this._options.shortcutHint=Object(r.humanReadableHash)(t.hotkeyHash)),this._options=Object.assign(this._options,t),this._bindShortcut(),this._onUpdate.fire(this))}onUpdate(){return this._onUpdate}getState(){return{label:this.getLabel(),disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,fullWidthLabel:this._options.fullWidthLabel}}getBinding(){return this._binding}setBinding(t){this._binding=t}destroy(){this._destroyed=!0,this._onUpdate.destroy(),null!==this._binding&&this._binding.destroy(),this._unbindShortcut()}_bindShortcut(){if(!this._options.hotkeyGroup||!this._options.hotkeyHash)return;const t="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,desc:t,handler:()=>this.execute(),isDisabled:()=>this.isDisabled()})}_unbindShortcut(){
this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)}}class c extends a{constructor(t,e){super({},e),this.type=i.a.ActionAsync,this._loader=t,this._loaded=!1}loadOptions(){return this._loadingPromise||(this._loadingPromise=this._loader().then(t=>{this.update(t),this._loaded=!0})),this._loadingPromise}isLoaded(){return this._loaded}}class h{constructor(t,e=l.guid()){this.type=i.a.Separator,this.id=e,this._hint=t}getHint(){return this._hint}}},G2US:function(t,e,s){"use strict";s.r(e),s.d(e,"FilterEvents",(function(){return i})),s.d(e,"MarkedSymbolsFilter",(function(){return _}));var i,o=s("XCam"),n=(s("YFKU"),s("4O8T")),r=s.n(n),l=s("M4p8"),a=s("tEuG"),c=s("+9Gp"),h=s("6q77"),u=s("Ke6I");!function(t){t.Init="init",t.FilterByMarkedSymbols="filterByMarkedSymbols",t.Disable="disable"}(i||(i={}));class _{constructor(t){this._service=Object(a.a)(),this._isActive=!1,this._stream=new r.a,this._colorManager=new u.b({context:u.a.ScreenerFilter}),this._onInitData=()=>{window.is_authenticated&&this._getFilterState()?this._enable():this._disable(),this._stream.emit(i.Init)},this._onSymbolsChange=(t,e)=>{if(this._isActive){const s=this._colorManager.getColor();Object(o.f)(t,s)!==Object(o.f)(e,s)&&this._stream.emitEvent(i.FilterByMarkedSymbols,[this._service.getSymbolsByColor(s)])}},this._injectFilter=t=>{const e=t.querySelector(this._opts.containerSelector);e?this._uiMarker.appendTo(e):this._uiMarker.appendTo(t)},this._onClick=t=>{t.stopPropagation(),window.runOrSignIn(this._toggleState,{source:"Scan by marked symbols"})},this._toggleState=()=>{if(this._isActive)this._disable(),this._saveFilterState(!1),this._stream.emitEvent(i.Disable),c.a.hide();else{this._enable(),this._saveFilterState(!0);const t=this._colorManager.getColor();this._stream.emitEvent(i.FilterByMarkedSymbols,[this._service.getSymbolsByColor(t)]),c.a.show({elem:this._uiMarker.getElem(),currentColor:t,onSelectColor:this._onSelectColor})}},this._onSelectColor=t=>{this._colorManager.setColor(t),this._stream.emitEvent(i.FilterByMarkedSymbols,[this._service.getSymbolsByColor(this._colorManager.getColor())]),this._uiMarker.setColor(this._colorManager.getColor())},this._opts=t,this._init()}isActive(){return this._isActive}getStream(){return this._stream}getSymbolsForScan(){return this._isActive?this._service.getSymbolsByColor(this._colorManager.getColor()):[]}_enable(){this._isActive=!0,this._uiMarker.setColor(this._colorManager.getColor())}_disable(){this._isActive=!1,this._uiMarker.removeColor()}_init(){if(this._getFilterState()){this._isActive=!0;const t=this._colorManager.getColor();this._stream.emitEvent(i.FilterByMarkedSymbols,[this._service.getSymbolsByColor(t)])}this._service.onListChange(this._onSymbolsChange),this._service.onInit(this._onInitData),this._opts.symbolsView.registerHooksHandlers({beforeAppendSymbolsHeader:this._injectFilter}),this._uiMarker=new l.a({color:this._isActive?this._colorManager.getColor():null,className:this._opts.className,onClick:this._onClick})}_saveFilterState(t){this._opts.disableSaveState||h.b.setIsActive(t)}
_getFilterState(){return this._opts.disableSaveState?this._isActive:h.b.getIsActive()}}},"J/x9":function(t,e,s){"use strict";s.r(e);var i=s("eqEH");const o={id:"SymbolListService"};function n(){return Promise.all([Promise.all([s.e("vendors"),s.e(43),s.e(61),s.e(62),s.e(86),s.e(193),s.e(267),s.e("symbol-list-service")]).then(s.bind(null,"CqQ8")),Promise.all([s.e("vendors"),s.e(43),s.e(61),s.e(62),s.e(86),s.e(193),s.e(267),s.e("symbol-list-service")]).then(s.bind(null,"NyG/")),Promise.all([s.e("vendors"),s.e(43),s.e(61),s.e(62),s.e(86),s.e(193),s.e(267),s.e("symbol-list-service")]).then(s.bind(null,"aOxy")),Promise.all([s.e("vendors"),s.e(43),s.e(61),s.e(62),s.e(86),s.e(193),s.e(267),s.e("symbol-list-service")]).then(s.bind(null,"1O7s"))]).then(([t,e,s,n])=>{if(Object(i.hasService)(o))return Object(i.service)(o);const{store:r,runner:l}=t.configureStore(),a=l.run(e.symbolListRepositorySaga);return Object(i.registerService)(o,{store:r,runner:l,actions:{addSymbols:n.addSymbolsThunk,initWidget:s.initWidget,saveListAs:n.saveListAsThunk},task:a}),Object(i.service)(o)})}s.d(e,"initSymbolListService",(function(){return n}))},"T/J1":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s("qFKp");const o={"alt+return":Object(i.isMac)()?"Opt + Enter":"Alt + Enter","alt+shift+return":Object(i.isMac)()?"Opt + Shift + Enter":"Alt + Shift + Enter"}},ZmaV:function(t,e,s){"use strict";s.r(e),s.d(e,"InjectableMenuItems",(function(){return p})),s.d(e,"MarkableSymbols",(function(){return v}));var i=s("q1tI"),o=s.n(i),n=s("YFKU"),r=s("hbEN"),l=(s("HbRj"),s("fFbJ")),a=s("tEuG"),c=s("7KDR"),h=s("8woN"),u=s("5VQP"),_=s("T/J1"),d=s("KH30"),b=s("Ke6I"),m=s("fZEr");const g=n.t("Unflag All Symbols in the System"),S=n.t("Flag All Selected"),y=n.t("Unflag All Selected");var p;!function(t){t[t.FlagAllSelected=0]="FlagAllSelected",t[t.UnflagAllSelected=1]="UnflagAllSelected",t[t.FlagSymbol=2]="FlagSymbol",t[t.UnflagSymbol=3]="UnflagSymbol",t[t.UnflagAll=4]="UnflagAll"}(p||(p={}));const f={injectableMenuItems:[p.FlagAllSelected,p.UnflagAllSelected,p.FlagSymbol,p.UnflagSymbol,p.UnflagAll]};class v{constructor(t){this._service=Object(a.a)(),this._markers=new Map,this._injectionSessionSymbols=new Set,this._colorManager=new b.b({context:b.a.SymbolMarker}),this._injectMarker=(t,e)=>{let s=e;if(this._opts.markerContainerSelector&&(s=e.querySelector(this._opts.markerContainerSelector)),!s)throw new Error("Marker container not found");this._createMarker(t,s),this._invalidateMarkers()},this._onInitData=()=>{this._markers&&this._markers.forEach(t=>{t.updateSubscription()})},this._injectMenuItems=t=>{const e=[];return this._opts.injectableMenuItems&&this._opts.injectableMenuItems.forEach(t=>this[t](e)),"top"===t?e.unshift(new c.Separator):"bottom"===t&&e.push(new c.Separator),e},this._afterSymbolConfirm=(t,e)=>{"alt+return"===e&&window.runOrSignIn(()=>{this._markGroupOrContinue(t,()=>{this._service.getSymbolColor(t)?this._service.setSymbolsColor([t],null):this._service.setSymbolsColor([t],this._colorManager.getColor())})},{
source:"Set symbol color"})},this._markGroupOrContinue=(t,e)=>{const s=this._opts.symbolsView.getSelectedSymbols();if(s.length>1&&s.includes(t)){const e=this._service.getSymbolColor(t),i=s.filter(e=>e!==t).map(t=>this._service.getSymbolColor(t));null!==e&&i.includes(null)?this._service.setSymbolsColor([t],null):null===e||i.includes(null)?this._service.setSymbolsColor(s,this._colorManager.getColor()):this._service.setSymbolsColor(s,null)}else e()},this._opts=Object.assign({},f,t),this._invalidateMarkers=Object(r.default)(this._invalidateMarkers.bind(this),10),this._subscribe()}destroy(){this._service.offInit(this._onInitData),this._markers.forEach(t=>t.destroy()),this._markers.clear(),delete this._opts}_subscribe(){this._opts.symbolsView.registerHooksHandlers&&this._opts.symbolsView.registerHooksHandlers({beforeAppendSymbol:this._injectMarker,beforeAppendContextMenuItems:this._injectMenuItems,afterSymbolConfirm:this._afterSymbolConfirm}),this._service.onInit(this._onInitData)}_createMarker(t,e){const s=this._markers.get(t);s?s.bindTo(t,e):this._markers.set(t,new l.a({symbol:t,container:e,className:this._opts.additionalMarkerClass,activeClassName:this._opts.activeMarkerClass,onClick:this._markGroupOrContinue})),this._injectionSessionSymbols.add(t)}_invalidateMarkers(){Array.from(this._markers.keys()).filter(t=>!this._injectionSessionSymbols.has(t)).forEach(t=>{const e=this._markers.get(t);if(e){const s=e.getElem();!s.ownerDocument.documentElement.contains(s)&&(e.unbind(),this._markers.delete(t))}}),this._injectionSessionSymbols.clear()}[p.FlagAllSelected](t){const e=this._opts.symbolsView.getSelectedSymbols();if(e.length>1){const s=t=>{const s=u.ContextMenuManager.getShown();s&&s.hide(),window.runOrSignIn(()=>{this._colorManager.setColor(t),this._service.setSymbolsColor(e,this._colorManager.getColor())},{source:"Set symbol color"})},i=new c.Action({label:S,shortcutHint:_.a["alt+return"],onExecute:()=>s(this._colorManager.getColor())});t.push(i);const n=new c.Action({label:o.a.createElement(d.a,{onChange:s}),doNotCloseOnClick:!0});t.push(n)}}[p.UnflagAllSelected](t){const e=this._opts.symbolsView.getSelectedSymbols(),s=e.every(t=>!!this._service.getSymbolColor(t));if(e.length>1&&s){const s=new c.Action({label:y,shortcutHint:_.a["alt+return"],doNotBindShortcut:!0,onExecute:t=>{this._service.setSymbolsColor(e,null)}});t.push(s)}}[p.FlagSymbol](t){const e=this._opts.symbolsView.getSelectedSymbols(),s=this._opts.symbolsView.getFocusedSymbol();if(0===e.length&&s){const e=(i=Object(h.shortName)(s),n.t("Flag {0}").format(i)),r=t=>{const e=u.ContextMenuManager.getShown();e&&e.hide(),window.runOrSignIn(()=>{this._colorManager.setColor(t),this._service.setSymbolsColor([s],this._colorManager.getColor())},{source:"Set symbol color"})},l=new c.Action({label:e,shortcutHint:_.a["alt+return"],onExecute:()=>r(this._colorManager.getColor())});t.push(l);const a=this._service.getSymbolColor(s)||void 0,b=new c.Action({label:o.a.createElement(d.a,{value:a,onChange:r}),doNotCloseOnClick:!0});t.push(b)}var i}[p.UnflagSymbol](t){
const e=this._opts.symbolsView.getSelectedSymbols(),s=this._opts.symbolsView.getFocusedSymbol(),i=s&&this._markers.get(s),o=!!i&&i.isMarked();if(0===e.length&&s&&o){const e=new c.Action({label:(r=Object(h.shortName)(s),n.t("Unflag {0}").format(r)),shortcutHint:_.a["alt+return"],doNotBindShortcut:!0,onExecute:t=>{this._service.setSymbolsColor([s],null)}});t.push(e)}var r}[p.UnflagAll](t){const e=new c.Action({label:g,onExecute:t=>{var e;e=()=>{this._service.clearAllSymbolsColor()},Object(m.showConfirm)({text:C,onConfirm:({dialogClose:t})=>{e(),t()}})}});t.push(e)}}const C=n.t("Do you really want to unflag all symbols in the system?")}}]);