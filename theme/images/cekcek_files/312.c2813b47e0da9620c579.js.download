(window.webpackJsonp=window.webpackJsonp||[]).push([[312],{"/ELx":function(t,e,n){"use strict";(function(e,r){var i=n("txPx").getLogger("Alerts.Price.Abstract"),o=n("pPtI").getTranslatedResolution,a=n("8woN"),s=n("Ialn"),u=e.Model.extend({constructor:function(t,n){t=this._prepareToSet(t,!0),e.Model.call(this,t,n)},_prepareToSet:function(t,e){var n,r,i;if(t)for(n in t)t.hasOwnProperty(n)&&(r=t[n],"function"==typeof this[i="_prepareToSet_"+n]&&(t[n]=this[i](r,t,e)));return t},destroy:function(){this.stopListening(),this.trigger("destroy",this)},save:function(){i.logError("[Alerts] Use disaptcher to save")},shortSymbol:function(t){return a?a.shortName(t||this.get("symbol")||""):(i.logWarn("[Alerts] can't get short symbol"),t)},resolutionReadable:function(t){return(t=t||this.get("resolution"))?o(t):""},title:function(t){var e;return e=t?this.get("symbol"):this.shortSymbol(),this.get("crossInterval")||(e=s.isRtl()?e+" "+s.forceRTLStr(" ,"+this.resolutionReadable()):e+", "+this.resolutionReadable()),e},_formatDate:function(t){return r(t||new Date).format("MMM D LTS")}});t.exports=u}).call(this,n("q1z7"),n("ldgD"))},"23IT":function(t,e,n){"use strict";var r,i;function o(t){return"line"===t.type}function a(t){return"shapes"===t.type}function s(t){return"chars"===t.type}function u(t){return"arrows"===t.type}function c(t){return"dataoffset"===t.type}function l(t){return"ohlc_open"===t.type}function d(t){return"ohlc_high"===t.type}function p(t){return"ohlc_low"===t.type}function f(t){return"ohlc_close"===t.type}function h(t){return l(t)||d(t)||p(t)||f(t)}function y(t){return"colorer"===t.type}function g(t){return"bar_colorer"===t.type}function v(t){return"bg_colorer"===t.type}function m(t){return"text_colorer"===t.type}function _(t){return"ohlc_colorer"===t.type}function S(t){return"wick_colorer"===t.type}function b(t){return"border_colorer"===t.type}function w(t){return"up_colorer"===t.type}function T(t){return"down_colorer"===t.type}function A(t){return"alertcondition"===t.type}function x(t){return"Plot"!==t}function D(t){return"ohlc_bars"===t.plottype}function O(t){return"ohlc_candles"===t.plottype}function C(t){return y(t)||g(t)||v(t)||c(t)||_(t)||A(t)||w(t)||T(t)||b(t)||S(t)||m(t)}function P(t){return y(t)||m(t)||g(t)||c(t)||_(t)||S(t)||b(t)||w(t)||T(t)||A(t)}n.r(e),n.d(e,"LineStudyPlotStyle",(function(){return r})),n.d(e,"isLinePlot",(function(){return o})),n.d(e,"isShapesPlot",(function(){return a})),n.d(e,"isCharsPlot",(function(){return s})),n.d(e,"isArrowsPlot",(function(){return u})),n.d(e,"isDataOffsetPlot",(function(){return c})),n.d(e,"isOhlcOpenPlot",(function(){return l})),n.d(e,"isOhlcHighPlot",(function(){return d})),n.d(e,"isOhlcLowPlot",(function(){return p})),n.d(e,"isOhlcClosePlot",(function(){return f})),n.d(e,"isOhlcPlot",(function(){return h})),n.d(e,"isColorerPlot",(function(){return y})),n.d(e,"isBarColorerPlot",(function(){return g})),n.d(e,"isBgColorerPlot",(function(){return v})),n.d(e,"isTextColorerPlot",(function(){return m})),n.d(e,"isOhlcColorerPlot",(function(){return _})),
n.d(e,"isCandleWickColorerPlot",(function(){return S})),n.d(e,"isCandleBorderColorerPlot",(function(){return b})),n.d(e,"isUpColorerPlot",(function(){return w})),n.d(e,"isDownColorerPlot",(function(){return T})),n.d(e,"isAlertConditionPlot",(function(){return A})),n.d(e,"isPlotTitleDefined",(function(){return x})),n.d(e,"isOhlcPlotStyleBars",(function(){return D})),n.d(e,"isOhlcPlotStyleCandles",(function(){return O})),n.d(e,"PlotSymbolSize",(function(){return i})),n.d(e,"isPlotWithTechnicalValues",(function(){return C})),n.d(e,"isNonVisualPlot",(function(){return P})),function(t){t[t.Line=0]="Line",t[t.Histogram=1]="Histogram",t[t.Cross=3]="Cross",t[t.Area=4]="Area",t[t.Columns=5]="Columns",t[t.Circles=6]="Circles",t[t.LineWithBreaks=7]="LineWithBreaks",t[t.AreaWithBreaks=8]="AreaWithBreaks",t[t.StepLine=9]="StepLine"}(r||(r={})),function(t){t.Auto="auto",t.Tiny="tiny",t.Small="small",t.Normal="normal",t.Large="large",t.Huge="huge"}(i||(i={}))},"4pku":function(t,e,n){"use strict";(function(e){var r=n("/ELx"),i=n("sDvb").AlertExtra,o=n("OKab").FormattersSerializer,a=n("A0ZR").AlertFrequencyController,s=n("pPtI").getServerInterval,u=n("PJXJ").ensureDurationInSeconds,c=n("M3fW").getAlertConditionTokenMap,l=n("YG2F").getAlertDefaultDescription,d=n("fkD1").getAlertDefaultName,p=n("YGq1").getAlertType,f=["crossInterval","autoDeactivation","description","sendEmail","expired","extra","showPopup","resolution","script","scriptDeps","sendSms","sendTrueSms","sendPush","playSound","soundDuration","soundFile","symbol","noExpiration","symbolInternal","webhookUrl","name","alertType"],h=f.concat(["id"]),y=r.extend({constructor:function(t,n){var o={};["autoDeactivation","frequency","extra","crossInterval","alertType"].forEach((function(e){t.hasOwnProperty(e)&&(o[e]=t[e],delete t[e])})),e.isEmpty(o)||(this.__delayedInitAttrs=o),t.version=t.version||i.VERSION,r.call(this,t,n),this.frequencyController=new a(this)},initialize:function(){var t=this;function e(e){t.set("crossInterval",!!e)}this.on("change:extra",(function(t,n,r){n&&(n.crossInterval.unsubscribe(e),n.crossInterval.subscribe(e),t.set("crossInterval",n.crossInterval.value()),t.syncAlertType())})).on("change:crossInterval",(function(t,e,n){var r=t.get("extra");e?t.set("resolution","1"):r&&r.mainSeries()&&t.set("resolution",r.mainSeries().interval)})).on("destroy",(function(){TVSettings.remove(t.TVSettingsPropertiesKey(t.id))})),this.__delayedInitAttrs&&(this.set(this.__delayedInitAttrs),delete this.__delayedInitAttrs)},set:function(t,e,n){var i;return null==t?this:(n=n||{}).noPrepare?r.prototype.set.call(this,t,e,n):("object"==typeof t?(i=t,n=e):(i={})[t]=e,i=this._prepareToSet(i),r.prototype.set.call(this,i,n))},_prepareToSet_soundDuration:function(t){t=parseInt(t);return isNaN(t)&&(t=0),u(t)},_prepareToSet_expired:function(t){return t instanceof Date?t:new Date(1e3*t)},_prepareToSet_extra:function(t){var e=this.get("extra"),n=t&&!(t instanceof i);return e&&t?t=e.update(t):n?(t=new i(t),this.set("scriptDeps",t.getDependencies())):t||(t=null),t},
_prepareToSet_symbolInternal:function(t){if(t)return t},_prepareToSet_alertType:function(t){return"undefined"===t?p(this):t},isPrice:function(){return null!==(this.get("extra")?this.get("extra").price():null)},isDrawing:function(){return!(!this.get("extra")||!this.get("extra").drawing())},isMoving:function(){return this.get("extra")&&"moving"===(this.get("extra").conditionData()||{}).type},isOHLC:function(){var t=this.get("extra");if(t&&t.alertSeries())return"MainSeries"===t.alertSeries().type},isRangeBasedStyle:function(){var t=this.get("extra"),e=t&&t.getMainSeries();return!(!e||"MainSeries"!==e.type()||!e.isRangeBasedStyle())},isComplexSymbol:function(){var t=this.get("symbolInternal");return t!==this.get("symbol")&&t},isPine:function(){var t=this.get("extra"),e=t&&t.alertSeries();return e&&e.alerts},expiredUnix:function(){return Math.round(this.get("expired").getTime()/1e3)},defaultDescription:function(){return l(c(this))},defaultName:function(){return d(c(this))},setDefaultDescription:function(){this.set("description",this.defaultDescription())},state:function(){return this.toJSON()},toJSON:function(){var t,e,n={};for(t in this.attributes)this.attributes.hasOwnProperty(t)&&(e=this.attributes[t],n[t]=e&&"function"==typeof e.toJSON?e.toJSON():e);return n.expired&&(n.expired=this.expiredUnix()),n},prepareToSend:function(){this.syncAlertType();for(var t,e,n=this.toJSON(),r={},i=h.length-1;i>=0;i--)void 0!==(e=n[t=h[i]])&&(r[t]=e),"resolution"===t&&(r[t]=s(e));return r.playSound||(delete r.soundDuration,delete r.soundFile),r.name||delete r.name,r.extra&&(r.extra=JSON.stringify(r.extra)),r},getLocalClone:function(){var t=this.toJSON(),e=f.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{});return new y(e)},saveState:function(){this._oldState=this.state()},restoreState:function(t,e){!(t=t||this._oldState||{}).extra||t.extra instanceof i||(t.extra=new i(t.extra),t.scriptDeps=t.extra.getDependencies()),this.set(t),e||delete this._oldState},getSavedState:function(){var t;return this._oldState&&(t=$.extend({},this._oldState)).extra&&(t.extra=new i(t.extra),t.scriptDeps=t.extra.getDependencies()),t},createTimeFormatted:function(){var t=this.get("createTime");return t?this._formatDate(1e3*t):null},fireTimeFormatted:function(){var t=this.get("fireTime");return t?this._formatDate(1e3*t):null},TVSettingsPropertiesKey:function(){return t=this.id,"chartproperties.alertsProperties."+(t=parseInt(t));var t},getFormatter:function(){var t=this.get("extra");if(t){var e=t.alertSeries();if(e.formatter)return o.deserialize(e.formatter)}return null},syncAlertType:function(){this.set("alertType",p(this))}});t.exports.Alert=y}).call(this,n("F/us"))},A0ZR:function(t,e,n){"use strict";n.r(e),n.d(e,"AlertFrequencyController",(function(){return s}));var r=n("n5al"),i=n("txPx"),o=n("ogJP");const a=Object(i.getLogger)("Alerts.Price.FrequencyController");class s{constructor(t){this._alert=t,t.on("change:autoDeactivation",(t,e)=>{const n=t.get("frequency");if(this._isFireRateValid({frequency:n,autoDeactivation:e}))return
;const r=this._getValidFireRate({autoDeactivation:e});r?t.set("frequency",r.frequency):(a.logError(`Set invalid autoDeactivation: ${e}. Available: ${JSON.stringify(this.getAvailable())}`),this._setAnyValidFireRate())}),t.on("change:frequency",(t,e)=>{this._putFrequencyToExtra();const n=t.get("autoDeactivation");if(this._isFireRateValid({frequency:e,autoDeactivation:n}))return;const r=this._getValidFireRate({frequency:e});r?t.set("autoDeactivation",r.autoDeactivation):(a.logError(`Set invalid frequency: ${e}. Available: ${JSON.stringify(this.getAvailable())}`),this._setAnyValidFireRate())})}getAvailable(){const t=this._alert.get("extra");return(null===(e=null==t?void 0:t.alertSeries())||void 0===e?void 0:e.isTVScriptStrategy)||"alerts"===(null==t?void 0:t.conditionId())?[{autoDeactivation:!1,frequency:"60"}]:(()=>{var e;return Boolean(this._alert.isDrawing()&&"LineToolVertLine"===(null===(e=null==t?void 0:t.drawing())||void 0===e?void 0:e.type))})()?[{autoDeactivation:!0,frequency:"on_first_fire"}]:(()=>this._alert.get("crossInterval"))()?[{autoDeactivation:!0,frequency:"on_first_fire"},{autoDeactivation:!1,frequency:"on_first_fire"}]:(()=>{var e,n;return[null===(e=null==t?void 0:t.alertSeries())||void 0===e?void 0:e.style,null===(n=null==t?void 0:t.mainSeries())||void 0===n?void 0:n.style].filter(o.isInteger).some(r.hasProjection)})()?[{autoDeactivation:!0,frequency:"on_bar_close"},{autoDeactivation:!1,frequency:"on_bar_close"}]:[{autoDeactivation:!0,frequency:"once"},{autoDeactivation:!1,frequency:"on_first_fire"},{autoDeactivation:!1,frequency:"on_bar_close"},{autoDeactivation:!1,frequency:"60"}];var e}switchFrequencies(){const t=this._alert,e=t.get("frequency"),n=t.get("autoDeactivation");if(!0===n){const e=this._getValidFireRate({autoDeactivation:!0});if(e)return void t.set({autoDeactivation:e.autoDeactivation,frequency:e.frequency})}if(!1===n&&"on_first_fire"===e){const e="60",n=this._getValidFireRate({frequency:e});if(n)return void t.set({autoDeactivation:n.autoDeactivation,frequency:e})}if(!1===n){const e=this._getValidFireRate({autoDeactivation:!1});if(e)return void t.set({autoDeactivation:e.autoDeactivation,frequency:e.frequency})}this._isFireRateValid({frequency:e,autoDeactivation:n})||this._setAnyValidFireRate()}_putFrequencyToExtra(){const t=this._alert.get("extra");t&&t.frequency(this._alert.get("frequency"))}_isFireRateValid(t){return this.getAvailable().some(e=>e.frequency===t.frequency&&e.autoDeactivation===t.autoDeactivation)}_getValidFireRate(t){const[e,n]=Object.entries(t)[0],r=this.getAvailable().find(t=>t[e]===n);return void 0===r?null:r}_setAnyValidFireRate(){const t=this.getAvailable()[0];this._alert.set({frequency:t.frequency,autoDeactivation:t.autoDeactivation}),this._putFrequencyToExtra()}}},AZff:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"Constants",(function(){return r})),function(t){t.DrawingIconColor="rgba( 170, 170, 170, 1)",t[t.NameLengthLimit=300]="NameLengthLimit"}(r||(r={}))},CLNU:function(t,e,n){(function(t){TradingView.cleanButAmpersand=function(t,e){var n=e?["&amp;"]:["&"]
;return TradingView.clean(t,e,n)},TradingView.strip_tags=function(t){return t&&t.replace?t.replace(/(<([^>]+)>)/gi,""):t},TradingView.encodeSpread=function(t){return encodeURIComponent(t)},TradingView.clean=function(t,e,n){var r=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],i=t;if(!t||!t.replace)return i;for(var o=0;o<r.length;o++){var a=r[o][0],s=r[o][1];n&&n.indexOf&&-1!==n.indexOf(e?s:a)||(i=e?i.replace(new RegExp(s,"g"),a):i.replace(new RegExp(a,"g"),s))}return i},t&&t.exports&&(t.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})}).call(this,n("YuTi")(t))},GH0z:function(t,e,n){"use strict";n.r(e),n.d(e,"PercentageFormatter",(function(){return s}));var r=n("kcTO"),i=n("Ialn");const o=/\.0+%$/,a=".";class s extends r.PriceFormatter{constructor(t=100){super(t),this.type="percentage"}state(){const t=r.PriceFormatter.prototype.state.call(this);return t.percent=!0,t}parse(t){return t=t.replace("%",""),super.parse(t)}format(t,e,n,r,o=!0){const a=super.format(t,e,n,r,!1)+"%";return o?Object(i.forceLTRStr)(a):a}withoutEndingZeroes(t){if(-1===t.indexOf(a))return t;const e=t.replace(o,"");return e===t?null:e+"%"}static serialize(t){return t.state()}static deserialize(t){return new s(t.priceScale)}}},IVMC:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.reduce((function(t,e,n){return~t.indexOf(e)||t.push(e),t}),[])},t.exports=e.default},IWHC:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"AlertCategory",(function(){return r})),function(t){t.Price="price",t.Screener="screener"}(r||(r={}))},M3fW:function(t,e,n){"use strict";n.r(e),n.d(e,"AlertConditionTokenMapType",(function(){return r})),n.d(e,"getAlertConditionTokenMap",(function(){return u}));n("HbRj");var r,i=n("YFKU"),o=n("Eyy1");!function(t){t[t.MainSeries=0]="MainSeries",t[t.Study=1]="Study",t[t.PineScript=2]="PineScript",t[t.Strategy=3]="Strategy",t[t.PineScriptAlertFunction=4]="PineScriptAlertFunction"}(r||(r={}));const a=Object(i.t)("Upper Bound: {alertChannelUpperBoundaryTitle}, Lower Bound: {alertChannelLowerBoundaryTitle}"),s=t=>Object(i.t)("in {count} bar",{plural:"in {count} bars",count:t}).format({count:t.toString()});function u(t){const e=Object(o.ensureDefined)(t.get("extra")),n=e.getAlertSeries(),i=e.conditionData();if("alerts"===i.type)return{type:r.PineScriptAlertFunction,scriptTitle:n.title({short:!0}),isStrategy:"StudyStrategy"===n.type()};if("StudyStrategy"===n.type())return{type:r.Strategy,strategyTitle:n.title()};if(["pine_script","pine_alertcondition_plot"].includes(i.type))return{type:r.PineScript,conditionTitle:i.title,conditionMessage:i.message};const u=t.getFormatter();function c(t){const e=t.getPlots();return t.title({formatter:u,withPlotTitle:e&&e.length>1})}let l="";switch(i.type){case"moving":const t=e.movingValue(),n=e.movingPeriod();l=i.percents?`${t}% ${s(n)}`:`${u?u.format(t):t} ${s(n)}`;break;case"comparison":if(i.isChannel){const t=c(e.getUpperBand()),n=c(e.getLowerBand())
;l=`(${a.format({alertChannelUpperBoundaryTitle:t,alertChannelLowerBoundaryTitle:n})})`}else l=c(e.getBand())}const d=e.getMainSeries(),p=d?d.title({withInterval:!t.get("crossInterval")}):t.shortSymbol(),f=i.descriptionTitle||i.title;return Object.assign({conditionTitle:f,conditionOptions:l},"MainSeries"===n.type()?{type:r.MainSeries,alertSeries:p}:{type:r.Study,alertSeries:n.title(),mainSeries:p})}},PJXJ:function(t,e,n){"use strict";function r(t=0){return t<1e3?t:t/1e3}n.r(e),n.d(e,"ensureDurationInSeconds",(function(){return r}))},Wt0y:function(t,e,n){"use strict";function r(t=location.host){return-1!==["i18n.tradingview.com","partial.tradingview.com","www.tradingview.com","wwwcn.tradingview.com"].indexOf(t)||-1!==["d33t3vvu2t2yu5.cloudfront.net","dwq4do82y8xi7.cloudfront.net","s.tradingview.com","s3.tradingview.com"].indexOf(t)||t.match(/^[a-z]{2}\.tradingview\.com/)||t.match(/prod-[^.]+.tradingview.com/)?"battle":t.includes("tradingview.com")||t.includes("staging")?"staging":t.match(/webcharts/)?"staging_local":(t.match(/^localhost(:\d+)?$/),"local")}function i(){return"local"===r()}function o(){return"battle"===r()}function a(){return!o()}n.r(e),n.d(e,"environment",(function(){return r})),n.d(e,"isLocal",(function(){return i})),n.d(e,"isProd",(function(){return o})),n.d(e,"isDebug",(function(){return a}))},YG2F:function(t,e,n){"use strict";n.r(e),n.d(e,"getAlertDefaultDescription",(function(){return s}));n("HbRj");var r=n("YFKU"),i=n("M3fW");const o=Object(r.t)("{alertSeries} {alertCondition} {alertConditionOptions} on {chartSeries}"),a=Object(r.t)("{strategyName}: order {{strategy.order.action}} @ {{strategy.order.contracts}} filled on {{ticker}}. New strategy position is {{strategy.position_size}}");function s(t){switch(t.type){case i.AlertConditionTokenMapType.MainSeries:return`${t.alertSeries} ${t.conditionTitle} ${t.conditionOptions}`;case i.AlertConditionTokenMapType.Study:return o.format({alertSeries:t.alertSeries,chartSeries:t.mainSeries,alertCondition:t.conditionTitle,alertConditionOptions:t.conditionOptions});case i.AlertConditionTokenMapType.PineScript:return t.conditionMessage;case i.AlertConditionTokenMapType.PineScriptAlertFunction:return"";case i.AlertConditionTokenMapType.Strategy:return a.format({strategyName:t.strategyTitle})}}},YGq1:function(t,e,n){"use strict";n.r(e),n.d(e,"getAlertType",(function(){return o}));const r=new Set(["study_Overlay","study_Compare","StudyStrategy"]);function i({type:t}){return!r.has(t)&&t.toLowerCase().startsWith("study")}function o(t){if(t.isDrawing())return"drawing";const e=t.get("extra"),n=null==e?void 0:e.alertSeries();return n&&e?n.isTVScriptStrategy?"strategy":e.bandsArray("object").some(i)?"indicator":"price":"price"}},dOnf:function(t,e,n){"use strict";function r(t){let e;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if(t instanceof Date)e=new Date(t.valueOf());else if(Array.isArray(t)){e=[];let n=0;const i=t.length;for(;n<i;n++)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=r(t[n]))}else{e={}
;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=r(t[n]))}return e}n.r(e),n.d(e,"deepCopy",(function(){return r}))},dn9U:function(t,e,n){"use strict";var r=function(){function t(t,e){return e.id||(e.id=t),e}for(var e,n={cross:{title:$.t("Crossing"),type:"comparison"},crosses_from_below:{title:$.t("Crossing Up"),type:"comparison"},crosses_from_above:{title:$.t("Crossing Down"),type:"comparison"},above:{title:$.t("Greater Than"),type:"comparison"},below:{title:$.t("Less Than"),type:"comparison"},enters_channel:{title:$.t("Entering Channel"),isChannel:!0,type:"comparison"},leaves_channel:{title:$.t("Exiting Channel"),isChannel:!0,type:"comparison"},inside_channel:{title:$.t("Inside Channel"),isChannel:!0,type:"comparison"},outside_channel:{title:$.t("Outside Channel"),isChannel:!0,type:"comparison"},moving_up:{title:$.t("Moving Up"),type:"moving"},moving_down:{title:$.t("Moving Down"),type:"moving"},moving_up_percents:{title:$.t("Moving Up %"),descriptionTitle:$.t("Moving Up"),type:"moving",percents:!0},moving_down_percents:{title:$.t("Moving Down %"),descriptionTitle:$.t("Moving Down"),type:"moving",percents:!0}},r=Object.keys(n),i=r.length-1;i>=0;i--)t(e=r[i],n[e]);function o(e){var r,i,o,a,s,u,c={};e&&e.getStrategy()?i=e.prepareAlertConditions():(o=e&&e.drawing(),i=!e||e.getAlertSeries().hasUsualPlots()?n:{},o?u="LineToolVertLine"===o.type?function(t){return"cross"===t.id}:1===o.plots.length?function(t){return!t.isChannel}:2===o.plots.length?function(t){return!!t.isChannel}:function(t){return"comparsion"===t.type}:e&&(e.hasAlertCondition()||e.hasAlertFunction())&&(i=$.extend(!0,{},i,e.prepareAlertConditions()))),r=Object.keys(i);for(var l=0;l<r.length;l++)t(s=r[l],a=i[s]),u&&!u(a)||(c[s]=a);return c}return e=null,{get:o,getData:function(t,e){var r;return(r=e?o(e)[t]:n[t])&&!r.id&&(r.id=t),r},defaults:function(t){return void 0!==t?n[t]:n},ordered:function(t,e){var n,r=o(t),i=["cross","crosses_from_below","crosses_from_above","above","below","enters_channel","leaves_channel","inside_channel","outside_channel","moving_up","moving_down","moving_up_percents","moving_down_percents"],a=["strategy_and_alerts","strategy","alerts"],s=[],u=Object.keys(r);e=e||{};for(var c=[],l=u.length-1;l>=0;l--){var d=r[u[l]];a.includes(d.type)&&c.push(d)}c.sort((function(t,e){return a.indexOf(t.id)-a.indexOf(e.id)})),c.length>0&&s.push(c);var p=[];for(l=u.length-1;l>=0;l--){d=r[u[l]];["pine_script","pine_alertcondition_plot"].includes(d.type)&&p.push(d)}p.sort((function(t,e){return t.title.localeCompare(e.title)})),p.length>0&&s.push(p);var f=t&&t.alertSeries&&t.alertSeries();if(!(f&&f.plots&&0===f.plots.length)){var h=[];for(l=0;l<i.length;l++)n=i[l],r.hasOwnProperty(n)&&h.push(r[n]);h.length>0&&s.push(h)}return e.isGrouped?s:s.flat()}}}();TradingView.AlertConditions=r,t.exports=r},fkD1:function(t,e,n){"use strict";n.r(e),n.d(e,"getAlertDefaultName",(function(){return l})),n.d(e,"getAlertFunctionNameTailLength",(function(){return d})),n.d(e,"sliceAlertName",(function(){return p}));n("HbRj")
;var r=n("YFKU"),i=n("M3fW"),o=n("AZff");const a=Object(r.t)("{title}: Any alert() function call"),s=Object(r.t)("{title}: alert() function calls only"),u=o.Constants.NameLengthLimit-d(a),c=o.Constants.NameLengthLimit-d(s);function l(t){switch(t.type){case i.AlertConditionTokenMapType.MainSeries:case i.AlertConditionTokenMapType.Study:case i.AlertConditionTokenMapType.PineScript:case i.AlertConditionTokenMapType.Strategy:return"";case i.AlertConditionTokenMapType.PineScriptAlertFunction:const e=t.scriptTitle;let n,r;return t.isStrategy?(n=s,r=e.length>c?p(e,c):e):(n=a,r=e.length>u?p(e,u):e),n.format({title:r})}}function d(t){return t.replace("{title}","").length}function p(t,e){return t.substr(0,e-"…".length)+"…"}},ivNn:function(t,e,n){"use strict";function r(t){return Math.round(1e10*t)/1e10}Object.defineProperty(e,"__esModule",{value:!0}),e.alignTo=e.fixComputationError=e.isNaN=e.isInteger=e.isNumber=void 0,e.isNumber=function(t){return"number"==typeof t&&isFinite(t)},e.isInteger=function(t){return"number"==typeof t&&t%1==0},e.isNaN=function(t){return!(t<=0||t>0)},e.fixComputationError=r,e.alignTo=function(t,e){var n=t/e,i=Math.floor(n),o=n-i;return o>2e-10?r(o>.5?(i+1)*e:i*e):t}},nEwK:function(t,e,n){"use strict";n.r(e),n.d(e,"PLACE_HOLDER",(function(){return s})),n.d(e,"VolumeFormatter",(function(){return u}));var r=n("YFKU"),i=n("zXvd"),o=n("ogJP"),a=n("ivNn");const s="---";class u{constructor(t){this.type="volume",this._numericFormatter=new i.NumericFormatter,this._fractionalValues=void 0!==t&&t>0,this._precision=t}state(){return{precision:this._precision}}format(t){if(!Object(o.isNumber)(t))return s;let e="";return t<0&&(e="-",t=-t),t>=1e100?Object(r.t)("N/A"):(!this._fractionalValues||t>=995?t=Math.round(t):this._fractionalValues&&(t=+t.toFixed(this._precision)),t<995?e+this._formatNumber(t):t<999995?e+this._formatNumber(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._formatNumber(t/1e6)+"M"):t<999999999995?(t=1e6*Math.round(t/1e6),e+this._formatNumber(t/1e9)+"B"):(t=1e9*Math.round(t/1e9),e+this._formatNumber(t/1e12)+"T"))}parse(t){if("---"===t)return{error:"not a number",res:!1,value:NaN};const e={K:1e3,M:1e6,B:1e9},n=t.slice(-1);if(e.hasOwnProperty(n)){const r=this._numericFormatter.parse(t.slice(0,-1));return Object(o.isNumber)(r)?{res:!0,value:r*e[n]}:{error:"not a number",res:!1,value:NaN}}{const e=this._numericFormatter.parse(t);return Object(o.isNumber)(e)?{res:!0,value:e}:{error:"not a number",res:!1,value:NaN}}}static serialize(t){return t.state()}static deserialize(t){return new u(t.precision)}_formatNumber(t){return this._fractionalValues&&(t=Object(a.fixComputationError)(t)),this._numericFormatter.format(t).replace(/(\.[1-9]*)0+$/,(t,e)=>e)}}},sDvb:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"AlertExtra",(function(){return p}));var r=n("YFKU").t,i=n("txPx").getLogger("Alerts.Extra"),o=n("dOnf").deepCopy,a=n("23IT").isAlertConditionPlot,s=n("CLNU").cleanButAmpersand,u=n("dTSQ").regExpEscape;TradingView="object"==typeof t?t.TradingView:TradingView||{},
"function"!=typeof TradingView.merge&&(TradingView.merge=function(t,e){for(var n in e)"object"==typeof e[n]&&t.hasOwnProperty(n)?TradingView.merge(t[n],e[n]):t[n]=e[n];return t});var c=n("dn9U"),l=n("EQCO").alertBandFactory,d=n("hY0g");function p(t){this._data={},this.crossInterval=new d,this.update(t)}p.VERSION=21,p.prototype.update=function(t){return t=this._prepareExtraObject(t),p._isValidExtra(t)?(this._data=t||{},this._updateCrossInterval()):i.logError("Wrong alert extra"),this},p.prototype.addDatasourse=function(t,e){this._addDatasourseToJson(this._data,t,e)},p.prototype._addDatasourseToJson=function(t,e,n){(n||t.condition[e])&&(t.condition[e]={id:n.id,plotIndex:n.plotIndex},t.statesForAlert[n.id]=n,n.plotIndex&&delete t.statesForAlert[n.id].plotIndex)},p.prototype.getDependencies=function(){var t={};for(var e in this._data.statesForAlert)if(this._data.statesForAlert.hasOwnProperty(e)){var n=this._data.statesForAlert[e];("Study"===n.type||/^study_\w+/.test(n.type)||"StudyStrategy"===n.type)&&null!=n.studyDependencies&&n.studyDependencies.forEach((function(e){t[e.id]=e}))}return Object.keys(t).map((function(e){return t[e]})).map((function(t){return t.study=t.study.replace(/(\d)$/,"$1!"),t}))},p.prototype.updateDataSourseStates=function(){var t=this,e=this.getAvailableBands().map((function(e){return t._data.condition[e]})).filter((function(t){return!!t})).map((function(t){return t.id}));Object.keys(t._data.statesForAlert).filter((function(t){return e.indexOf(t)<0})).forEach((function(e){delete t._data.statesForAlert[e]}))},p.prototype._prepareExtraObject=function(t){if("string"==typeof t?t=JSON.parse(t):t instanceof p&&(t=t.toJSON()),p._isValidExtra(t))return t;var e=function(e){var n=c.defaults(t.conditionId||"cross");this._addDatasourseToJson(e,"mainSeries",t.mainSeries),this._addDatasourseToJson(e,"alertSeries",t.alertSeries),"moving"===n.type?(e.condition.movValue=Number(t.value),e.condition.movPeriod=Number(t.period)):"comparison"===n.type&&n.isChannel?(this._addDatasourseToJson(e,"upperBand",t.upperBand),this._addDatasourseToJson(e,"lowerBand",t.lowerBand)):"comparison"!==n.type||n.isChannel?["pine_script","pine_alertcondition_plot","strategy"].includes(n.type)||i.logError("[Alerts] Unknown condition type: "+n.type):this._addDatasourseToJson(e,"band",t.band)}.bind(this),n={version:p.VERSION,condition:{id:t.conditionId,fireInfo:t.fireInfo},statesForAlert:{}};return e(n),n},p.prototype.isValid=function(){return p._isValidExtra(this._data)},p._isValidExtra=function(t){var e=!!("object"==typeof t&&null!==t&&t.version>=p.VERSION&&t.statesForAlert&&t.condition&&t.condition.id&&t.condition.alertSeries&&t.condition.fireInfo&&(t.condition.fireInfo.type||t.condition.fireInfo.frequency));if(!e)return e;var n=Object.keys(t.statesForAlert);e=(e=e&&n.indexOf(t.condition.alertSeries.id)>=0)&&(!t.condition.mainSeries||n.indexOf(t.condition.mainSeries.id)>=0);var r=c.defaults(t.condition.id)
;r&&"comparison"===r.type&&!r.isChannel?e=(e=e&&!!t.condition.band)&&n.indexOf(t.condition.band.id)>=0:r&&"comparison"===r.type&&r.isChannel?e=(e=(e=(e=e&&!!t.condition.upperBand)&&!!t.condition.lowerBand)&&n.indexOf(t.condition.upperBand.id)>=0)&&n.indexOf(t.condition.lowerBand.id)>=0:r&&"moving"===r.type&&(e=(e=e&&!!t.condition.movPeriod)&&!!t.condition.movValue);const i=h(Object.values(t.statesForAlert));return i&&(e=e&&function(t){if(!Array.isArray(t))return!1;return t.every(t=>"number"==typeof t||"object"==typeof t&&f.every(([e,n])=>typeof t[e]===n))}(i.plots)),e},p.prototype._prepareToJSON=function(){for(var t=this.bandsObject(),e=Object.keys(t),n=0;n<e.length;n++){var r=t[e[n]];TradingView.isExistent(r.value)&&(r.value=String(r.value))}},p.prototype.toJSON=function(){return this._prepareToJSON(),o(this._data)},p.prototype.toGenAlertJSON=function(t){const e=this._patchDescription(t),n=this.toJSON();return n.message=e,n},p.prototype.state=p.prototype.toJSON,p.prototype.conditionData=function(){var t=this._data&&this._data.condition&&this._data.condition.id;if(t)return c.getData(t,this)},p.prototype.bandsObject=function(t){return this._data.statesForAlert},p.prototype.bandsArray=function(t){var e=this;t=t||"object";return this.getAvailableBands().map((function(n){return e._getSomeBand(n,t)})).filter((function(t){return!!t}))},p.prototype.price=function(t){var e=this,n=e.conditionData();if(!n||"comparison"!==n.type)return null;function r(t,n){var r=e._getSomeBand(t,"object");r&&"Value"===r.type&&void 0!==n&&(r.value=parseFloat(n),e[t](r))}function i(t){var n=e._getSomeBand(t,"object");return n&&!isNaN(n.value)&&void 0!==n.value&&null!==n.value?parseFloat(n.value):null}if(void 0!==t&&(e.conditionData().isChannel?(r("upperBand",t.upperBand||t.upper),r("lowerBand",t.lowerBand||t.lower)):r("band",t.band||t),this._updateCrossInterval()),e.conditionData().isChannel){var o=i("upperBand"),a=i("lowerBand");return null===o||null===a?null:{upper:o,lower:a}}return i("band")},p.prototype.conditionId=function(t,e){if(void 0!==t){this._data.condition.id=t;var n=c.get(this)[t];if(n&&"pine_alertcondition_plot"===n.type){var r=this.alertSeries();r.plotIndex=n.plotIndex,this.alertSeries(r)}e||this._updateCrossInterval()}return this._data.condition.id};p.prototype._patchDescription=function(t){try{const e=["ohlc_open","ohlc_high","ohlc_low","ohlc_close","ohlc_colorer"],n=this.getAlertSeries().getPlots();if(n&&n.length>0){n.filter(t=>"alertcondition"!==t.type).forEach((n,r)=>{if(!e.includes(n.type)){const e=new RegExp(`{{plot\\("${u(s(n.title,!0))}"\\)}}`,"gm");t=t.replace(e,`{{plot_${r}}}`)}});for(let e=n.length;e<=20;e++)t=t.replace(`{{plot_${e}}}`,"null")}}catch(e){i.logError("AlertExtra._patchDescription error: "+e)}return t},p.prototype.getAvailableConditionParams=function(t){return["movPeriod","movValue"]},p.prototype.getAvailableOptionalBands=function(t){return["band","lowerBand","upperBand"]},p.prototype.getAvailableBands=function(t){return["band","lowerBand","upperBand","alertSeries","mainSeries"]},
p.prototype.getAvailableOptionalConditions=function(t){return this.getAvailableOptionalBands().concat(this.getAvailableOptionalBands())},p.prototype.clearOptionalConditions=function(t){var e=this;this.getAvailableOptionalConditions().forEach((function(t){delete e._data.condition[t]})),this.updateDataSourseStates(),t||this._updateCrossInterval()},p.prototype.alertSeries=function(t,e){return void 0!==t&&(this.addDatasourse("alertSeries",t),this.updateDataSourseStates(),e||this._updateCrossInterval(),this.setValidConditionId()),this._getSomeBand("alertSeries","object")},p.prototype.getAlertSeries=function(t){return this._getSomeBand("alertSeries",t)},p.prototype.mainSeries=function(t,e){return void 0!==t&&(this.addDatasourse("mainSeries",t),this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("mainSeries","object")},p.prototype.getMainSeries=function(t){return this._getSomeBand("mainSeries",t)},p.prototype._getSomeBand=function(t,e){var n,r=e||"model",i=this._data.condition[t];if(i)return n=TradingView.merge(this._data.statesForAlert[i.id],i),"object"===r?TradingView.merge({},n):l.create(n)},p.prototype.upperBand=function(t,e){return void 0!==t&&(this.addDatasourse("upperBand",t),delete this._data.condition.band,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("upperBand","object")},p.prototype.getUpperBand=function(t){return this._getSomeBand("upperBand",t)},p.prototype.lowerBand=function(t,e){return void 0!==t&&(this.addDatasourse("lowerBand",t),delete this._data.condition.band,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("lowerBand","object")},p.prototype.getLowerBand=function(t){return this._getSomeBand("lowerBand",t)},p.prototype.band=function(t,e){return void 0!==t&&(this.addDatasourse("band",t),delete this._data.condition.upperBand,delete this._data.condition.lowerBand,this.updateDataSourseStates(),e||this._updateCrossInterval()),this._getSomeBand("band","object")},p.prototype.getBand=function(t){return this._getSomeBand("band",t)},p.prototype.value=function(t,e){return void 0!==t&&(this._data.condition.movValue=Number(t),e||this._updateCrossInterval()),this._data.condition.movValue},p.prototype.movingValue=p.prototype.value,p.prototype.period=function(t,e){return void 0!==t&&(this._data.condition.movPeriod=Number(t),e||this._updateCrossInterval()),this._data.condition.movPeriod},p.prototype.movingPeriod=p.prototype.period,p.prototype._updateCrossInterval=function(){var t=this.getAlertSeries(),e=null!==this.price()&&t&&"MainSeries"===t.type()&&!t.isRangeBasedStyle()&&!t.isSpread();this.crossInterval.setValue(e)},p.prototype.frequency=function(t){return-1!==["once","on_first_fire","on_bar_close","60"].indexOf(t)&&(this._data.condition.fireInfo.frequency=t),this._data.condition.fireInfo.frequency},p.prototype.hasAlertCondition=function(){var t=this.alertSeries();return Boolean(t.plots&&t.plots.some(a)||t.alerts&&t.alerts.conditions)},p.prototype.hasAlertFunction=function(){return Boolean(this.alertSeries().hasAlertFunction)
},p.prototype.prepareAlertConditions=function(){var t=this.alertSeries(),e={};if(!t)return e;const n=Boolean(t.isTVScriptStrategy),i=Boolean(t.hasAlertFunction);if(n&&i)return{strategy_and_alerts:{type:"strategy_and_alerts",title:r("Order fills and alert() function calls")},strategy:{type:"strategy",title:r("Order fills only")},alerts:{type:"alerts",title:r("alert() function calls only")}};if(n)return{strategy:{title:null,type:"strategy"}};if(i&&Object.assign(e,{alerts:{type:"alerts",title:r("Any alert() function call")}}),t.plots)for(var o=0;o<t.plots.length;o++){var s=t.plots[o];if(a(s))e["alertplot_"+o]={title:s.title,message:s.text,type:"pine_alertcondition_plot",plotIndex:o}}if(t.alerts&&t.alerts.conditions)for(var u in t.alerts.conditions)e[u]=t.alerts.conditions[u],e[u].type="pine_script";return e},p.prototype.drawing=function(t){if(t&&t.canHasAlert()){var e=t.stateForAlert(),n=e.plots,r=!!this.conditionData().isChannel;if((1===n.length?!r:r)&&"comparison"===this.conditionData().type)if(1===n.length){var o={};(o=TradingView.merge(o,e)).plotIndex=0,this.band(o)}else{var a={},s={};(a=TradingView.merge(a,e)).plotIndex=0,this.upperBand(a),(s=TradingView.merge(s,e)).plotIndex=1,this.lowerBand(s)}else i.logError("[Alerts] Can't set drawing to alert with current condition")}return h(this.bandsArray())},p.prototype.getStrategy=function(){for(var t=this.bandsArray(),e=0;e<t.length;e++){if(t[e].isTVScriptStrategy)return t[e]}return null},p.prototype.setValidConditionId=function(){var t=this.conditionId(),e=c.get(this);e[t]||this.conditionId(Object.keys(e)[0])},p.prototype.verticalLine=function(){var t=this.drawing();return t&&1===t.plots.length&&t.plots[0].offset1&&t.plots[0].offset1===t.plots[0].offset2?t:null};const f=Object.entries({timestamp:"number",offset1:"number",offset2:"number",price1:"number",price2:"number",extendBackward:"boolean",extendForward:"boolean"});function h(t){return t.find(t=>/^LineTool.*/i.test(t.type))||null}TradingView.AlertExtra=p}.call(this,n("yLpj"))},zXvd:function(t,e,n){"use strict";n.r(e),n.d(e,"NumericFormatter",(function(){return o}));var r=n("kcTO"),i=n("nc0P");class o{constructor(t){this._precision=t}format(t){return(void 0!==this._precision?t.toFixed(this._precision):o.formatNoE(t)).replace(".",r.formatterOptions.decimalSign)}parse(t){const e=t.replace(r.formatterOptions.decimalSign,".");let n=parseFloat(e);return this._precision&&(n=+n.toFixed(this._precision)),n}static formatNoE(t){if(!Number.isFinite(t))return String(t);const e=new i.Big(t);return e.lt(1)?e.toFixed():e.toString()}}}}]);