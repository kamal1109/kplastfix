(window.webpackJsonp=window.webpackJsonp||[]).push([["tv-user-link-popup","chat-widget",549],{"/RHq":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16"><g fill="none" stroke="currentcolor"><path d="M9.52 10.226a5.5 5.5 0 1 0-6.983.048"/><path stroke-linecap="square" d="M4.5 14.4v.601c0 .276.216.499.495.499h2.01a.504.504 0 0 0 .495-.499V14.4m-5-4.9v3.51c0 .27.233.49.503.49h5.994a.494.494 0 0 0 .503-.49V9.5h-7z"/><path d="M3 11.5h6"/></g></svg>'},"5VQP":function(t,e,s){"use strict";s.r(e),s.d(e,"ContextMenuManager",(function(){return i}));var i,o=s("tWVy");!function(t){const e=[];function i(){Object(o.b)()}t.createMenu=async function(t,o={},n){const r=new((await Promise.all([s.e("vendors"),s.e(5),s.e(14),s.e(23),s.e(66),s.e(100),s.e(142),s.e(370),s.e(4),s.e(126),s.e(322),s.e("context-menu-renderer")]).then(s.bind(null,"cbq4"))).ContextMenuRenderer)(t,o,()=>{const t=e.indexOf(r);-1!==t&&e.splice(t,1),void 0!==n&&n()},i);return e.push(r),r},t.hideAll=i,t.getShown=function(){for(let t=0;t<e.length;t++)if(e[t].isShown())return e[t];return null}}(i||(i={}))},"6G1D":function(t,e,s){},"6KyJ":function(t,e,s){"use strict";var i,o=s("q1tI"),n=s("TSYQ"),r=s("K9GE"),a=s("YZ9j");s("O7m7");!function(t){t[t.Initial=0]="Initial",t[t.Appear=1]="Appear",t[t.Active=2]="Active"}(i||(i={}));class l extends o.PureComponent{constructor(t){super(t),this._stateChangeTimeout=null,this.state={state:i.Initial}}render(){const{className:t,color:e="black"}=this.props,s=n(a.item,{[a[e]]:Boolean(e)});return o.createElement("span",{className:n(a.loader,t,this._getStateClass())},o.createElement("span",{className:s}),o.createElement("span",{className:s}),o.createElement("span",{className:s}))}componentDidMount(){this.setState({state:i.Appear}),this._stateChangeTimeout=setTimeout(()=>{this.setState({state:i.Active})},2*r.c)}componentWillUnmount(){this._stateChangeTimeout&&(clearTimeout(this._stateChangeTimeout),this._stateChangeTimeout=null)}_getStateClass(){switch(this.state.state){case i.Initial:return a["loader-initial"];case i.Appear:return a["loader-appear"];default:return""}}}s.d(e,"a",(function(){return l}))},"6YWP":function(t,e,s){"use strict";var i,o;s.r(e),s.d(e,"Size",(function(){return i})),s.d(e,"StarFill",(function(){return o})),function(t){t.Small="small",t.Medium="medium",t.Large="large"}(i||(i={})),function(t){t.Full="full",t.Half="half",t.Empty="empty",t.Hidden="hidden"}(o||(o={}))},"6aJD":function(t,e,s){"use strict";s.r(e);var i=s("APlX");s.d(e,"TVModal",(function(){return i.TVModal})),s.d(e,"isOpenedModals",(function(){return i.isOpenedModals}))},"9Oxe":function(t,e,s){"use strict";(function(t,e){
var i=s("i8i4"),o=s("9uLv"),n=s("e45J").buildUtmQueryStringFromUrlParams,r=s("pN/T").template,a=s("wGN+").openPMDialog,l=s("n2KA").renderBadgeAccount,d=s("LsFU").isTop,c=s("bbtx").isFeaturedBroker,u=s("EhHS").getBadgeAccountTitle,h=s("EhHS").getBadgeAccountName,p=s("HKz3").getBadgeAccountLink,g=s("6YWP").Size,f=s("pn3R").renderStarsRatingElement,m=s("9tJu").getUserProfilePath,v=s("u1Gt").renderDonationButton,_=s("u1Gt").renderFollowButton,b=s("u1Gt").renderMessageButton,w=s("+SlM").sendMessageToUser;!function(){var s,k=$(window),y=$(document);function T(){if(!t.enabled("disable_userlink_popup")){var e,i;s=this;var n=$.browser.msie||/\btrident\b/i.test(navigator.userAgent);y.on("mouseenter",".js-userlink-popup, .userlink, .ch-userlink, .ch-item-userpic",(function(){i&&clearTimeout(i);var t=$(this);i=setTimeout((function(){i=void 0,s.isActiveTarget(t)?s.open():e=$.ajax({url:"/u/"+(t.data("username")||t.text())+"/info/",type:"POST",cache:!n,success:function(e){if(e&&!e.error){t.is('[target="_blank"]')&&(e.hrefTarget="_blank"),s.update(t,e);var i=s.$el[0].querySelector(".js-follow-wrapper");null!==i&&_({container:i,isFollowed:s.data.follow_status,userId:s.data.id});var o=s.$el[0].querySelector(".js-message-wrapper");if(null!==o&&b({container:o,action:function(){runOrSignIn((function(){a(s.data.id,s.data.username)}),{source:"Private message from userlink popup",verifiedPhoneRequired:!0})}}),!e.is_broker){var n={id:e.id,username:e.username,avatars:{small:e.picture_url},is_broker:e.is_broker,badges:e.badges},r=s.$el[0].querySelector(".js-donation-wrapper");null!==r&&v({container:r,donationUserInfo:n,donationKind:"profile_popup",action:function(){s.close()}})}var m=s.$el[0].querySelector(".js-badge-wrapper");if(null!==m){var w=e.badges.filter((function(t){return!(d(t.name)||c(t.name))}));if(w.length>0){var $=h(w);$&&l(m,{name:$,title:u(w),href:p($)})}}if(e.broker_plan&&e.broker_rating){var k=s.$el[0].querySelector(".js-stars-rating-wrapper");f(k,{rating:e.broker_rating,size:g.Medium}).then((function(){s.open()}))}else s.open()}}})}),parseInt(t.data("userlinkpopup-timeout"),10)||o.dur)})).on("mouseleave",".js-userlink-popup, .userlink, .ch-userlink, .ch-item-userpic",(function(){e&&e.abort(),i&&clearTimeout(i),s.close(200)}))}}Modernizr.mobiletouch||(T.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=void 0)},T.prototype.isInDOM=function(){return!!this.$el&&$.contains(document.body,this.$el[0])},T.prototype.getSizes=function(){if(!this.$el)return{width:0,height:0};var t=this.isInDOM(),e=this.$el.hasClass("i-hidden");this.$el.removeClass("i-hidden"),t||this.$el.css("position","fixed").appendTo(document.body);var s={width:this.$el.outerWidth(),height:this.$el.outerHeight()};return t||this.$el.css("position","").detach(),e&&this.$el.addClass("i-hidden"),s},T.prototype.sendMessage=function(){var t=this.$el.find('[name="message-text"]'),e=String(t.val()).replace(/^\s+|\s+$/g,"");e?(w(e,this.data.id),this.close()):t.css("border-color","#E0735E").focus()},
T.prototype.isActiveTarget=function(t){return this.$el&&this.$target&&this.$target.is(t)},T.prototype.isSameUser=function(t){var e=t.data();return e&&this.data&&e.id===this.data.id},T.prototype.update=function(t,s){if(this.isActiveTarget(t)||this.isSameUser(t))return this.clearCloseTimeout(),this;open&&this.close();var i=this;i.$target=t,i.data=s||t.data(),i.data.showButtons=i.data.username!==window.user.username&&!(i.data.banned_permanently||i.data.inactive),i.data.show_add_status_btn=!window.user.status&&is_authenticated,i.data.show_broker_rating_block=i.data.broker_plan&&i.data.broker_rating;var o=n(!1);i.data.profile_link=m({username:i.data.username,is_broker:i.data.is_broker},{query:o});var a=i.data.broker_rating&&i.data.broker_rating.toFixed(2);return i.$el=$(e.render(r,Object.assign({},i.data,{broker_rating:a}))).on("mouseenter",(function(){i.clearCloseTimeout()})).on("mouseleave",(function(t){i.close(i.lastDelay||500)})).on("click","a, .tv-button",(function(){i.close()})),i},T.prototype.open=function(){if(this.clearCloseTimeout(),this.opened||!this.$el)return this;var t=this.$target.closest(".js-userlink-popup-anchor"),e=this.$target[0].getBoundingClientRect(),s=t.length?t[0].getBoundingClientRect().left:e.left-20,i=this.getSizes();s+i.width>k.width()-10&&(s=k.width()-i.width-10);var n={top:e.top-i.height-5,left:s};n.top<0&&(n.top=e.top+this.$target.height()+5),this.$el.css(n).appendTo(document.body).removeClass("i-hidden").addClass("i-opening"),this.$el.find(".js-status").width(this.$el.width());var r=this;return setTimeout((function(){r.$el.addClass("i-opened"),setTimeout((function(){r.$el.removeClass("i-opening")}),o.dur)}),20),this.opened=!0,this},T.prototype.close=function(t){if(t&&"number"==typeof t)return this.closeTimeout=setTimeout(this.close.bind(this),t),this.lastDelay=t,this;if(this.clearCloseTimeout(),!this.opened)return this;this.$el.addClass("i-closing");var e=this;return setTimeout((function(){e.$el&&(e._unmountComponentsAtNodes(),e.$el.remove()),e.$el=e.$target=e.data=void 0,e.opened=!1}),.5*o.dur),this},T.prototype.getPosition=function(){return!!this.$el&&{top:this.$el.offset().top-$(window).scrollTop(),left:this.$el.offset().left-$(window).scrollLeft()}},T.prototype._unmountComponentsAtNodes=function(){var t=this.$el[0].querySelector(".js-badge-wrapper");null!==t&&i.unmountComponentAtNode(t);var e=this.$el[0].querySelector(".js-stars-rating-wrapper");null!==e&&i.unmountComponentAtNode(e)},s=new T)}()}).call(this,s("Kxc7"),s("nbsC"))},APlX:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.TVModal=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};e.isOpenedModals=function(){return 0!==h.length};var o=u(s("9uLv")),n=s("qFKp"),r=s("0YpW"),a=s("KHon"),l=s("c2JX"),d=u(s("6et/")),c=u(s("lxNp"));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])
;return e.default=t,e}let h=[];const p={ajax:{},closingDuration:o.dur/2,fixBodyState:!0,overlayTemplate:'<div class="tv-dialog__overlay"></div>',containerTemplate:'<div class="tv-dialog__modal-wrap"><div class="tv-dialog__modal-container"><div class="tv-dialog__modal-body"></div></div></div>',ajaxErrorTemplate:`<div class="tv-dialog__error js-dialog__close">${window.t("Error")}</div>`};class g extends a.TVDialogAbstract{constructor(t={}){if(super(i({},p,t)),this.$overlay=$(this.options.overlayTemplate),this.$modalWrap=$(this.options.containerTemplate),this.$body=this.$modalWrap.find(".tv-dialog__modal-body").append(this.$el),this.options.closeOnOutsideClick&&this.$overlay.add(this.$modalWrap).click(t=>{this.isEventOut(t)&&this.close()}),this.on("change:zIndex",()=>{this.$overlay.css("z-index",this.zIndex),this.$modalWrap.css("z-index",this.zIndex)}),this.on("destroy",()=>{const t=()=>{this.$overlay.remove(),this.$modalWrap.remove()};this.opened?(this.close(),setTimeout(t,this.options.closingDuration)):t()}),this.on("beforeOpen",()=>{h.push(this)}),this.options.ajax.url){const t=this.options.ajax.beforeSend||$.noop,e=this.options.ajax.success||!1,s=this.options.ajax.error||$.noop;$.extend(this.options.ajax,{beforeSend:()=>{this.trigger("beforeLoading",[this]),this.startSpinner(),t(this)},success:t=>{this.trigger("afterLoading",[this]),this.renderContent(e?e(this,t):t).showContent(),this.trigger("afterLoadingShow",[this])},error:()=>{this.renderContent(this.options.ajaxErrorTemplate),s(this),this.trigger("errorLoading",[this])}})}this.on("error",(t,e)=>{this.$modalWrap[0].getBoundingClientRect().height<this.$content[0].getBoundingClientRect().height&&e.addClass("i-fixed").css({width:this.$el.width()})}),this._keyboardBinderLockId=null}open(){if(this.opened)return;this.opened=!0,this._keyboardBinderLockId=d.disable(),this.options.fixBodyState&&(0,r.setFixedBodyState)(!0),this._hotkeys||(this._hotkeys=c.createGroup({desc:"Modal Dialog",isDisabled:()=>!this.opened,modal:!0}),this.options.closeOnEsc&&this._hotkeys.add({desc:"close",hotkey:27,handler:()=>this.close()}));const t=()=>{this.focus(),this.toTop(),this.trigger("beforeOpen",[this]),$(this.$wrap).append(this.$overlay.addClass("i-hidden i-closed").css("z-index",this.zIndex)).append(this.$modalWrap.addClass("i-hidden i-closed").css("z-index",this.zIndex)),this.$overlay.removeClass("i-hidden"),setTimeout(()=>{this.$overlay.removeClass("i-closed")},20),this.options.ajax.url?this.ajaxRequest=$.ajax(this.options.ajax):this.showContent()};return n.isSafari?setTimeout(()=>t(),50):t(),this}close(){if(this.opened)return this.opened=!1,this._keyboardBinderLockId&&d.enable(this._keyboardBinderLockId),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),this.trigger("beforeClose",[this]),this.ajaxRequest&&(this.ajaxRequest.abort(),delete this.ajaxRequest),this.hideContent(),this.$overlay.addClass("i-closed"),setTimeout(()=>{this.$modalWrap.addClass("i-hidden").detach(),this.$overlay.addClass("i-hidden").detach(),h=t.without(h,this),this.options.fixBodyState&&(0,
r.setFixedBodyState)(!1),this.trigger("afterClose",[this]),this.unfocus(),h.length>0&&h[h.length-1].focus(),this.options.destroyOnClose&&this.destroy()},this.options.closingDuration),this}showContent(){return this.$modalWrap.removeClass("i-hidden"),setTimeout(()=>{this.$modalWrap.removeClass("i-closed")},20),setTimeout(()=>{this.trigger("afterOpen",[this]),this.spinner&&this.stopSpinner()},.75*o.dur+20),this}hideContent(){if(this.$el)return this.$modalWrap.addClass("i-closed"),this.unfocus(),this}startSpinner(){return this.spinner=new l.Spinner("large"),this.spinner.spin(this.$overlay[0]),this}stopSpinner(){if(this.spinner)return this.spinner.stop(),delete this.spinner,this}}e.TVModal=g}).call(this,s("F/us"))},AWsa:function(t,e,s){t.exports={childrenWrapper:"childrenWrapper-YKld8srL",shown:"shown-YKld8srL",loader:"loader-YKld8srL"}},AsAg:function(t,e,s){"use strict";var i;s.d(e,"a",(function(){return i})),function(t){t.TopAll="top:all",t.TopMonth="top:month",t.TopWeek="top:week",t.TopDay="top:day",t.Moderator="moderator",t.ProPremium="pro:pro_premium",t.ProPremiumTrial="pro:pro_premium_trial",t.ProRealTime="pro:pro_realtime",t.ProRealTimeTrial="pro:pro_realtime_trial",t.Pro="pro:pro",t.ProTrial="pro:pro_trial"}(i||(i={}))},C1zv:function(t,e,s){"use strict";var i;s.d(e,"a",(function(){return i})),function(t){t.BrokerExtraFeatured="broker_extra:featured",t.BrokerPlatinum="broker:platinum",t.BrokerGold="broker:gold",t.BrokerSilver="broker:silver"}(i||(i={}))},EhHS:function(t,e,s){"use strict";s.r(e),s.d(e,"getBadgeAccountName",(function(){return n})),s.d(e,"getBadgeAccountTitle",(function(){return r}));var i=s("C1zv"),o=s("AsAg");function n(t){var e;if(0!==t.length)return null===(e=t.find(t=>{return e=t.name,a.has(e);var e}))||void 0===e?void 0:e.name}function r(t){return t.map(t=>t.verbose_name).join(" | ")}const a=new Set(Object.values(Object.assign(Object.assign({},i.a),o.a)))},EmY0:function(t,e,s){"use strict";var i,o=s("mrSG"),n=s("q1tI"),r=s.n(n),a=s("TSYQ"),l=s("PR+g");!function(t){t.Untouched="untouched",t.Unsettled="unsettled",t.Resolved="resolved",t.Rejected="rejected"}(i||(i={}));var d=s("mwqF"),c=s("oiZD"),u=s("zM7N"),h=s("6KyJ"),p=s("AWsa");function g(t){const{onClick:e,children:s,disabled:g,loaderColor:f,showLoader:m=!1}=t,v=Object(o.d)(t,["onClick","children","disabled","loaderColor","showLoader"]),[_,b]=function(t){const[e,s]=Object(n.useState)(i.Untouched),o=Object(l.a)(),r=Object(n.useCallback)((...e)=>{t&&(a(i.Unsettled),t(...e).then(()=>a(i.Resolved)).catch(()=>a(i.Rejected)))},[t]),a=Object(n.useCallback)(t=>{o.current&&s(t)},[]);return[r,e]}(e),[w,$]=Object(n.useState)(!1);Object(n.useEffect)(()=>{b===i.Unsettled&&m?$(!0):$(!1)},[b]);const k=a(p.childrenWrapper,{[p.shown]:!w}),y=a(p.loader,{[p.shown]:w});return r.a.createElement(d.b,Object.assign({},v,{onClick:_,disabled:g||b===i.Unsettled}),r.a.createElement("span",{className:k},s),r.a.createElement(h.a,{className:y,color:f||(c.watchedTheme.value()===u.StdTheme.Light?"white":"gray")}))}s.d(e,"a",(function(){return g}))},FZIs:function(t,e,s){
"use strict";var i;s.d(e,"a",(function(){return i})),function(t){t.Light="light",t.Dark="dark"}(i||(i={}))},HKz3:function(t,e,s){"use strict";s.r(e);var i=s("LsFU");var o=s("bbtx");function n(t){return Object(i.isBadgeUser)(t)?function(t){if(Object(i.isModerator)(t))return"/house-rules/";if(Object(i.isTop)(t))return"/people/";if(Object(i.isProPremium)(t)||Object(i.isProRealtime)(t)||Object(i.isPro)(t)||Object(i.isTrial)(t)){return"/gopro/?source=badge&feature="+t.split(":")[1]}}(t):Object(o.isBadgeBroker)(t)?function(t){return Object(o.isBadgeBrokerWithLink)(t)?"/brokers/":void 0}(t):void 0}s.d(e,"getBadgeAccountLink",(function(){return n}))},IhIr:function(t,e,s){"use strict";s.r(e),s.d(e,"Size",(function(){return i})),s.d(e,"Badge",(function(){return r}));var i,o=s("q1tI"),n=s("TSYQ");s("6G1D");function r(t){const{size:e=i.Medium,href:s,title:r,className:a}=t,l=n("tv-badge","tv-badge--"+e,r&&"apply-common-tooltip",a);return s?o.createElement("a",{href:s,target:"_blank",title:r,className:l}):o.createElement("span",{title:r,className:l})}!function(t){t.Small="small",t.Medium="medium",t.Large="large"}(i||(i={}))},IoBF:function(t,e,s){"use strict";function i(t){return Boolean(window.widgetbar&&window.widgetbar.resizerBridge.fullscreen.value())?0:t}s.d(e,"a",(function(){return i}))},KHon:function(t,e,s){"use strict";s.r(e);var i=s("v2PZ");s.d(e,"TVDialogAbstract",(function(){return i.TVDialogAbstract})),s.d(e,"closeAllDialogs",(function(){return i.closeAllDialogs}))},LsFU:function(t,e,s){"use strict";s.r(e),s.d(e,"isBadgeUserWithTitle",(function(){return n})),s.d(e,"isBadgeUser",(function(){return a})),s.d(e,"isTop",(function(){return l})),s.d(e,"isModerator",(function(){return d})),s.d(e,"isProPremium",(function(){return c})),s.d(e,"isProRealtime",(function(){return u})),s.d(e,"isPro",(function(){return h})),s.d(e,"isTrial",(function(){return p}));var i=s("AsAg");const o=new Set([i.a.Moderator,i.a.TopAll,i.a.TopMonth,i.a.TopWeek,i.a.TopDay,i.a.ProPremiumTrial,i.a.ProRealTimeTrial,i.a.ProTrial]);function n(t){return o.has(t)}const r=new Set(Object.values(i.a));function a(t){return r.has(t)}function l(t){return i.a.TopAll===t||i.a.TopMonth===t||i.a.TopWeek===t||i.a.TopDay===t}function d(t){return i.a.Moderator===t}function c(t){return i.a.ProPremium===t||i.a.ProPremiumTrial===t}function u(t){return i.a.ProRealTime===t||i.a.ProRealTimeTrial===t}function h(t){return i.a.Pro===t||i.a.ProTrial===t}function p(t){return i.a.ProPremiumTrial===t||i.a.ProRealTimeTrial===t||i.a.ProTrial===t}},O7m7:function(t,e,s){},"PR+g":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s("q1tI");const o=()=>{const t=Object(i.useRef)(!1);return Object(i.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t}},PzOn:function(t,e,s){"use strict";s.r(e),s.d(e,"buttonLoader",(function(){return n})),s.d(e,"ButtonLoader",(function(){return r}));s("IwoD");var i=s("IWoC"),o=s("9uLv");function n(t){return new r($(t))}$.fn.tvButtonLoader=Object(i.createTvBlockWithInstance)("tv-button-loader",(function(t){return new r(t)}));class r{
constructor(t){this.$btn=$(t).addClass("tv-button--loader"),0===this.$btn.find(".tv-button__loader").length&&this.$btn.html('<span class="tv-button__text">'+this.$btn.html()+'</span><span class="tv-button__loader"><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span></span>'),this.loading=this.$btn.hasClass("i-loading")}_start(){this.starting=!0,this.$btn.addClass("i-start-load"),this.$btn.trigger("tv-button-loader:start"),setTimeout(()=>{this.loading=!0,this.starting=!1,this._startPromise=!1,this.$btn.addClass("i-loading"),this.$btn.removeClass("i-start-load"),this._stopPromise&&this._stop()},2*o.dur)}start(){this.starting||(this.stopping?this._startPromise=!0:this._start())}_stop(){this.stopping=!0,this.$btn.addClass("i-stop-load"),this.$btn.trigger("tv-button-loader:stop"),setTimeout(()=>{this.loading=!1,this.stopping=!1,this._stopPromise=!1,this.$btn.removeClass("i-loading i-start-load i-stop-load"),this._startPromise&&this._start()},o.dur)}stop(){this.stopping||(this.starting?this._stopPromise=!0:this._stop())}toggle(){this.loading?this.stop():this.start()}contentHtml(t){return t?(this.$btn.find(".tv-button__text").html(t),t):this.$btn.find(".tv-button__text").html()}contentNojQuery(){return this.$btn.get(0)}disable(){this.stop(),this.$btn.addClass("i-disabled")}enable(){this.$btn.removeClass("i-disabled")}}},TYzu:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 15" width="14" height="15"><path fill="none" stroke="currentcolor" stroke-linejoin="round" d="m.5 14.5a5 5 0 0 1 5-5h3a5 5 0 0 1 5 5zm6.5-7a1 1 0 0 1 0-7 1 1 0 0 1 0 7z"/></svg>'},"V14+":function(t,e,s){},VZBT:function(t,e,s){"use strict";s.d(e,"a",(function(){return d})),s.d(e,"b",(function(){return c}));var i=s("mrSG"),o=s("q1tI"),n=s("TSYQ"),r=s("C1zv"),a=s("IhIr"),l=s("bbtx");s("cj3V");function d(t){const{name:e,size:s,className:n,title:r}=t,d=Object(i.d)(t,["name","size","className","title"]);return o.createElement(a.Badge,Object.assign({className:c(e,s,n),title:Object(l.isBadgeBrokerWithTitle)(e)?r:void 0,size:s},d))}function c(t,e=a.Size.Medium,s){return n("tv-badge-broker",t===r.a.BrokerExtraFeatured&&["tv-badge-broker__featured","tv-badge-broker__featured--"+e],t===r.a.BrokerPlatinum&&["tv-badge-broker__platinum","tv-badge-broker__platinum--"+e],t===r.a.BrokerGold&&["tv-badge-broker__gold","tv-badge-broker__gold--"+e],t===r.a.BrokerSilver&&["tv-badge-broker__silver","tv-badge-broker__silver--"+e],s)}},YZ9j:function(t){t.exports=JSON.parse('{"loader":"loader-8x1ZxRwP","item":"item-2-89r_cd","tv-button-loader":"tv-button-loader-23vqS1uY","black":"black-20Ytsf0V","white":"white-1ucCcc2I","gray":"gray-XDhHSS-T","loader-initial":"loader-initial-1deQDeio","loader-appear":"loader-appear-2krFtMrd"}')},aLUT:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11px" height="9px"><path fill="none" fill-rule="evenodd" stroke-width="2" d="M1 3.22l3.415 3.496L10 1"/></svg>'},bbtx:function(t,e,s){"use strict"
;s.r(e),s.d(e,"isBadgeBroker",(function(){return n})),s.d(e,"isFeaturedBroker",(function(){return r})),s.d(e,"isBadgeBrokerWithLink",(function(){return l})),s.d(e,"isBadgeBrokerWithTitle",(function(){return c}));var i=s("C1zv");const o=new Set(Object.values(i.a));function n(t){return o.has(t)}function r(t){return t===i.a.BrokerExtraFeatured}const a=new Set([i.a.BrokerPlatinum,i.a.BrokerGold,i.a.BrokerSilver]);function l(t){return a.has(t)}const d=new Set([i.a.BrokerPlatinum,i.a.BrokerGold,i.a.BrokerSilver]);function c(t){return d.has(t)}},cj3V:function(t,e,s){},jAh7:function(t,e,s){"use strict";s.r(e),s.d(e,"OverlapManager",(function(){return n})),s.d(e,"getRootOverlapManager",(function(){return a}));var i=s("Eyy1");class o{constructor(){this._storage=[]}add(t){this._storage.push(t)}remove(t){this._storage=this._storage.filter(e=>t!==e)}has(t){return this._storage.includes(t)}getItems(){return this._storage}}class n{constructor(t=document){this._storage=new o,this._windows=new Map,this._index=0,this._document=t,this._container=t.createDocumentFragment()}setContainer(t){const e=this._container,s=null===t?this._document.createDocumentFragment():t;!function(t,e){Array.from(t.childNodes).forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&e.appendChild(t)})}(e,s),this._container=s}registerWindow(t){this._storage.has(t)||this._storage.add(t)}ensureWindow(t,e={position:"fixed",direction:"normal"}){const s=this._windows.get(t);if(void 0!==s)return s;this.registerWindow(t);const i=this._document.createElement("div");if(i.style.position=e.position,i.style.zIndex=this._index.toString(),i.dataset.id=t,void 0!==e.index){const t=this._container.childNodes.length;if(e.index>=t)this._container.appendChild(i);else if(e.index<=0)this._container.insertBefore(i,this._container.firstChild);else{const t=this._container.childNodes[e.index];this._container.insertBefore(i,t)}}else"reverse"===e.direction?this._container.insertBefore(i,this._container.firstChild):this._container.appendChild(i);return this._windows.set(t,i),++this._index,i}unregisterWindow(t){this._storage.remove(t);const e=this._windows.get(t);void 0!==e&&(null!==e.parentElement&&e.parentElement.removeChild(e),this._windows.delete(t))}getZindex(t){const e=this.ensureWindow(t);return parseInt(e.style.zIndex||"0")}moveToTop(t){if(this.getZindex(t)!==this._index){this.ensureWindow(t).style.zIndex=(++this._index).toString()}}removeWindow(t){this.unregisterWindow(t)}}const r=new WeakMap;function a(t=document){const e=t.getElementById("overlap-manager-root");if(null!==e)return Object(i.ensureDefined)(r.get(e));{const e=new n(t),s=function(t){const e=t.createElement("div");return e.style.position="absolute",e.style.zIndex=150..toString(),e.style.top="0px",e.style.left="0px",e.id="overlap-manager-root",e}(t);return r.set(s,e),e.setContainer(s),t.body.appendChild(s),e}}},n2KA:function(t,e,s){"use strict";s.r(e),s.d(e,"BadgeAccount",(function(){return c})),s.d(e,"renderBadgeAccount",(function(){return u}));var i=s("mrSG"),o=s("q1tI"),n=s("i8i4"),r=s("o9lb"),a=s("VZBT"),l=s("LsFU"),d=s("bbtx")
;function c(t){const{name:e,href:s}=t,n=Object(i.d)(t,["name","href"]);return Object(l.isBadgeUser)(e)?o.createElement(r.a,Object.assign({name:e,href:s},n)):Object(d.isBadgeBroker)(e)?o.createElement(a.a,Object.assign({name:e,href:s},n)):null}function u(t,e){n.render(o.createElement(c,Object.assign({},e)),t)}},nZrM:function(t,e,s){},nbyR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TVPopup=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},o=c(s("9uLv")),n=s("Nkvk"),r=s("KHon"),a=s("sFgq"),l=s("A6WY"),d=c(s("lxNp"));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}const u=$("body"),h=$(window),p={closeOnClickAtOtherDialogs:!0,draggable:!0,scrollWrap:'<div class="tv-dialog__scroll-wrap">',scrollWrapInner:'<div class="tv-dialog__scroll-wrap-inner">',withScroll:!0};class g extends r.TVDialogAbstract{constructor(t={}){super(i({},p,t)),this.$scrollWrap=this.$content.hasClass("js-dialog__scroll-wrap")?this.$content:this.$content.find(".js-dialog__scroll-wrap"),this.$scrollWrap.length?this.$scrollWrapInner=this.$scrollWrap.children().first():(this.$scrollWrap=this.$content.wrap($(this.options.scrollWrap)).parent(),this.$scrollWrapInner=this.$content.wrap($(this.options.scrollWrapInner)).parent()),this.$actions&&this.$scrollWrap.addClass("i-with-actions"),this.options.withScroll&&(this.scroll=new a.SidebarCustomScroll(this.$scrollWrap,this.$scrollWrapInner),this.scroll.scrolled.subscribe(null,()=>this.trigger("scroll"))),this.$scrollWrap.css("overflow","");const e=this.getDialogId();this.$el.addClass("tv-dialog--popup i-closed i-hidden"),this.options.width&&this.$el.css({width:"calc(100% - 20px)","max-width":this.options.width}),this._hotkeys=d.createGroup({desc:"Dialog",isDisabled:()=>!this.opened,modal:!1}),this.options.closeOnEsc&&this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>this.close()}),this.$el.on("mousedown touchstart",this.toTop.bind(this)),this.options.closeOnOutsideClick&&(this._preventClick=!0,this.on("beforeOpen",()=>{setTimeout(()=>{this.opened&&($(document).on("mousedown touchstart",()=>{this._preventClick=!1}),$(document).on("click.tv-popup-"+e,t=>{if(this._preventClick)return;const e=$(t.target).closest(".js-dialog");(this.options.closeOnClickAtOtherDialogs||0===e.length)&&this.isEventOut(t)&&this.close()}))},0)}),this.on("beforeClose",()=>$(document).off("click.tv-popup-"+e))),this.on("change:zIndex",()=>{this.$el.css("z-index",this.zIndex)}),this.on("destroy",()=>{const t=()=>{this.$el.remove(),this._hotkeys.destroy()};this.opened?(this.close(),setTimeout(t,o.dur/2)):t()})}open(){return this.opened||(this.opened=!0,this.trigger("beforeOpen",[this]),this.$el.appendTo(this.$wrap).removeClass("i-hidden").css((()=>{this.calcHeight();const t=h.height(),e=h.width(),s=this.$el.height(),i=this.$el.width();let o=this.options.position;return o||(o={
top:t/2-s/2,left:e/2-i/2}),o.top>t-s&&(o.top=t-s),o.left>e-i&&(o.left=e-i),o.top<10&&(o.top=10),o.left<10&&(o.left=10),o})()),this.focus(),this.toTop(),this._doOpenAnimation().then(()=>{this.opened&&(this.$el.removeClass("i-closed"),this.options.draggable&&((0,l.lazyJqueryUI)(this.$el).draggable({handle:".js-dialog__drag",cancel:"input, textarea, button, select, option, .js-dialog__no-drag, .js-dialog__close",containment:"window",cursor:"-webkit-grabbing",stop:(t,e)=>{this.trigger("dragEnd",[this])}}),this.$el.find(".js-dialog__drag").addClass("tv-dialog__grab")),this.trigger("afterOpen",[this]))}),h.on("resize.tv-popup-"+this.getDialogId(),()=>{this.calcHeight(),this.fixPos()})),this}close(){if(this.opened)return this.trigger("beforeClose",[this]),this.$el.addClass("i-closed"),this.opened=!1,this._doCloseAnimation().then(()=>{this.opened||((0,l.lazyJqueryUI)(this.$el).draggable("instance").then(t=>{t&&t.destroy()}),this.$el.addClass("i-hidden").detach(),u.css("cursor","auto"),this.trigger("afterClose",[this]),this.options.destroyOnClose&&this.destroy())}),h.off("resize.tv-popup-"+this.getDialogId()),this}hide(){this.$el.addClass("i-hidden")}show(){this.$el.removeClass("i-hidden")}fixPos(){const t=this.$el[0].getBoundingClientRect(),e={};t.bottom>n.mediaState.height-10&&(e.top=n.mediaState.height-10-t.height,e.top<10&&(e.top=10)),t.right>n.mediaState.width-10&&(e.left=n.mediaState.width-10-t.width,e.left<10&&(e.left=10)),(e.top||e.left)&&this.$el.css(e)}calcHeight(){const t=this.$el[0].getBoundingClientRect(),e=this.$scrollWrapInner[0].getBoundingClientRect(),s=this.$scrollWrap[0].getBoundingClientRect();let i=this.options.height&&this.options.height<n.mediaState.height-20?this.options.height:n.mediaState.height-20;this.$scrollWrap.css({height:""}).removeClass("i-scrollable");const o=this.$el[0].getBoundingClientRect();(this.options.height||o.height>i)&&(i-=t.height-s.height,i<60&&(i=60),this.$scrollWrap.css({height:i})),this.options.withScroll&&this.scroll.resize();const r=i<e.height;r||this.$scrollWrapInner.css("top",0),this.$scrollWrap.toggleClass("i-scrollable",r),this.$actions&&this.$actions.toggleClass("tv-dialog__section--actions_with-border",r)}updateScroll(){this.scroll&&(this.scroll.updateScroll(),this.scroll.updateScrollBar())}scrollToStart(){this.scroll&&this.scroll.scrollToStart()}_doOpenAnimation(){return Promise.resolve()}_doCloseAnimation(){return Promise.resolve()}}e.TVPopup=g},"o4+M":function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15"><g fill="none"><path d="M-5-5h24v24H-5z"/><path stroke="currentcolor" stroke-linejoin="round" d="M.5 7.5h4v7h-4zm4-7h4v14h-4zm4 5h4v9h-4z"/></g></svg>'},o9lb:function(t,e,s){"use strict";s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return d}));var i=s("mrSG"),o=s("q1tI"),n=s("TSYQ"),r=s("LsFU"),a=s("IhIr");s("w78M");function l(t){const{name:e,size:s,className:n,title:l}=t,c=Object(i.d)(t,["name","size","className","title"]);return o.createElement(a.Badge,Object.assign({className:d(e,s,n),
title:Object(r.isBadgeUserWithTitle)(e)?l:void 0,size:s},c))}function d(t,e=a.Size.Medium,s){return n("tv-badge-user",Object(r.isProPremium)(t)&&["tv-badge-user__pro-premium","tv-badge-user__pro-premium--"+e],Object(r.isProRealtime)(t)&&["tv-badge-user__pro-realtime","tv-badge-user__pro-realtime--"+e],Object(r.isPro)(t)&&["tv-badge-user__pro","tv-badge-user__pro--"+e],Object(r.isTop)(t)&&["tv-badge-user__top","tv-badge-user__top--"+e],Object(r.isModerator)(t)&&["tv-badge-user__moderator","tv-badge-user__moderator--"+e],Object(r.isTrial)(t)&&"tv-badge-user--trial",s)}},"pN/T":function(t,e,s){"use strict";s.r(e),s.d(e,"template",(function(){return r}));s("YFKU");var i=s("TYzu"),o=s("/RHq"),n=s("o4+M")
;const r=`<div class="tv-user-link-popup i-hidden" data-id="{{ id }}">\n\t\t<div class="tv-user-link-popup__general">\n\t\t\t<a href="{{ profile_link }}" class="tv-user-link-popup__avatar"{{#hrefTarget}} target="{{hrefTarget}}"{{/hrefTarget}}>\n\t\t\t\t<img src="{{mid_picture_url}}" alt="" class="tv-user-link-popup__avatar-img">\n\t\t\t</a>\n\t\t\t<div class="tv-user-link-popup__profile">\n\t\t\t\t<div class="tv-user-link-popup__name">\n\t\t\t\t\t<a href="{{ profile_link }}" class="tv-user-link-popup__name-link apply-overflow-tooltip"{{#hrefTarget}} target="{{hrefTarget}}"{{/hrefTarget}}>{{ username }}</a>\n\t\t\t\t\t<span class="tv-user-link-popup__badge-wrapper js-badge-wrapper"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="tv-user-link-popup__info">\n\t\t\t\t\t{{#show_broker_rating_block}}\n\t\t\t\t\t<span class="tv-user-link-popup__rating-number">{{ broker_rating }}</span>\n\t\t\t\t\t<span class="js-stars-rating-wrapper"></span>\n\t\t\t\t\t{{/show_broker_rating_block}}\n\t\t\t\t\t{{^broker_plan}}\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--users">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="${window.t("Followers")}">${i}</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ followers_count }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--comment">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="${window.t("Ideas")}">${o}</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ charts_count }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="tv-user-link-popup__info-item tv-user-link-popup__info-item--chart">\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-icon apply-common-tooltip" title="${window.t("Reputation")}">\n\t\t\t\t\t\t\t${n}</span>\n\t\t\t\t\t\t<span class="tv-user-link-popup__info-value apply-overflow-tooltip">{{ reputation }}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t{{/broker_plan}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t{{#status}}\n\t\t\t<div class="tv-user-link-popup__status js-status">{{ status }}</div>\n\t\t{{/status}}\n\t\t{{#showButtons}}\n\t\t\t<div class="tv-user-link-popup__actions">\n\t\t\t\t<span class="tv-user-link-popup__button js-follow-wrapper"></span>\n\t\t\t\t<span class="tv-user-link-popup__button js-message-wrapper" data-username="{{ username }}" data-id="{{ id }}"></span>\n\t\t\t\t<span class="tv-user-link-popup__button js-donation-wrapper"></span>\n\t\t\t</div>\n\t\t{{/showButtons}}\n\t</div>`},pn3R:function(t,e,s){"use strict";function i(t,e){return Promise.all([s.e(220),s.e("stars-rating-element")]).then(s.bind(null,"SNgk")).then(s=>s.renderStarsRatingElementImpl(t,e))}s.r(e),s.d(e,"renderStarsRatingElement",(function(){return i}))},tKRU:function(t,e,s){"use strict";var i=s("nbyR");s.d(e,"a",(function(){return i.TVPopup}))},tWVy:function(t,e,s){"use strict";s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){
return n}));var i=s("aIyQ");const o=new(s.n(i).a);function n(){o.fire()}},u1Gt:function(t,e,s){"use strict";s.r(e),s.d(e,"renderDonationButton",(function(){return u})),s.d(e,"renderFollowButton",(function(){return h})),s.d(e,"renderMessageButton",(function(){return p}));var i=s("q1tI"),o=s.n(i),n=s("i8i4"),r=s.n(n),a=s("YFKU"),l=s("4Fgl"),d=s("Gx5W"),c=s("mwqF");function u(t){const{container:e,donationUserInfo:s,action:i,donationKind:n,targetObjectId:a}=t;r.a.render(o.a.createElement(l.a,{donationUserInfo:s,action:i,donationKind:n,targetObjectId:a}),e)}function h(t){const{container:e,isFollowed:s,userId:i}=t;r.a.render(o.a.createElement(d.a,{isFollowed:s,authorId:i,intent:"success",appearance:"stroke"}),e)}function p(t){const{container:e,action:s}=t;r.a.render(o.a.createElement(c.b,{intent:"primary",appearance:"stroke",onClick:s},a.t("Message")),e)}},uo4K:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'},v2PZ:function(t,e,s){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.TVDialogAbstract=void 0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t};e.closeAllDialogs=function(){h.forEach(t=>t.close())};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}(s("9uLv"));s("PzOn");var r=d(s("xZmJ"));s("nZrM"),s("nec0"),s("IwoD");var a=d(s("4O8T")),l=s("jAh7");function d(t){return t&&t.__esModule?t:{default:t}}let c,u=0,h=[];const p=$(document),g={closeOnEsc:!0,closeButton:!0,focusFirstControl:!0,closeOnOutsideClick:!0,closeButtonAddClass:"",focusClass:"i-focused",template:'<div class="tv-dialog" tabindex="-1">',errorTemplate:'<div class="tv-dialog__error i-slided{{# errorMod }} tv-dialog__error--{{ errorMod }}{{/ errorMod }}">{{{ error }}}</div>',titleTemplate:'<div class="tv-dialog__section tv-dialog__section--title js-dialog__drag"><div class="js-title-text tv-dialog__title">{{{ title }}}</div></div>',contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border">',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',closeButtonTemplate:`<div class="tv-dialog__close js-dialog__close">${s("uo4K")}</div>`,helpButtonTemplate:'<a href="{{{ link }}}" target="_blank" class="tv-dialog__help apply-common-tooltip" title="{{{ title }}}"></a>',helpActionsMod:"tv-dialog__section--actions_with-help"},f={default:"tv-button tv-button--default",primary:"tv-button tv-button--primary",success:"tv-button tv-button--success",danger:"tv-button tv-button--danger",warning:"tv-button tv-button--warning",link:"tv-button tv-button--link",
checkbox:"tv-control-checkbox tv-control-checkbox--in-actions","default-ghost":"tv-button tv-button--default_ghost","primary-ghost":"tv-button tv-button--primary_ghost","success-ghost":"tv-button tv-button--success_ghost","danger-ghost":"tv-button tv-button--danger_ghost","warning-ghost":"tv-button tv-button--warning_ghost"},m={_default:'<div data-name="{{ name }}" class="js-dialog__action-click js-dialog__no-drag {{ class }}">{{ text }}</div>',"submit-primary":'<button type="submit" class="tv-button tv-button--primary">{{ text }}</button>',"submit-success":'<button type="submit" class="tv-button tv-button--success">{{ text }}</button>'};class v extends a.default{constructor(e={}){if(super(),this.manager=e.manager||(0,l.getRootOverlapManager)(e.ownerDocument),this._id=u++,this.loadingActions=[],this.disabledActions=[],this.firstFocusControl=null,this.options=o({},g,e),this.$el=$(t.render(this.options.template,{title:this.options.title,closeButton:this.options.closeButton})),this.$el.addClass("js-dialog"),this.el=this.$el[0],this.options.dataset)for(const[t,s]of Object.entries(this.options.dataset))"string"==typeof s&&this.el.setAttribute("data-"+t,s);for(this.options.addClass&&this.$el.addClass(this.options.addClass),this.options.width&&this.$el.css({width:"100%","max-width":this.options.width}),this.on("beforeOpen",()=>{this.$wrap=this.manager.ensureWindow(this._id)}),this.on("afterClose",()=>{this.$wrap=null,this.manager.unregisterWindow(this._id)}),this.options.title&&(this.$title=$(t.render(this.options.titleTemplate,{title:this.options.title})).appendTo(this.$el)),this.$content=$(this.options.contentWrapTemplate).appendTo(this.$el),this.$contentIn=this.$content;this.$contentIn.length;)this.$contentIn=this.$contentIn.children();if(this.$contentIn=this.$contentIn.end(),this.options.content&&this.renderContent(this.options.content),(this.options.actions||this.options.help)&&(this.$content.hasClass("tv-dialog__section")&&this.$content.addClass("tv-dialog__section--no-padding_bottom"),this.$actions=$(this.options.actionsWrapTemplate).appendTo(this.$el)),this.options.actions){this.actions={},this.$el.on("click touchend",".js-dialog__action-click",t=>{t.preventDefault(),this.actionDispatcher($(t.currentTarget).data("name"))});for(let e=this.options.actions.length-1;e>=0;e--){const s=this.options.actions[e];if(s.type||(s.type="default"),s.class||(s.class=f[s.type]?f[s.type]:f.default),"checkbox"===s.type){const t=new r.default({labelRight:s.text,name:s.name,checked:s.checked});this.actions[s.name]=t.$el.appendTo(this.$actions),this.actions[s.name].on("change",()=>{setTimeout(()=>this.actionDispatcher(s.name,t.checked))})}else this.actions[s.name]=$(t.render(s.template?s.template:m[s.type]||m._default,s,s)).appendTo(this.$actions);if(s.method&&"function"==typeof this[s.method]&&this.on("action:"+s.name,this[s.method].bind(this)),s.addClass&&this.actions[s.name].addClass(s.addClass),s.key){let t;if("string"==typeof s.key&&s.key.split("+").length>1){let e=[];const i=s.key.split("+");t=t=>{e=[]};const o=t=>{
const o=""+t.keyCode;-1!==i.indexOf(o)&&e.indexOf(o)&&e.push(o),this._focused&&e.length===i.length&&(e=[],this.actionDispatcher(s.name))};this.on("afterOpen",()=>{p.on("keydown",o),p.on("keyup",t)}),this.on("beforeClose",()=>{p.off("keydown",o),p.off("keyup",t)})}else{const e=$.isArray(s.key)?s.key:[s.key];t=t=>{!t.isDefaultPrevented()&&this._focused&&-1!==e.indexOf(t.keyCode)&&this.actionDispatcher(s.name)},this.on("afterOpen",()=>p.on("keyup",t)),this.on("beforeClose",()=>p.off("keyup",t))}}}}if(this.options.help&&$(t.render(this.options.helpButtonTemplate,this.options.help)).prependTo(this.$actions.addClass(this.options.helpActionsMod)),this.options.closeButton){const t=$(this.options.closeButtonTemplate);t.addClass(this.options.closeButtonAddClass||"");let e=this.$el;1===this.$el.find(".js-close-button-place").length&&(e=this.$el.find(".js-close-button-place")),t.appendTo(e)}this.setZIndex(110+h.length),e.errorMod&&(this.errorMod=e.errorMod),this.on("afterOpen",()=>{this.$el.focus(),this.options.focusFirstControl&&!Modernizr.mobiletouch&&(this.firstFocusControl||this.$el.find('input:not([type="hidden"]), textarea').first()).focus()}),this.$el.on("click",".js-dialog__close",this.close.bind(this)),this.$el.on("mousedown touchstart",this.focus.bind(this)),h.push(this)}renderContent(t){return this.$contentIn.html("function"==typeof t?t(this):t),this}setDestroyOnClose(t){this.options.destroyOnClose=t}setZIndex(t){return this.zIndex=t,this.trigger("change:zIndex",[this]),this}toTop(){for(let t=h.length-1;t>=0;t--)h[t].zIndex>this.zIndex&&h[t].setZIndex(h[t].zIndex-1);return this.setZIndex(110+h.length),this.manager.moveToTop(this._id),this._hotkeys&&this._hotkeys.promote(),this}isEventOut(t){if(this.options.isClickOutFn){const e=this.options.isClickOutFn(t);if(void 0!==e)return e}let e=!0;const s=$(t.target);return s.get(0)!==this.$el.get(0)&&($(">*",this.$el).each((function(){s.get(0)===$(this).get(0)&&(e=!1),0===s.closest("HTML",$(this).get(0)).length&&(e=!1)})),e)}focus(){c&&c!==this&&c.unfocus(),this._setFocused(),this._focused=!0,this.$el.addClass(this.options.focusClass),this.trigger("focus",[this]),setTimeout(()=>{p.on("mousedown.tv-dialog-unfocus-"+this._id,t=>{this.isEventOut(t)&&(this.unfocus(),p.off("mousedown.tv-dialog-unfocus-"+this._id))})},20)}_setFocused(){c!==this&&(c=this)}_setUnfocused(){c===this&&(c=void 0)}unfocus(){c===this&&(this._setUnfocused(),this._focused=!1,this.$el.removeClass(this.options.focusClass).find(":focus").blur(),this.trigger("unfocus",[this]))}isFocused(){return this._focused}setTitle(t,e=!1){return this.$title.toggleClass("tv-dialog__section--one-line apply-overflow-tooltip",e),this.$title.html(t),this}setTitleText(t){this.$title.find(".js-title-text").text(t)}actionDispatcher(t,...e){this.disabledActions.includes(t)||this.loadingActions.includes(t)||this.trigger("action:"+t,[this,...e])}toggleAction(t,e){return e||this.disabledActions.includes(t)?e&&this.disabledActions.includes(t)&&(this.disabledActions=i.without(this.disabledActions,t)):this.disabledActions.push(t),
this.actions[t].toggleClass("i-disabled",!e),this}actionLoader(t,e="init"){return this.actions[t].tvButtonLoader(e),"init"===e&&(this.actions[t].off("tv-button-loader:start.dialog-action").on("tv-button-loader:start.dialog-action",()=>{this.loadingActions.push(t)}),this.actions[t].off("tv-button-loader:stop.dialog-action").on("tv-button-loader:stop.dialog-action",()=>{this.loadingActions=i.without(this.loadingActions,t)})),this}error(e){const s=$(t.render(this.options.errorTemplate,{error:e,errorMod:this.errorMod})).appendTo(this.$el);return setTimeout(()=>s.removeClass("i-slided"),20),p.one("touchstart mousedown keydown",()=>{s.addClass("i-slided"),setTimeout(()=>s.remove(),.75*n.dur)}),this.trigger("error",[this,s]),this}destroy(){this.$wrap=null,this.manager.unregisterWindow(this._id),this._hotkeys&&this._hotkeys.destroy(),h=i.without(h,this);for(let t=0;t<h.length;t++)h[t].setZIndex(110+t);this.trigger("destroy",[this])}isOpened(){return Boolean(this.opened)}getDialogId(){return this._id}}e.TVDialogAbstract=v}).call(this,s("nbsC"),s("F/us"))},w78M:function(t,e,s){}}]);