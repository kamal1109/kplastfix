(window.webpackJsonp=window.webpackJsonp||[]).push([["floating-toolbars"],{"+KIV":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M8 9.5H6.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V20m-8-1.5h11a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1z"/></svg>'},"+l/S":function(e,t,o){},"/yp2":function(e,t,o){"use strict";o.r(t),o.d(t,"getTemplates",(function(){return i})),o.d(t,"setTemplates",(function(){return r})),o.d(t,"addTemplate",(function(){return a})),o.d(t,"startRemoveTemplate",(function(){return s})),o.d(t,"removeTemplate",(function(){return l})),o.d(t,"saveTemplate",(function(){return c})),o.d(t,"loadTemplate",(function(){return u})),o.d(t,"applyDefaults",(function(){return d}));var n=o("7/Mh");function i(e,t){return{type:n.c,toolName:e,callback:t}}function r(e,t){return{type:n.g,templates:t,toolName:e}}function a(e,t){return{type:n.a,templateName:t,toolName:e}}function s(e,t){return{type:n.h,templateName:t,toolName:e}}function l(e,t){return{type:n.e,templateName:t,toolName:e}}function c(e,t,o){return{type:n.f,templateName:t,toolName:e,content:o}}function u(e,t,o){return{type:n.d,toolName:e,templateName:t,callback:o}}function d(e,t){return{type:n.b,model:e,source:t}}},"0fuu":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" fill="none"><path stroke="currentColor" d="M13.5 6.5l-3-3-7 7 7.59 7.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82L13.5 6.5zm0 0v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v6"/><path fill="currentColor" d="M0 16.5C0 15 2.5 12 2.5 12S5 15 5 16.5 4 19 2.5 19 0 18 0 16.5z"/><circle fill="currentColor" cx="9.5" cy="9.5" r="1.5"/></svg>'},"2A9e":function(e){e.exports=JSON.parse('{"button":"button-1iktpaT1","content":"content-2PGssb8d","noOutline":"noOutline-d9Yp4qvi","appearance-default":"appearance-default-dMjF_2Hu","intent-primary":"intent-primary-1-IOYcbg","intent-success":"intent-success-25a4XZXM","intent-default":"intent-default-2ZbSqQDs","intent-warning":"intent-warning-24j5HMi0","intent-danger":"intent-danger-1EETHCla","appearance-stroke":"appearance-stroke-12lxiUSM","appearance-text":"appearance-text-DqKJVT3U","appearance-inverse":"appearance-inverse-r1Y2JQg_","size-s":"size-s-3mait84m","size-m":"size-m-2G7L7Qat","size-l":"size-l-2NEs9_xt","size-p":"size-p-3D4rn3v0","full-width":"full-width-1wU8ljjC","with-icon":"with-icon-yumghDr-","icon":"icon-1grlgNdV"}')},"2EWL":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M8.5 6a3.5 3.5 0 0 0-2.926 5.422 8.527 8.527 0 0 1 4.848-4.848A3.482 3.482 0 0 0 8.5 6zM4 9.5c0 1.19.463 2.274 1.218 3.079A8.5 8.5 0 0 0 13.5 23h.5v-1h-.5a7.5 7.5 0 1 1 7.5-7.5v.5h1v-.5a8.53 8.53 0 0 0-.218-1.921 4.5 4.5 0 0 0-6.36-6.36 8.527 8.527 0 0 0-3.843-.001A4.5 4.5 0 0 0 4 9.5zm12.578-2.926a8.527 8.527 0 0 1 4.848 4.848 3.5 3.5 0 0 0-4.848-4.848zM13 14V9h1v6h-4v-1h3zm6 6h-4v1h4v4h1v-4h4v-1h-4v-4h-1v4z"/></svg>'},
"2F1E":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 4" width="18" height="4"><rect width="18" height="4" fill="currentColor" rx="2"/></svg>'},"39J6":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("q1tI"),i=o("6KyJ"),r=o("Oy6E");function a(e){return n.createElement("div",{className:r.spinnerWrap},n.createElement(i.a,null))}},"4vL2":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("TSYQ");function i(e,t){const{intent:o="primary",size:i="m",appearance:r="default",useFullWidth:a=!1,tabIndex:s=0,icon:l,className:c}=t;return n(c,e.button,e["size-"+i],e["intent-"+o],e["appearance-"+r],a&&e["full-width"],-1===s&&e.noOutline,l&&"s"!==i&&e["with-icon"])}},"5hRh":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("q1tI");const i=e=>{const[t,o]=Object(n.useState)(e.value());return Object(n.useEffect)(()=>{const t=e=>{o(e.value())};t(e);const n={};return e.subscribe(n,t),()=>e.unsubscribe(n,t)},[e]),t}},"7/Mh":function(e,t,o){"use strict";function n(e){return"LINE_TOOL_TEMPLATE__"+e}o.d(t,"c",(function(){return i})),o.d(t,"g",(function(){return r})),o.d(t,"h",(function(){return a})),o.d(t,"e",(function(){return s})),o.d(t,"f",(function(){return l})),o.d(t,"a",(function(){return c})),o.d(t,"d",(function(){return u})),o.d(t,"b",(function(){return d}));const i=n("GET_TEMPLATES"),r=n("SET_TEMPLATES"),a=n("START_REMOVE_TEMPLATE"),s=n("REMOVE_TEMPLATE"),l=n("SAVE_TEMPLATE"),c=n("ADD_TEMPLATE"),u=n("LOAD_TEMPLATE"),d=n("APPLY_DEFAULTS")},C7ts:function(e,t,o){"use strict";o.r(t),o.d(t,"TemplateButton",(function(){return g}));var n=o("mrSG"),i=o("q1tI"),r=o.n(i),a=o("Iivm"),s=o("YFKU"),l=o("JWMC"),c=o("2uTr"),u=o("82wv"),d=o("IAAr"),h=o("7KDR"),p=o("L/Ed"),m=o("39J6"),b=o("R1RK");function g(e){const{model:t,onRestore:o,onSave:g,isDrawingFinished:v,className:f}=e,_=Object(n.d)(e,["model","onRestore","onSave","isDrawingFinished","className"]),[y,w]=Object(i.useState)(!1),[C,T]=Object(i.useState)(null),x=Object(i.useCallback)(()=>{const e=JSON.stringify(g());t.showSaveDialog((function(o){t.saveTemplate(o,e)}))},[t,g]),S=Object(i.useMemo)(()=>{const e=[];return v&&e.push(new h.Action({label:Object(c.appendEllipsis)(Object(s.t)("Save Drawing Template As")),onExecute:x})),e.push(new h.Action({label:Object(s.t)("Apply Default Drawing Template"),onExecute:o})),y?e.push(new h.Action({label:r.a.createElement(m.a,null),fullWidthLabel:!0})):!y&&(null==C?void 0:C.length)&&(e.push(new h.Separator),e.push(...C.map(e=>new h.Action({label:e,onExecute:()=>function(e){void 0!==e&&t.loadTemplate(e)}(e),showToolboxOnHover:!0,toolbox:{type:p.ToolboxType.Delete,action:()=>t.deleteAction(e)}})))),e},[g,o,C,t,v,y]);return r.a.createElement(u.b,Object.assign({title:Object(s.t)("Templates"),content:r.a.createElement(a.a,{icon:b}),onOpen:function(){w(!0),t.templatesLoaded().then(()=>{const e=t.getData();T(e),w(!1)}),Object(l.trackEvent)("GUI","Context action on drawings","Templates")},arrow:!1,className:f,"data-name":"templates",menuDataName:"templates-menu"
},_),r.a.createElement(d.a,{items:S}))}},EvtC:function(e,t,o){e.exports={button:"button-2YcRd2gv"}},HWhk:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fillRule="evenodd" clipRule="evenodd" d="M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM19 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"/></svg>'},IhRv:function(e,t,o){"use strict";o.r(t),o.d(t,"ColorPickerButton",(function(){return v}));var n=o("q1tI"),i=o.n(n),r=o("TSYQ"),a=o.n(r),s=o("Eyy1"),l=o("Iivm"),c=o("eJTA"),u=o("Tmoa"),d=o("V3OP"),h=o("htM8"),p=o("wLjq"),m=o("82wv"),b=o("5hRh"),g=o("X1vi");function v(e){const{property:t,icon:o,model:r,title:v,className:f}=e,_=Object(b.a)(t),y=Object(n.useRef)(null),w=_?Object(c.parseRgba)(_)[3]:void 0,C=""===_,T=String(O()).toLowerCase()===p.c,[x,S,P]=Object(d.a)();return i.a.createElement(m.b,{className:f,content:i.a.createElement("div",{className:g.wrap},i.a.createElement(l.a,{className:g.icon,icon:o}),i.a.createElement("div",{className:g.colorBg},i.a.createElement("div",{className:a()(g.color,C&&g.multicolor,T&&g.white),style:C?void 0:{backgroundColor:_}}))),arrow:!1,title:v,ref:y,"data-name":e["data-name"],menuDataName:e["data-name"]+"-menu"},i.a.createElement(h.a,{color:O(),opacity:w,onColorChange:function(e,t){const o=_?Object(u.alphaToTransparency)(Object(c.parseRgba)(_)[3]):0;E(Object(u["generateColor"])(String(e),o,true)),t||Object(s.ensureNotNull)(y.current).close()},onOpacityChange:function(e){E(Object(u.generateColor)(_,Object(u.alphaToTransparency)(e),!0))},selectOpacity:void 0!==w,selectCustom:!0,customColors:x,onAddColor:function(e){S(e),Object(s.ensureNotNull)(y.current).close()},onRemoveCustomColor:P}));function O(){return _?Object(c.rgbToHexString)(Object(c.parseRgb)(_)):null}function E(e){r.setProperty(t,e,v)}}},"LC+v":function(e,t,o){"use strict";o.r(t);var n=o("ANjH"),i=o("rRWa"),r=o("5rFJ"),a=o("7/Mh"),s=o("txPx"),l=o("/yp2");function c(e,t){return t}var u=o("zUrt");const d=Object(s.getLogger)("Chart.LineToolTemplatesList");function h(e,t){return t}function*p(){for(;;){const{toolName:t,templateName:o,content:n}=h(a.f,yield Object(r.i)(a.f));try{yield Object(r.b)(u.backend.saveDrawingTemplate,t,o,n),yield Object(r.g)(Object(l.addTemplate)(t,o))}catch(e){d.logWarn(e)}}}function*m(){for(;;){const{toolName:t,templateName:o}=h(a.h,yield Object(r.i)(a.h));try{yield Object(r.b)(u.backend.removeDrawingTemplate,t,o),yield Object(r.g)(Object(l.removeTemplate)(t,o))}catch(e){d.logWarn(e)}}}function*b(){for(;;){const{toolName:t,callback:o}=h(a.c,yield Object(r.i)(a.c));try{const e=c(u.backend.getDrawingTemplates,yield Object(r.b)(u.backend.getDrawingTemplates,t));yield Object(r.g)(Object(l.setTemplates)(t,e)),o&&o()}catch(e){d.logWarn(e)}}}function*g(){for(;;){const{toolName:t,templateName:o,callback:n}=h(a.d,yield Object(r.i)(a.d));try{
const e=c(u.backend.loadDrawingTemplate,yield Object(r.b)(u.backend.loadDrawingTemplate,t,o));n&&n(e)}catch(e){d.logWarn(e)}}}function*v(){for(;;){const{model:t,source:o}=h(a.b,yield Object(r.i)(a.b));try{yield Object(r.b)([t,t.restorePropertiesForSource],o)}catch(e){d.logWarn(e)}}}function*f(){yield Object(r.a)([Object(r.b)(b),Object(r.b)(p),Object(r.b)(m),Object(r.b)(g),Object(r.b)(v)])}const _={templates:{}};function y(e,t){return e.localeCompare(t,void 0,{numeric:!0})}function w(e=_,t){switch(t.type){case a.a:{const{toolName:o,templateName:n}=t;if(!e.templates[o].includes(n)){const t=[...e.templates[o],n].sort(y);return Object.assign(Object.assign({},e),{templates:Object.assign(Object.assign({},e.templates),{[o]:t})})}return e}case a.g:{const{toolName:o,templates:n}=t;return Object.assign(Object.assign({},e),{templates:Object.assign(Object.assign({},e.templates),{[o]:[...n].sort(y)})})}case a.e:{const{toolName:o,templateName:n}=t;return Object.assign(Object.assign({},e),{templates:Object.assign(Object.assign({},e.templates),{[o]:e.templates[o].filter(e=>e!==n)})})}default:return e}}o.d(t,"store",(function(){return C}));const C=function(){const e=Object(i.b)(),t=Object(n.createStore)(w,Object(n.applyMiddleware)(e));return e.run(f),t}()},Lnv9:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="currentColor"><rect width="18" height="2" rx="1" x="5" y="14"/><rect width="18" height="1" rx=".5" x="5" y="20"/><rect width="18" height="3" rx="1.5" x="5" y="7"/></svg>'},O5Oz:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 1" width="18" height="1"><rect width="18" height="1" fill="currentColor" rx=".5"/></svg>'},Oy6E:function(e,t,o){e.exports={spinnerWrap:"spinnerWrap-1dkAsm33"}},R1RK:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none" stroke="currentColor"><path stroke-linecap="round" d="M15.5 18.5h6m-3 3v-6"/><rect width="6" height="6" rx="1.5" x="6.5" y="6.5"/><rect width="6" height="6" rx="1.5" x="15.5" y="6.5"/><rect width="6" height="6" rx="1.5" x="6.5" y="15.5"/></svg>'},"R4+T":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path fill="currentColor" d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},SAe1:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("q1tI"),i=o("rzV7"),r=o.n(i);class a extends n.Component{constructor(e){super(e),this._handleMediaChange=()=>{const e=l(this.state.queries,(e,t)=>t.matches);let t=!1;for(const o in e)if(e.hasOwnProperty(o)&&this.state.matches[o]!==e[o]){t=!0;break}t&&this.setState({matches:e})};const{rules:t}=this.props;this.state=s(t)}shouldComponentUpdate(e,t){return!r()(e,this.props)||(!r()(t.rules,this.state.rules)||!r()(t.matches,this.state.matches))}componentDidMount(){this._migrate(null,this.state.queries)}componentDidUpdate(e,t){
r()(e.rules,this.props.rules)||this._migrate(t.queries,this.state.queries)}componentWillUnmount(){this._migrate(this.state.queries,null)}render(){return this.props.children(this.state.matches)}static getDerivedStateFromProps(e,t){if(r()(e.rules,t.rules))return null;const{rules:o}=e;return s(o)}_migrate(e,t){null!==e&&l(e,(e,t)=>{t.removeListener(this._handleMediaChange)}),null!==t&&l(t,(e,t)=>{t.addListener(this._handleMediaChange)})}}function s(e){const t=l(e,(e,t)=>window.matchMedia(t));return{queries:t,matches:l(t,(e,t)=>t.matches),rules:Object.assign({},e)}}function l(e,t){const o={};for(const n in e)e.hasOwnProperty(n)&&(o[n]=t(n,e[n]));return o}},TXAa:function(e,t,o){},UXdH:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentColor" d="M4 13h5v1H4v-1zM12 13h5v1h-5v-1zM20 13h5v1h-5v-1z"/></svg>'},Ve4Q:function(e,t,o){"use strict";o.r(t);var n=o("q1tI"),i=o.n(n),r=o("i8i4"),a=o.n(r),s=o("YFKU"),l=o("Kxc7"),c=o("hY0g"),u=o.n(c),d=o("ogJP"),h=o("CW80"),p=o("mMWL"),m=o("j3hX"),b=o("Eyy1"),g=o("tc+8"),v=o.n(g);class f extends v.a{constructor(e,t,o){super(),this._listenersMappers=[],this._isProcess=!1,this._baseProperty=e,this._undoModel=t,this._undoText=o}destroy(){this._baseProperty.destroy()}value(){return this._baseProperty.value()}setValue(e){this._isProcess=!0,this._baseProperty.setValue(e,void 0,{applyValue:(e,t)=>this._undoModel.setProperty(e,t,this._undoText)}),this._isProcess=!1,this._listenersMappers.forEach(e=>{e.method.call(e.obj,this)})}subscribe(e,t){const o=o=>{this._isProcess||t.call(e,this)},n={obj:e,method:t,callback:o};this._listenersMappers.push(n),this._baseProperty.subscribe(e,o)}unsubscribe(e,t){var o;const n=Object(b.ensureDefined)(null===(o=this._listenersMappers.find(o=>o.obj===e&&o.method===t))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(e,n)}unsubscribeAll(e){this._baseProperty.unsubscribeAll(e)}}var _=o("turx"),y=o("SAe1"),w=o("0ZwQ"),C=o("uhCe");const T=w.a+"__button";function x(e){var t;const{templateButton:o,propertyButtons:n,commonButtons:r,isDrawingFinished:a,activeChartWidget:s}=e,l=null===(t=s.model())||void 0===t?void 0:t.selection().dataSources();return l&&l.length?i.a.createElement(y.a,{rules:{isSmallWidth:C.a.TabletSmall,isSmallHeight:"screen and (max-height: 428px)"}},({isSmallWidth:e,isSmallHeight:t})=>i.a.createElement(i.a.Fragment,null,c(),a&&i.a.createElement(i.a.Fragment,null,Boolean(n.length)&&n.map((o,n)=>i.a.createElement(o.component,Object.assign({},o.props,{key:`${o.props.title}_${n}`,className:T,isSmallScreen:e||t}))),Boolean(r.length)&&r.map((o,n)=>{const r=e||t;return r?o.showForSmallScreen?i.a.createElement(o.component,Object.assign({},o.props,{isSmallScreen:r,key:`${o.props.title}_${n}`,className:T})):null:i.a.createElement(o.component,Object.assign({},o.props,{key:`${o.props.title}_${n}`,className:T}))})))):c();function c(){return null===o?null:i.a.createElement(o.component,Object.assign({},o.props,{isDrawingFinished:a,className:T}))}}var S=o("JWMC"),P=o("p0W+"),O=o("Xxuz");function E(e){
const{title:t,activeChartWidget:o,className:n}=e;return i.a.createElement(P.a,{className:n,icon:O,title:t,onClick:function(){Object(S.trackEvent)("GUI","Context action on drawings","Settings"),o.showChartPropertiesForSource(o.model().selection().lineDataSources()[0],void 0,{onWidget:o.onWidget()})},"data-name":"settings"})}var B=o("5hRh"),k=o("mrSG"),j=o("TSYQ"),L=o("4rU7"),W=o("ucyy");function N(e){const{className:t}=e,o=Object(k.d)(e,["className"]);return i.a.createElement(L.a,Object.assign({className:j(t,W.button),tooltipPosition:"horizontal"},o))}var A=o("43BO"),M=o("Uh5y");function D(e){const{activeChartWidget:t,className:o}=e,n=t.model().selection().lineDataSources()[0].properties().frozen,r=Object(B.a)(n),a=r?{title:Object(s.t)("Unlock"),icon:A}:{title:Object(s.t)("Lock"),icon:M};return i.a.createElement(N,Object.assign({className:o,isActive:Boolean(r),onClick:function(){Object(S.trackEvent)("GUI","Context action on drawings","Lock"),t.toggleLockSelectedObject()},"data-name":Boolean(r)?"unlock":"lock"},a))}var V=o("aVjL");function z(e){const{title:t,activeChartWidget:o,className:n}=e;return i.a.createElement(P.a,{className:n,icon:V,title:t,"data-name":"remove",onClick:function(){Object(S.trackEvent)("GUI","Context action on drawings","Remove"),o.removeSelectedSources()}})}var F=o("Iivm"),R=o("/3z9"),I=o("lxNp"),H=o("82wv"),$=o("IAAr"),Q=o("7KDR"),G=o("ycI/"),q=o("5VQP"),U=o("HZKX"),X=o("HWhk"),K=o("9dnG"),Y=o("dmHa");function J(e){const{title:t,activeChartWidget:r,isSmallScreen:a,className:l}=e,c=r.model(),u=c.selection().lineDataSources(),[d,h]=Object(n.useState)([]),p=Object(n.useRef)(null),m=Object(n.useMemo)(()=>new U.ActionsProvider(r),[r]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(G.a,{keyCode:27,eventType:"keyup",handler:function(){Object(b.ensureNotNull)(p.current).close()}}),i.a.createElement(H.b,{className:l,ref:p,arrow:!1,onOpen:a?void 0:function(){const e=[new Q.Action({label:Object(s.t)("Visual order"),icon:K,subItems:g(),name:"visual-order"})],t=function(){const e=[],t=R.isMacKeyboard?" +":"",n=u.filter(e=>e.cloneable());n.length>0&&e.push(new Q.Action({name:"clone",icon:o("+KIV"),shortcutHint:R.humanReadableModifiers(I.Modifiers.Mod)+t+" Drag",label:Object(s.t)("Clone"),onExecute:()=>{c.cloneLineTools(n,!1),Object(S.trackEvent)("GUI","Context action on drawings","Clone")}}));const i=u.filter(e=>e.copiable());if(i.length>0){const o={name:"copy",label:Object(s.t)("Copy"),shortcutHint:R.humanReadableModifiers(I.Modifiers.Mod)+t+" C",onExecute:()=>{r.chartWidgetCollection().clipboard.uiRequestCopy(i)}};e.push(new Q.Action(o,"Copy"))}if(!function(){if(!(null==r?void 0:r.isMultipleLayout()))return!1;return u.some(e=>e.isSynchronizable())}())return e;u.filter(e=>!!e.linkKey().value()).length?e.push(new Q.Action({name:"stop-sync",label:Object(s.t)("Stop syncing"),onExecute:()=>{c.unlinkLines&&c.unlinkLines(u)}})):e.push(new Q.Action({name:"sync",label:Object(s.t)("Sync to all charts"),onExecute:()=>{c.copyToOtherCharts(u)}}));return e}();t.length&&e.push(new Q.Separator,...t)
;e.push(new Q.Separator,new Q.Action({label:Object(s.t)("Hide"),icon:Y,onExecute:()=>{r.hideSelectedObject()},name:"hide"})),h(Z(e))},onClick:a?function(e){m.contextMenuActionsForSources(u).then(t=>{window.matchMedia(C.a.TabletSmall).matches?q.ContextMenuManager.createMenu(Z(t),{mode:"drawer","data-name":"more-menu"}).then(t=>t.show(e)):h(Z(t))})}:void 0,title:t,content:i.a.createElement(F.a,{icon:X}),"data-name":"more",menuDataName:"more-menu"},i.a.createElement($.a,{parentIsOpened:!0,items:d})));function g(){const e=[],t=c.availableZOrderOperations(u),o=new Q.Action({name:"bring-to-front",label:Object(s.t)("Bring to Front"),onExecute:()=>{c.bringToFront(u)},disabled:1===u.length&&!t.bringToFrontEnabled}),n=new Q.Action({name:"send-to-back",label:Object(s.t)("Send to Back"),onExecute:()=>{c.sendToBack(u)},disabled:1===u.length&&!t.sendToBackEnabled}),i=new Q.Action({name:"bring-forward",label:Object(s.t)("Bring Forward"),onExecute:()=>{c.bringForward(u)},disabled:1===u.length&&!t.bringForwardEnabled}),r=new Q.Action({name:"send-backward",label:Object(s.t)("Send Backward"),onExecute:()=>{c.sendBackward(u)},disabled:1===u.length&&!t.sendBackwardEnabled});return e.push(o,n,i,r),e}}function Z(e){return Modernizr.touch&&!window.matchMedia("(pointer:fine)").matches?e.filter(e=>"Copy"!==e.id):e}var ee=o("972a"),te=o("bQEj"),oe=o("UXdH"),ne=o("ZSM+");function ie(e){const{property:t,model:o,title:r,className:a}=e,l=Object(B.a)(t),c=Object(n.useMemo)(()=>[new Q.Action({icon:te,label:Object(s.t)("Line"),active:ee.LineStyle.Solid===l,onExecute:()=>o.setProperty(t,ee.LineStyle.Solid,r)}),new Q.Action({icon:oe,label:Object(s.t)("Dashed line"),active:ee.LineStyle.Dashed===l,onExecute:()=>o.setProperty(t,ee.LineStyle.Dashed,r)}),new Q.Action({icon:ne,label:Object(s.t)("Dotted line"),active:ee.LineStyle.Dotted===l,onExecute:()=>o.setProperty(t,ee.LineStyle.Dotted,r)})],[o,t,l]);return i.a.createElement(H.b,{className:a,arrow:!1,content:i.a.createElement(F.a,{icon:re(l)}),title:r,"data-name":e["data-name"],menuDataName:e["data-name"]+"-menu"},i.a.createElement($.a,{items:c}))}function re(e){switch(e){case ee.LineStyle.Solid:return te;case ee.LineStyle.Dashed:return oe;case ee.LineStyle.Dotted:return ne;default:return""}}const ae=[10,11,12,14,16,20,24,28,32,40];function se(e){const{property:t,model:o,title:n,className:r}=e,a=Object(B.a)(t),s=ae.map(e=>new Q.Action({label:e.toString(),onExecute:()=>o.setProperty(t,e,n),active:e===a}));return i.a.createElement(H.b,{arrow:!1,content:a,className:r,title:n,"data-name":e["data-name"],menuDataName:e["data-name"]+"-menu"},i.a.createElement($.a,{items:s}))}var le=o("my99"),ce=o("yMne"),ue=o("vqb8"),de=o("2O5g"),he=o("2EWL"),pe=o("d7Kh");function me(e){const{activeChartWidget:t,className:o}=e,n=t.model(),r=n.selection().lineDataSources()[0],{hasAlert:a}=r,l=Object(ue.a)({watchedValue:a,defaultValue:!1}),c=l?{title:Object(s.t)("Edit Alert"),icon:pe,onClick:function(){window.runOrSignIn(()=>{r.editAlert("linetool_toolbar_edit_alert")},{source:"Alert edit from line properties"})}}:{
title:Object(s.t)("Add Alert"),icon:he,onClick:function(){Object(S.trackEvent)("GUI","CreateAlert","DrawingPanel"),window.runOrSignIn(()=>{Object(de.invokeAlertEditorWithOnlineSeries)({dataSourceHub:n.model(),drawing:r,actionSource:"linetool_toolbar_add_alert"})},{source:"Alert add from line properties"})}};return i.a.createElement(N,Object.assign({className:o,isActive:l,"data-name":l?"edit-alert":"add-alert"},c))}o.d(t,"LineToolPropertiesWidgetBase",(function(){return be}));class be{constructor(e){this._isDrawingFinished=new u.a(!0),this._currentTool=null,this._updateVisibilityTimeout=null,this._lineWidthsProperty=null,this._lineColorsProperty=null,this._currentProperties=null,this._container=null,this._toolbarRendered=!1,this._templatesButton=null,this._propertyButtons=[],this._commonButtons=[],this._handleSourceEdit=e=>{p.isDirectionalMovementActive.value()||(e?this._floatingToolbar.hide(!0):this._toolbarRendered&&this._floatingToolbar.show())},this._chartWidgetCollection=e,this._floatingToolbar=new le.a({defaultPosition:{top:ce.b+15,left:window.innerWidth/2},positionSettingsKey:"properties_toolbar.position",positionStorageType:"device",layout:"horizontal","data-name":"drawing-toolbar"}),this._container=this._floatingToolbar.getReactWidgetContainer(),p.isToolMovingNow.subscribe(this._handleSourceEdit),p.isToolEditingNow.subscribe(this._handleSourceEdit)}activeChartWidget(){return this._chartWidgetCollection.activeChartWidget.value()}selectedSources(){return this._chartWidgetCollection.selectedSources.value()}hide(){this._updateVisibilityTimeout&&clearTimeout(this._updateVisibilityTimeout),this._updateVisibilityTimeout=setTimeout(()=>{Object(h.unsetNewToolProperties)(),this._floatingToolbar.hide(!0),this._isToolbarRendered()&&this._unmountToolbar(),this._clearProperties(),this._clearCommonButtons()},0)}_clearProperties(){this._clearPropertyButtons(),this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._currentProperties&&(this._currentProperties=null)}_show(){this._updateVisibilityTimeout&&clearTimeout(this._updateVisibilityTimeout),this._updateVisibilityTimeout=setTimeout(()=>{this._renderToolbar(),this._floatingToolbar.show(),this._floatingToolbar.checkPosition()},0)}_addPropertyButton(e){this._propertyButtons.push(e),this._renderToolbar()}_addCommonButton(e){this._commonButtons.push(e),this._renderToolbar()}_addTemplatesButton(e){this._templatesButton=e}_renderToolbar(){null!==this._container&&this.activeChartWidget()&&this.activeChartWidget().model()&&(a.a.render(i.a.createElement(x,{templateButton:this._templatesButton,propertyButtons:this._propertyButtons,commonButtons:this._commonButtons,isDrawingFinished:this._isDrawingFinished.value(),activeChartWidget:this.activeChartWidget()}),this._container),this._toolbarRendered=!0)}_unmountToolbar(){null!==this._container&&(a.a.unmountComponentAtNode(this._container),this._toolbarRendered=!1)}_clearTemplatesButton(){
this._templatesButton=null}_clearPropertyButtons(){this._propertyButtons=[]}_clearCommonButtons(){this._commonButtons=[]}_isToolbarRendered(){return this._toolbarRendered}_createSettingsButton(){if(this.selectedSources().length>1)return;const e={component:E,props:{title:Object(s.t)("Settings"),activeChartWidget:this.activeChartWidget()}};this._addCommonButton(e)}_createLockButton(){const e={component:D,props:{title:"Lock",activeChartWidget:this.activeChartWidget()}};this._addCommonButton(e)}_createRemoveButton(){const e={component:z,props:{title:Object(s.t)("Remove"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0};this._addCommonButton(e)}_createDotsButton(){this._addCommonButton({component:J,props:{title:Object(s.t)("More"),activeChartWidget:this.activeChartWidget()},showForSmallScreen:!0})}_createAlertButton(){if(this.selectedSources().length>1)return;const e=this.selectedSources()[0];if(!e||e&&!e.canHasAlert())return;const t={component:me,props:{title:"Alert",activeChartWidget:this.activeChartWidget()}};this._addCommonButton(t)}_createSourceActions(){l.enabled("alerts")&&this._createAlertButton(),this._createLockButton()}_createLineStyleButton(e){const t=this.selectedSources();if(0===t.length)return!1;const o={component:ie,props:{property:t[0].properties().linestyle||e,title:Object(s.t)("Style"),model:this.activeChartWidget().model(),"data-name":"style"}};return this._addPropertyButton(o),!0}_createFontSizeButton(e){const t=this.selectedSources();if(0===t.length)return!1;const o={component:se,props:{property:t[0].properties().fontsize||e,title:Object(s.t)("Font Size"),model:this.activeChartWidget().model(),"data-name":"font-size"}};return this._addPropertyButton(o),!0}_createCommonButtons(){this._commonButtons.length&&this._clearCommonButtons(),l.enabled("property_pages")&&this._createSettingsButton(),this._createSourceActions(),this._createRemoveButton(),this._createDotsButton()}_prepareProperties(e){const t=this.selectedSources().filter(t=>Object(h.isLineTool)(t)&&t.properties()[e]);if(!(t.filter(t=>t.properties()[e].visible()).length<1))return t.map(t=>t.properties()[e]).filter(d.notNull)}_createProperty(e,t,o,n){if(t){const e=this._prepareProperties(o);if(!e)return;const t=this.activeChartWidget().model();return this._isWidthProperty(e[0])?new f(new m.MultipleLineWidthsProperty(e),t,n):new _.b(new m.MultipleLineColorsProperty(e),t,n)}if(e&&e.visible())return this._isWidthProperty(e)?new m.MultipleLineWidthsProperty([e]):new _.a(new m.MultipleLineColorsProperty([e]))}_shouldShowBackgroundProperty(e,t){return!t||!t.fillBackground||!!t.fillBackground.value()}_isDrawingTool(e){return Boolean(null==e?void 0:e.toLowerCase().includes("linetool"))}_isWidthProperty(e){return e instanceof m.LineToolWidthsProperty}}},"W0/v":function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" width="17" height="17" fill="none"><path stroke="currentColor" d="M1.5 11.5l-.7.7a1 1 0 0 0-.3.71v3.59h3.59a1 1 0 0 0 .7-.3l.71-.7m-4-4l9-9m-9 9l2 2m2 2l9-9m-9 9l-2-2m11-7l1.3-1.3a1 1 0 0 0 0-1.4l-2.6-2.6a1 1 0 0 0-1.4 0l-1.3 1.3m4 4l-4-4m-7 11l9-9"/></svg>'},X1vi:function(e,t,o){e.exports={wrap:"wrap-2EG6_6QR",icon:"icon-2EG6_6QR",colorBg:"colorBg-2EG6_6QR",color:"color-2EG6_6QR",multicolor:"multicolor-2EG6_6QR",white:"white-2EG6_6QR"}},Xxuz:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path fill="currentcolor" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.5c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5V7.05l.4.09c.9.18 1.73.53 2.46 1.02l.34.23.29-.3.81-.8c.2-.2.52-.2.71 0l.7.7.36-.35-.35.35c.2.2.2.51 0 .7l-.82.82-.29.29.23.34c.49.73.84 1.57 1.02 2.46l.08.4H22.5c.28 0 .5.22.5.5v1a.5.5 0 0 1-.5.5H20.95l-.09.4c-.18.9-.53 1.73-1.02 2.46l-.23.34.3.29.8.81c.2.2.2.52 0 .71l-.7.7a.5.5 0 0 1-.7 0l-.82-.8-.29-.3-.34.23c-.73.49-1.57.84-2.46 1.02l-.4.08V22.5a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5V20.95l-.4-.09a6.96 6.96 0 0 1-2.46-1.02l-.34-.23-.29.3-.81.8.35.36-.35-.35a.5.5 0 0 1-.71 0l-.7-.71a.5.5 0 0 1 0-.7l-.36-.36.35.35.82-.81.29-.29-.23-.34a6.96 6.96 0 0 1-1.02-2.46l-.08-.4H5.5a.5.5 0 0 1-.5-.5v-1c0-.28.22-.5.5-.5H7.05l.09-.4c.18-.9.53-1.73 1.02-2.46l.23-.34-.3-.29-.8-.81a.5.5 0 0 1 0-.71l.7-.7c.2-.2.51-.2.7 0l.82.8.29.3.34-.23a6.96 6.96 0 0 1 2.46-1.02l.4-.08V5.5zm.5-1.5c-.83 0-1.5.67-1.5 1.5v.75c-.73.2-1.43.48-2.06.86l-.54-.53a1.5 1.5 0 0 0-2.12 0l-.7.7a1.5 1.5 0 0 0 0 2.12l.53.54A7.95 7.95 0 0 0 6.25 12H5.5c-.83 0-1.5.67-1.5 1.5v1c0 .83.67 1.5 1.5 1.5h.75c.2.73.48 1.43.86 2.06l-.53.54a1.5 1.5 0 0 0 0 2.12l.7.7a1.5 1.5 0 0 0 2.12 0l.54-.53c.63.38 1.33.67 2.06.86v.75c0 .83.67 1.5 1.5 1.5h1c.83 0 1.5-.67 1.5-1.5v-.75a7.95 7.95 0 0 0 2.06-.86l.54.53a1.5 1.5 0 0 0 2.12 0l.7-.7a1.5 1.5 0 0 0 0-2.12l-.53-.54c.38-.63.67-1.33.86-2.06h.75c.83 0 1.5-.67 1.5-1.5v-1c0-.83-.67-1.5-1.5-1.5h-.75a7.95 7.95 0 0 0-.86-2.06l.53-.54a1.5 1.5 0 0 0 0-2.12l-.7-.7a1.5 1.5 0 0 0-2.12 0l-.54.53A7.95 7.95 0 0 0 16 6.25V5.5c0-.83-.67-1.5-1.5-1.5h-1zM12 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/></svg>'},"ZSM+":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor"><circle cx="9" cy="14" r="1"/><circle cx="4" cy="14" r="1"/><circle cx="14" cy="14" r="1"/><circle cx="19" cy="14" r="1"/><circle cx="24" cy="14" r="1"/></svg>'},bQ7Y:function(e,t,o){e.exports={button:"button-2Vpz_LXc",hover:"hover-2Vpz_LXc",isInteractive:"isInteractive-2Vpz_LXc",isGrouped:"isGrouped-2Vpz_LXc",isActive:"isActive-2Vpz_LXc",isOpened:"isOpened-2Vpz_LXc",isDisabled:"isDisabled-2Vpz_LXc",text:"text-2Vpz_LXc",icon:"icon-2Vpz_LXc"}},bQEj:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path stroke="currentColor" d="M4 13.5h20"/></svg>'},d7Kh:function(e,t){
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M8.5 6a3.5 3.5 0 0 0-2.93 5.42 8.53 8.53 0 0 1 4.85-4.85A3.48 3.48 0 0 0 8.5 6zM4 9.5c0 1.2.46 2.27 1.22 3.08A8.53 8.53 0 0 0 13.5 23a8.5 8.5 0 0 0 8.28-10.42A4.49 4.49 0 0 0 18.5 5c-1.2 0-2.27.46-3.08 1.22a8.53 8.53 0 0 0-3.84 0A4.49 4.49 0 0 0 4 9.5zm12.58-2.93a8.53 8.53 0 0 1 4.85 4.85 3.5 3.5 0 0 0-4.85-4.85zM6 14.5a7.5 7.5 0 1 1 15 0 7.5 7.5 0 0 1-15 0zm8 .5V9h-1v5h-3v1h4z"/></svg>'},dRg2:function(e,t,o){e.exports={item:"item-3Te2Sp8a",withIcon:"withIcon-3Te2Sp8a",icon:"icon-3Te2Sp8a",labelRow:"labelRow-3Te2Sp8a",multiWidth:"multiWidth-3Te2Sp8a",buttonWrap:"buttonWrap-3Te2Sp8a",buttonLabel:"buttonLabel-3Te2Sp8a"}},"e95/":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("mrSG"),i=o("q1tI"),r=o("TSYQ"),a=o("4vL2"),s=o("2A9e");o("+l/S");function l(e){const{className:t,intent:o,size:l,appearance:c,disabled:u,useFullWidth:d,reference:h,icon:p,children:m,href:b,tabIndex:g}=e,v=Object(n.d)(e,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","href","tabIndex"]),f=Object(a.a)(s,{intent:o,size:l,appearance:c,disabled:u,useFullWidth:d,tabIndex:g,icon:p});return i.createElement("a",Object.assign({className:r(t,f),href:u?void 0:b,"aria-disabled":u,ref:h,tabIndex:g},v),p&&"s"!==l&&i.createElement("span",{className:s.icon},p),i.createElement("span",{className:s.content},m))}},gmn6:function(e,t,o){"use strict";o.r(t),function(e){o.d(t,"FavoriteDrawingToolbar",(function(){return h}));o("P5fv"),o("nbsC"),o("EsMY"),o("YFKU");var n=o("0ZwQ"),i=o("b2d7"),r=o("7KDR"),a=o("5VQP"),s=o("mMWL"),l=o("MP+M"),c=o("Vdly"),u=o("hY0g"),d=o.n(u);o("TXAa");class h extends n.b{constructor(e){super({allowSortable:!Modernizr.mobiletouch,dragOnlyInsideToolbar:!0,defaultPosition:e,positionSettingsKey:"chart.favoriteDrawingsPosition",positionStorageType:"device"}),this._linetoolsWidgets={},this._canBeShownValue=new d.a(!1),this._attachHandlers(),this._loadVisibilityState()}show(){this._canBeShownValue.value()&&(c.setValue("ChartFavoriteDrawingToolbarWidget.visible",!0),this.isVisible()||this._renderAllLinetools(),super.show())}hide(){c.setValue("ChartFavoriteDrawingToolbarWidget.visible",!1),super.hide()}canBeShown(){return this._canBeShownValue.readonly()}_onFavoriteAdded(e){this._canBeShownValue.setValue(!0),this.addWidget(this._createLinetoolWidget(e)),this.show()}_onFavoriteRemoved(e){this.removeWidget(this._linetoolsWidgets[e]),delete this._linetoolsWidgets[e],0===i.LinetoolsFavoritesStore.favoritesCount()&&(this._canBeShownValue.setValue(!1),this.hide())}_onFavoriteMoved(){this._renderAllLinetools()}_onSelectedLinetoolChanged(e){Object.keys(this._linetoolsWidgets).forEach(t=>{this._linetoolsWidgets[t].classList.toggle("i-active",e===t)})}_createLinetoolWidget(t){const o=$(e.render('<span class="tv-favorited-drawings-toolbar__widget {{#isActive}}i-active{{/isActive}} apply-common-tooltip" title="{{title}}">{{{icon}}}</span>',{
icon:l.a[t].icon,isActive:t===s.tool.value(),title:l.a[t].localizedName}))[0];return o.addEventListener("click",e=>{e.preventDefault(),s.tool.value()!==t&&s.tool.setValue(t)}),this._linetoolsWidgets[t]=o,o}_renderAllLinetools(){this._linetoolsWidgets={},this.removeWidgets(),i.LinetoolsFavoritesStore.favorites().filter(e=>l.a[e]).forEach(e=>{this.addWidget(this._createLinetoolWidget(e))})}_attachHandlers(){i.LinetoolsFavoritesStore.favoriteAdded.subscribe(this,this._onFavoriteAdded),i.LinetoolsFavoritesStore.favoriteRemoved.subscribe(this,this._onFavoriteRemoved),i.LinetoolsFavoritesStore.favoriteMoved.subscribe(this,this._onFavoriteMoved),i.LinetoolsFavoritesStore.favoritesSynced.subscribe(null,()=>{this._loadVisibilityState(),this._renderAllLinetools()}),this.onWidgetsReordered().subscribe(this,(e,t)=>{if(i.LinetoolsFavoritesStore.favoriteMoved.unsubscribe(this,this._onFavoriteMoved),!i.LinetoolsFavoritesStore.moveFavorite(i.LinetoolsFavoritesStore.favorite(e),t))throw new Error("Something went wrong");i.LinetoolsFavoritesStore.favoriteMoved.subscribe(this,this._onFavoriteMoved)}),this.onContextMenu(e=>{e.preventDefault();const t=new r.Action({label:window.t("Hide Favorite Drawing Tools Toolbar"),onExecute:()=>{this.hide()}});a.ContextMenuManager.createMenu([t]).then(t=>{t.show(e)})}),s.tool.subscribe(this._onSelectedLinetoolChanged.bind(this))}_loadVisibilityState(){const e=i.LinetoolsFavoritesStore.favoritesCount()>0;this._canBeShownValue.setValue(e);c.getBool("ChartFavoriteDrawingToolbarWidget.visible",!0)&&e?this.show():this.hide()}}}.call(this,o("nbsC"))},guTw:function(e,t,o){"use strict";var n=o("fZEr"),i=o("LC+v").store,r=o("/yp2");function a(e,t){this._toolName=e,this._applyTemplate=t,this.templatesDeferred=this.loadData()}a.prototype.getData=function(){return i.getState().templates[this._toolName]},a.prototype.loadData=function(){var e=$.Deferred();return this.getData()?e.resolve():(i.dispatch(r.getTemplates(this._toolName,(function(){e.resolve()}))),e)},a.prototype.templatesLoaded=function(){return this.templatesDeferred},a.prototype.loadTemplate=function(e,t){var o=this;i.dispatch(r.loadTemplate(this._toolName,e,(function(e){o._applyTemplate(e),t&&t()})))},a.prototype.removeTemplate=function(e){e&&i.dispatch(r.startRemoveTemplate(this._toolName,e))},a.prototype.saveTemplate=function(e,t){if(e&&t){e=TradingView.clean(e);i.dispatch(r.saveTemplate(this._toolName,e,t))}},a.prototype.deleteAction=function(e){var t=e,o=this;runOrSignIn((function(){var i=$.t("Do you really want to delete Drawing Template '{name}' ?").format({name:e});n.showConfirm({text:i,onConfirm:function(e){o.removeTemplate(t),e.dialogClose()}})}),{source:"Delete line tool template"})},a.prototype.showSaveDialog=function(e){var t=this;runOrSignIn((function(){n.showRename({title:$.t("Save Drawing Template As"),text:$.t("Template name")+":",maxLength:64,onRename:function(o){if(-1!==t.getData().indexOf(o.newValue)){var i=$.t("Drawing Template '{name}' already exists. Do you really want to replace it?").format({name:o.newValue});n.showConfirm({
text:i,onConfirm:function(t){e(o.newValue),t.dialogClose(),o.dialogClose()},onClose:o.focusInput},o.innerManager)}else e(o.newValue),o.dialogClose()}})}),{source:"Save line tool template",sourceMeta:"Chart"})},e.exports=a},mQbF:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15" fill="none"><path stroke="currentColor" d="M4 14.5h2.5m2.5 0H6.5m0 0V.5m0 0h-5a1 1 0 0 0-1 1V4m6-3.5h5a1 1 0 0 1 1 1V4"/></svg>'},mwqF:function(e,t,o){"use strict";var n=o("mrSG"),i=o("q1tI"),r=o("TSYQ"),a=o("4vL2"),s=o("2A9e");o("+l/S");function l(e){const{className:t,intent:o,size:l,appearance:c,disabled:u,useFullWidth:d,reference:h,icon:p,children:m,tabIndex:b}=e,g=Object(n.d)(e,["className","intent","size","appearance","disabled","useFullWidth","reference","icon","children","tabIndex"]),v=Object(a.a)(s,{intent:o,size:l,appearance:c,disabled:u,useFullWidth:d,tabIndex:b,icon:p});return i.createElement("button",Object.assign({className:r(v,t),disabled:u,ref:h,tabIndex:b},g),p&&"s"!==l&&i.createElement("span",{className:s.icon},p),i.createElement("span",{className:s.content},m))}var c=o("e95/");o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return c.a}))},myiL:function(e,t,o){"use strict";o.r(t),o.d(t,"LineWidthButton",(function(){return y}));var n=o("q1tI"),i=o.n(n),r=o("TSYQ"),a=o("Eyy1"),s=o("Iivm"),l=o("82wv"),c=o("5hRh"),u=o("N5tr"),d=o("nPPD"),h=o("O5Oz"),p=o("xnr+"),m=o("n3oB"),b=o("2F1E"),g=o("Lnv9"),v=o("dRg2");const f=Object(d.a)(u.a,v),_=[{value:1,icon:h},{value:2,icon:p},{value:3,icon:m},{value:4,icon:b}];function y(e){const{multipleProperty:t,title:o,model:n,className:d,isSmallScreen:h}=e,p=Object(c.a)(Object(a.ensureDefined)(t)),m="mixed"===p||!p,b=function(e){const t=_.find(t=>t.value===e);if(!t)return g;return t.icon}(p);return i.a.createElement(l.b,{className:d,arrow:!1,title:o,"data-name":e["data-name"],menuDataName:e["data-name"]+"-menu",content:i.a.createElement("div",null,m?i.a.createElement("div",{className:v.multiWidth},i.a.createElement(s.a,{icon:g})):i.a.createElement("div",{className:v.buttonWrap},!h&&i.a.createElement(s.a,{icon:b}),i.a.createElement("div",{className:r(!h&&v.buttonLabel)},p+"px")))},_.map(({value:e,icon:t})=>i.a.createElement(u.b,{key:e,theme:f,label:e+"px",icon:t,isActive:e===p,onClick:y,onClickArg:e})));function y(e){e&&t&&(n.beginUndoMacro(o),t.setValue(e,void 0,{applyValue:(e,t)=>{n.setProperty(e,t,o)}}),n.endUndoMacro())}}},n3oB:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 3" width="18" height="3"><rect width="18" height="3" fill="currentColor" rx="1.5"/></svg>'},"p0W+":function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("mrSG"),i=o("q1tI"),r=o("TSYQ"),a=o("tU7i"),s=o("EvtC");const l=i.forwardRef((e,t)=>{const{className:o}=e,l=Object(n.d)(e,["className"]);return i.createElement(a.b,Object.assign({},l,{ref:t,className:r(o,s.button)}))})},tPkB:function(e,t,o){"use strict";(function(t){
var n=o("mMWL"),i=o("guTw"),r=o("C7ts").TemplateButton,a=o("Ocx9").DefaultProperty,s=o("Ve4Q").LineToolPropertiesWidgetBase,l=o("e92V").isLineDrawnWithPressedButton,c=o("CW80").isLineTool;const u=o("IhRv").ColorPickerButton,d=o("myiL").LineWidthButton;var h=o("CW80").setNewToolProperties,p=(!t.enabled("widget")||window.is_authenticated)&&t.enabled("linetoolpropertieswidget_template_button"),m=o("W0/v"),b=o("0fuu"),g=o("mQbF"),v=window.t("Color");class f extends s{constructor(e){super(e),this._hasAlertWathcedValue=null,this._templatesButton=null,this.attachHandlers()}attachHandlers(){n.tool.subscribe(this.onToolChanged.bind(this),{callWithLast:!0}),n.iconTool.subscribe(this.onIconToolChanged.bind(this)),this._chartWidgetCollection.selectedSources.subscribe(this.onSourceChanged.bind(this))}onIconToolChanged(){this.onToolChanged(n.tool.value())}onToolChanged(e,t){this._currentTool=e;const o=this.selectedSources();if(this._isDrawingTool(e)){if(this._isDrawingFinished.setValue(!1),p){var i=t instanceof a;t=i?t:h(e,"LineToolIcon"===e?n.iconTool.value():void 0),this.showPropertiesOf(e,t,i),this.showTemplatesOf({tool:e,properties:t}),this._toolbarVisible=!0}this._updateVisibility()}else o&&o.length?(o.length>1&&this._isDrawingFinished.setValue(!0),this.onSourceChanged(this.selectedSources())):this.hide()}findSourceOnWidget(e){for(var t=0;t<this.activeChartWidget().model().panes().length;t++)for(var o=this.activeChartWidget().model().panes()[t].sourcesByGroup().all(),n=0;n<o.length;n++)if(o[n]===e)return o[n]}onSourceChanged(e){if(this._hasAlertWathcedValue&&(this._hasAlertWathcedValue.destroy(),this._hasAlertWathcedValue=null),e&&e.length&&(1!==e.length||c(e[0])))if(this._createCommonButtons(),1===e.length){var t=e[0];t.isAvailableInFloatingWidget()&&this.findSourceOnWidget(t)?(!t.userEditEnabled()||!l(t.toolname)&&this.activeChartWidget().model().lineBeingCreated()||(this._isDrawingFinished.setValue(!0),t.canHasAlert()&&(this._hasAlertWathcedValue=t.hasAlert.spawn())),this.showPropertiesOf(t.toolname,t.properties(),!0),this.showTemplatesOf({source:t}),this._toolbarVisible=!0,this._updateVisibility()):this.hide()}else this._clearProperties(),this._templatesButton&&(this._clearTemplatesButton(),this._templatesButton=null),this._updateVisibility(),this._createWidthsButton(void 0,!0),this._createColorsButton(void 0,!0),this._createBackgroundsButton(void 0,!0),this._createTextColorsButton(void 0,!0);else this.hide()}_createWidthsButton(e,t){if(this._lineWidthsProperty&&(this._lineWidthsProperty.destroy(),this._lineWidthsProperty=null),this._lineWidthsProperty=this._createProperty(e,t,"linesWidths","Set Line tool(s) line width"),!this._lineWidthsProperty)return!0;var o=window.t("Line tool width");t&&(1!==this.selectedSources().filter((function(e){return c(e)&&e.properties().linesWidths})).length&&(o=window.t("Line tool widths")));return this._addPropertyButton({component:d,props:{title:o,multipleProperty:this._lineWidthsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-width"}}),!0}_createColorsButton(e,t){
return this._lineColorsProperty&&(this._lineColorsProperty.destroy(),this._lineColorsProperty=null),this._lineColorsProperty=this._createProperty(e,t,"linesColors","Set Line tool(s) color"),!this._lineColorsProperty||(this._addPropertyButton({component:u,props:{icon:m,title:window.t("Line tool colors"),property:this._lineColorsProperty,model:this.activeChartWidget().model(),"data-name":"line-tool-color"}}),!0)}_createBackgroundsButton(e,t){return this._backgroundsProperty&&(this._backgroundsProperty.destroy(),this._backgroundsProperty=null),this._backgroundsProperty=this._createProperty(e,t,"backgroundsColors","Set Line background(s) color"),!this._backgroundsProperty||(this._addPropertyButton({component:u,props:{icon:b,title:window.t("Line tool backgrounds"),property:this._backgroundsProperty,model:this.activeChartWidget().model(),"data-name":"background-color"}}),!0)}_createTextColorsButton(e,t){return this._textColorsProperty&&(this._textColorsProperty.destroy(),this._textColorsProperty=null),this._textColorsProperty=this._createProperty(e,t,"textsColors","Set Line tool(s) text color"),!this._textColorsProperty||(this._addPropertyButton({component:u,props:{icon:g,title:window.t("Line tool text colors"),property:this._textColorsProperty,model:this.activeChartWidget().model(),"data-name":"text-color"}}),!0)}showTemplatesOf(e){if(t.enabled("drawing_templates")){var o,n,a=e.source;a?(o=a.toolname,n=a.properties()):(o=e.tool,n=e.properties),this._templatesButton&&(this._clearTemplatesButton(),this._templatesButton=null);var s=this;p&&(this._templatesList=new i(o,(function(e){a?(s.activeChartWidget().model().applyLineToolTemplate(a,e,"Apply Drawing Template"),s.onSourceChanged([a])):(n.mergeAndFire(e),n.saveDefaults(),s.onToolChanged(o,n))})),this._templatesButton={component:r,props:{key:"Templates",model:this._templatesList,onSave:a?()=>a.template():void 0,onRestore:()=>{void 0!==a?this.activeChartWidget().model().restorePropertiesForSource(a):n.restoreFactoryDefaults(),this.showPropertiesOf(o,n)}}},this._addTemplatesButton(this._templatesButton))}}templatesList(){return this._templatesList}_getPossibleProperty(e){for(var t=[],o=this._defaultToolProperties(),n=0;n<o.length;n++){var i=o[n];i.name in e&&t.push(i)}return t}showPropertiesOf(e,t,o){this._toolExceptionCases||(this._toolExceptionCases=this._createToolExceptionCases());var n=this._toolExceptionCases[e]||this._getPossibleProperty(t);if(this._clearProperties(),this._propertiesVisible=!1,n.length){for(var i={},r=0;r<n.length;r++){for(var a=n[r],s=t,l=a.name.split("."),c=0;c<l.length;++c)s=s&&s[l[c]];var d=a.showIf;if("function"!=typeof d||d(s,t)){var h=a.factory;if(h&&h.call(this,s,o))continue;if(!s)continue;if(this._propertiesVisible=!0,"combobox"!==a.inputType){const e={component:u,props:{icon:a.iconSvgCode,title:a.title,"data-name":a.dataName,property:s,model:this.activeChartWidget().model()}};this._addPropertyButton(e);continue}i[a.name]=s}}this._currentProperties=i}}_updateVisibility(){
(p||this._isDrawingFinished.value())&&(this._toolbarVisible||this._propertiesVisible)?this._show():this.hide()}refresh(){this.onSourceChanged(this.selectedSources())}_defaultToolProperties(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:m,title:v,factory:f.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:b,title:$.t("Background Color"),factory:f.prototype._createBackgroundsButton,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"textsColors",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:g,factory:f.prototype._createTextColorsButton,dataName:"text-color"},{name:"linesWidths",inputType:"combobox",factory:f.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:f.prototype._createLineStyleButton}]}_riskPropertiesExceptionCases(){return[{name:"textcolor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:g,dataName:"text-color"},{name:"profitBackground",title:$.t("Profit Background Color"),inputType:"colorPicker",iconSvgCode:b,dataName:"background-color"},{name:"stopBackground",title:$.t("Stop Background Color"),inputType:"colorPicker",iconSvgCode:b,dataName:"background-color"}]}_rangeExceptionCases(){return[{name:"linecolor",inputType:"colorPicker",iconSvgCode:m,title:v,dataName:"line-tool-color"},{name:"backgroundColor",inputType:"colorPicker",iconSvgCode:b,title:$.t("Background Color"),dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:f.prototype._createWidthsButton}]}_brushPropertiesExceptionCase(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:m,title:$.t("Color"),factory:f.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:b,title:$.t("Background Color"),dataName:"background-color",factory:f.prototype._createBackgroundsButton},{name:"linesWidths",inputType:"combobox",factory:f.prototype._createWidthsButton}]}_bezierPropertiesExceptionCases(){return[{name:"linesColors",inputType:"colorPicker",iconSvgCode:m,title:$.t("Color"),factory:f.prototype._createColorsButton,dataName:"line-tool-color"},{name:"backgroundsColors",inputType:"colorPicker",iconSvgCode:b,dataName:"background-color",title:$.t("Background Color"),factory:f.prototype._createBackgroundsButton,showIf:this._shouldShowBackgroundProperty},{name:"linesWidths",inputType:"combobox",factory:f.prototype._createWidthsButton},{name:"linestyle",title:$.t("Style"),inputType:"combobox",factory:f.prototype._createLineStyleButton}]}_textPropertiesExceptionCases(){return[{name:"color",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:g,dataName:"text-color"},{name:"backgroundColor",title:$.t("Background Color"),inputType:"colorPicker",iconSvgCode:b,dataName:"background-color",showIf:this._shouldShowBackgroundProperty},{name:"fontsize",title:$.t("Font Size"),inputType:"combobox",factory:f.prototype._createFontSizeButton}]}
_notePropertiesExceptionCases(){return[{name:"markerColor",title:$.t("Marker Color"),inputType:"colorPicker",iconSvgCode:m,dataName:"line-tool-color"},{name:"textColor",title:$.t("Text color"),inputType:"colorPicker",iconSvgCode:g,dataName:"text-color"},{name:"fontSize",title:$.t("Font Size"),inputType:"combobox",factory:f.prototype._createFontSizeButton}]}_createToolExceptionCases(){return{LineToolRegressionTrend:[],LineToolBrush:f.prototype._brushPropertiesExceptionCase(),LineToolBezierQuadro:f.prototype._bezierPropertiesExceptionCases(),LineToolBezierCubic:f.prototype._bezierPropertiesExceptionCases(),LineToolText:f.prototype._textPropertiesExceptionCases(),LineToolTextAbsolute:f.prototype._textPropertiesExceptionCases(),LineToolBalloon:f.prototype._textPropertiesExceptionCases(),LineToolCallout:f.prototype._textPropertiesExceptionCases(),LineToolPriceLabel:f.prototype._textPropertiesExceptionCases(),LineToolDateRange:f.prototype._rangeExceptionCases(),LineToolPriceRange:f.prototype._rangeExceptionCases(),LineToolDateAndPriceRange:f.prototype._rangeExceptionCases(),LineToolNote:f.prototype._notePropertiesExceptionCases(),LineToolNoteAbsolute:f.prototype._notePropertiesExceptionCases(),LineToolRiskRewardLong:f.prototype._riskPropertiesExceptionCases(),LineToolRiskRewardShort:f.prototype._riskPropertiesExceptionCases(),LineToolBarsPattern:[{name:"color",title:v,inputType:"colorPicker",iconSvgCode:b,dataName:"background-color"}],LineToolProjection:[{name:"color1",title:$.t("Background color 1"),inputType:"colorPicker",iconSvgCode:b,dataName:"background-color"},{name:"color2",title:$.t("Background color 2"),inputType:"colorPicker",iconSvgCode:b,dataName:"background-color"},{name:"linesWidths",inputType:"combobox",factory:f.prototype._createWidthsButton}],LineToolSignpost:[{name:"fontSize",title:$.t("Font Size"),inputType:"combobox"},{name:"linesColors",inputType:"colorPicker",iconSvgCode:b,dataName:"background-color",title:v,factory:f.prototype._createBackgroundsButton,showIf:function(e,t){return t&&t.showImage.value()}}]}}}e.exports=f}).call(this,o("Kxc7"))},tU7i:function(e,t,o){"use strict";o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return c}));var n=o("mrSG"),i=o("q1tI"),r=o("TSYQ"),a=o("Iivm"),s=o("bQ7Y");const l=s,c=i.forwardRef((e,t)=>{const{icon:o,isActive:l,isOpened:c,isDisabled:u,isGrouped:d,isHovered:h,onClick:p,text:m,textBeforeIcon:b,title:g,theme:v=s,className:f,forceInteractive:_,"data-name":y}=e,w=Object(n.d)(e,["icon","isActive","isOpened","isDisabled","isGrouped","isHovered","onClick","text","textBeforeIcon","title","theme","className","forceInteractive","data-name"]),C=r(f,v.button,g&&"apply-common-tooltip",{[v.isActive]:l,[v.isOpened]:c,[v.isInteractive]:(_||Boolean(p))&&!u,[v.isDisabled]:u,[v.isGrouped]:d,[v.hover]:h}),T=o&&("string"==typeof o?i.createElement(a.a,{className:v.icon,icon:o}):i.cloneElement(o,{className:r(v.icon,o.props.className)}));return i.createElement("div",Object.assign({},w,{ref:t,"data-role":"button",className:C,onClick:u?void 0:p,title:g,"data-name":y
}),b&&m&&i.createElement("div",{className:r("js-button-text",v.text)},m),T,!b&&m&&i.createElement("div",{className:r("js-button-text",v.text)},m))})},turx:function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return l}));var n=o("Eyy1"),i=o("tc+8"),r=o.n(i);class a extends r.a{constructor(e){super(),this._listenersMappers=[],this._isProcess=!1,this._baseProperty=e}destroy(){this._baseProperty.destroy()}value(){const e=this._baseProperty.value();return"mixed"===e?"":e}visible(){return this._baseProperty.visible()}setValue(e){this._isProcess=!0,this._baseProperty.setValue(""===e?"mixed":e,void 0,{applyValue:this._applyValue.bind(this)}),this._isProcess=!1,this._listenersMappers.forEach(e=>{e.method.call(e.obj,this)})}subscribe(e,t){const o=o=>{this._isProcess||t.call(e,this)},n={obj:e,method:t,callback:o};this._listenersMappers.push(n),this._baseProperty.subscribe(e,o)}unsubscribe(e,t){var o;const i=Object(n.ensureDefined)(null===(o=this._listenersMappers.find(o=>o.obj===e&&o.method===t))||void 0===o?void 0:o.callback);this._baseProperty.unsubscribe(e,i)}unsubscribeAll(e){this._baseProperty.unsubscribeAll(e)}}class s extends a{constructor(e,t,o){super(e),this._undoModel=t,this._undoText=o}_applyValue(e,t){this._undoModel.setProperty(e,t,this._undoText)}}class l extends a{_applyValue(e,t){e.setValue(t)}}},ucyy:function(e,t,o){e.exports={button:"button-1gEXpG61"}},vqb8:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("q1tI");const i=e=>{const t="watchedValue"in e?e.watchedValue:void 0,o="defaultValue"in e?e.defaultValue:e.watchedValue.value(),[i,r]=Object(n.useState)(t?t.value():o);return Object(n.useEffect)(()=>{if(t){r(t.value());const e=e=>r(e);return t.subscribe(e),()=>t.unsubscribe(e)}return()=>{}},[t]),i}},"xnr+":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 2" width="18" height="2"><rect width="18" height="2" fill="currentColor" rx="1"/></svg>'}}]);