(window.webpackJsonp=window.webpackJsonp||[]).push([["top-left-button"],{"+k/b":function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("wVAQ"),a=n("FfBj"),o=n("txPx");n("bSeV");const r=Object(o.getLogger)("Profile.Referral");function s(e){return e.ok?e.json():e.json().then(e=>{throw new Error(e.detail)})}function c(e,t,n){const a={method:t,credentials:"include",headers:new Headers};return"POST"===t&&(a.headers=new Headers({"Content-Type":"application/json"}),a.body=n),Object(i.fetch)(e,a)}function l({plan:e,billingCycle:t}){return(n="/tvcoins/pro-plan/",i=JSON.stringify({pro_plan:e,billing_cycle:t}),c(n,"POST",i)).then(e=>s(e)).catch(e=>{throw r.logError("Error while redeem plan "+e),e});var n,i}function u(){return(e="/tvcoins/details/",c(e,"GET")).then(e=>s(e)).then(e=>{return t=e,Object.assign({},t,{coins:parseFloat(Object(a.round2or0)(parseFloat(t.coins.toString())))});var t});var e}function h(e){return parseFloat(Object(a.round2or0)(parseFloat(e.toString())))}},"/KDZ":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("q1tI");class a extends i.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addListener(this._handleChange)}_unsubscribe(e){e.removeListener(this._handleChange)}}},"0YpW":function(e,t,n){"use strict";n.r(t),n.d(t,"setFixedBodyState",(function(){return s}));var i=n("J7Nl"),a=n("IoBF");let o=0,r=!1;function s(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++o){const e=Object(i.a)(t,"overflow"),a=Object(i.b)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&(Object(i.f)(n,"right",Object(i.d)()+"px"),t.style.paddingRight=a+Object(i.d)()+"px",r=!0),t.classList.add("i-no-scroll")}else if(!e&&o>0&&0==--o&&(t.classList.remove("i-no-scroll"),r)){Object(i.f)(n,"right","0px");let e=0;e=Object(a.a)(Object(i.c)(n)||0),t.scrollHeight<=t.clientHeight&&(e-=Object(i.d)()),t.style.paddingRight=(e<0?0:e)+"px",r=!1}}},"1TxM":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("q1tI"),a=n.n(i),o=n("17x9"),r=n.n(o);const s=a.a.createContext({});function c(e,t){r.a.checkPropTypes(t,e,"context","RegistryContext")}function l(e){const{validation:t,value:n}=e;return c(n,t),a.a.createElement(s.Provider,{value:n},e.children)}function u(e){const t=Object(i.useContext)(s);return c(t,e),t}function h(){return s}},"3j+J":function(e,t,n){e.exports={
wrapper:"wrapper-2wbe1KZX",labelRow:"labelRow-2wbe1KZX",label:"label-2wbe1KZX",labelHint:"labelHint-2wbe1KZX",labelOn:"labelOn-2wbe1KZX"}},"3nHz":function(e,t,n){"use strict";n.r(t),n.d(t,"SupportNotificationTools",(function(){return m}));n("HbRj");var i=n("YFKU"),a=(n("bSeV"),n("TxTq")),o=n.n(a),r=n("PQvG"),s=n("aIyQ"),c=n.n(s),l=n("mN2R"),u=n("txPx");const h=Object(u.getLogger)("Notifications.Support");var d;!function(e){e.TicketReceived="ticket-received",e.AnswerReceived="answer-received",e.AnswerUpdated="answer-updated",e.TicketStatusChanged="ticket-status-changed",e.CustomerFeedbackReceived="customer-feedback-received"}(d||(d={}));let b=null;class m{constructor(){var e;this._ticketReceived=new c.a,this._answerReceived=new c.a,this._answerUpdated=new c.a,this._ticketStatusChanged=new c.a,this._customerFeedbackReceived=new c.a,this._countChanged=new c.a,this._count=0,Object(l.a)()?null===(e=window.pro)||void 0===e||e.isSupportAvailable().then(e=>{e?(this._handleLoginStateChange(),window.loginStateChange.subscribe(this,this._handleLoginStateChange)):h.logInfo("Stop SupportNotificationTools initialization because user is Free or Trial without active package.")}):h.logInfo("Stop SupportNotificationTools initialization because Support API is unavailable.")}getCount(){return this._count}ticketReceived(){return this._ticketReceived}answerReceived(){return this._answerReceived}answerUpdated(){return this._answerUpdated}statusChanged(){return this._ticketStatusChanged}customerFeedbackReceived(){return this._customerFeedbackReceived}countChanged(){return this._countChanged}destroy(){window.loginStateChange.unsubscribe(this,this._handleLoginStateChange),this._unsubscribeFromPushStream(),this._ticketReceived.destroy(),this._answerReceived.destroy(),this._answerUpdated.destroy(),this._ticketStatusChanged.destroy(),this._customerFeedbackReceived.destroy(),this._countChanged.destroy(),b=null}static getInstance(){return null===b&&(b=new m),b}_subscribeToPushStream(){this._subscribeToTicketReceived(),this._subscribeToAnswerReceived(),this._subscribeToAnswerUpdated(),this._subscribeToTicketStatusChanged(),this._subscribeToCustomerFeedbackReceived()}_unsubscribeFromPushStream(){o.a.off(d.TicketReceived),o.a.off(d.AnswerReceived),o.a.off(d.AnswerUpdated),o.a.off(d.TicketStatusChanged),o.a.off(d.CustomerFeedbackReceived)}_handleLoginStateChange(){window.pro&&window.pro.isSupportAvailable()?(this._subscribeToPushStream(),this._updateUnreadsCount()):this._unsubscribeFromPushStream()}_processTicketReceived(e){this._ticketReceived.fire(e)}_processAnswerReceived(e){const t={title:i.t("TradingView Support Team"),main:i.t("You have received response from TradingView support team. {0}Click here to see it.{1}").format('<a href="https://www.tradingview.com/#support">',"</a>")};this._updateUnreadsCount(),r.show(t.title,t.main),this._answerReceived.fire(e)}_processAnswerUpdated(e){this._updateUnreadsCount(),this._answerUpdated.fire(e)}_processStatusChanged(e){this._ticketStatusChanged.fire(e)}_processCustomerFeedbackReceived(e){
this._customerFeedbackReceived.fire(e)}_subscribeToTicketReceived(){o.a.on(d.TicketReceived,e=>{this._processTicketReceived(e)})}_subscribeToAnswerReceived(){o.a.on(d.AnswerReceived,e=>{this._processAnswerReceived(e)})}_subscribeToAnswerUpdated(){o.a.on(d.AnswerUpdated,e=>{this._processAnswerUpdated(e)})}_subscribeToTicketStatusChanged(){o.a.on(d.TicketStatusChanged,e=>{this._processStatusChanged(e)})}_subscribeToCustomerFeedbackReceived(){o.a.on(d.CustomerFeedbackReceived,e=>{this._processCustomerFeedbackReceived(e)})}_updateUnreadsCount(){if(!Object(l.a)()){const e="Cannot fetch support unreads count because Support API is unavailable.";return h.logInfo(e),Promise.reject(e)}return l.b.unreads.get().then(e=>{if(void 0!==e.unreadsCount&&e.unreadsCount>=0){const t=this._count;this._count=e.unreadsCount>=0?e.unreadsCount:t,this._countChanged.fire(this._count,t)}}).catch(e=>{h.logWarn("Failed to fetch unread tickets' answers: "+e)})}}},"4pMH":function(e,t,n){},"5GBv":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path fill="currentColor" d="M5 8a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1zm0 6a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1zm1 5a1 1 0 1 0 0 2h16a1 1 0 1 0 0-2H6z"/></svg>'},"5dcR":function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="M7.5 4.5h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-14a2 2 0 0 1-2-2v-14c0-1.1.9-2 2-2zM9 9.5h11M9 13.5h11M9 17.5h11"/></svg>'},"5ijr":function(e){e.exports=JSON.parse('{"switcherWrapper":"switcherWrapper-1wFH-_jm","size-small":"size-small-1gT-kZYO","size-large":"size-large-MOSirnj_","intent-select":"intent-select-2kut8F29","switcherThumbWrapper":"switcherThumbWrapper-2u191lDO","input":"input-J7QIcTTo","switcherTrack":"switcherTrack-2XruDVTa","intent-default":"intent-default-3soo5rvS","switcherThumb":"switcherThumb-2yuEucci","focus":"focus-uZMRkCO0"}')},"6G1D":function(e,t,n){},"6kzd":function(e,t,n){"use strict";n.r(t),n.d(t,"showTVCoinsDialog",(function(){return o}));var i=n("mrSG"),a=n("oU8P");function o(e){Promise.all([n.e("vendors"),n.e(18),n.e("dialogs-core"),n.e(24),n.e(32),n.e(33),n.e(172),n.e(164),n.e("tv-coins-dialog")]).then(n.bind(null,"fW9b")).then(t=>{const n=e||{},{page:o=a.CoinsPage.Main,tab:r=a.MainTab.GetCoins,productId:s=a.ProductId.MidCoins}=n,c=Object(i.d)(n,["page","tab","productId"]);new t.TVCoinsDialog(Object.assign({page:o,tab:r},c)).open()})}},"8Rai":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n("efOF"),o=n("R5JZ");function r(e){const{click:t,mouseDown:n,touchEnd:r,touchStart:s,handler:c,reference:l,ownerDocument:u=document}=e,h=Object(i.useRef)(null),d=Object(i.useRef)(new a.a("timestamp").timeStamp);return Object(i.useLayoutEffect)(()=>{const e={click:t,mouseDown:n,touchEnd:r,touchStart:s},i=l?l.current:h.current;return Object(o.a)(d.current,i,c,u,e)},[t,n,r,s,c]),l||h}},"9dlw":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}))
;var i=n("mrSG"),a=n("q1tI"),o=n.n(a),r=n("i8i4"),s=n.n(r),c=(n("EsMY"),n("AiMB")),l=n("DTHj"),u=n("X0gx"),h=n("8Rai");function d(e){const{controller:t,children:n,isOpened:r,closeOnClickOutside:d=!0,doNotCloseOn:b,onClickOutside:m,onClose:p}=e,g=Object(i.d)(e,["controller","children","isOpened","closeOnClickOutside","doNotCloseOn","onClickOutside","onClose"]),f=Object(a.useContext)(u.a),v=Object(h.a)({handler:function(e){m&&m(e);if(!d)return;if(b&&e.target instanceof Node){const t=s.a.findDOMNode(b);if(t instanceof Node&&t.contains(e.target))return}p()},mouseDown:!0,touchStart:!0});return r?o.a.createElement(c.a,{top:"0",left:"0",right:"0",bottom:"0",pointerEvents:"none"},o.a.createElement("span",{ref:v,style:{pointerEvents:"auto"}},o.a.createElement(l.b,Object.assign({},g,{isOpened:r,onClose:p,onScroll:function(t){const{onScroll:n}=e;n&&n(t);t.stopPropagation()},customCloseDelegate:f,ref:t}),n))):null}},AsAg:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.TopAll="top:all",e.TopMonth="top:month",e.TopWeek="top:week",e.TopDay="top:day",e.Moderator="moderator",e.ProPremium="pro:pro_premium",e.ProPremiumTrial="pro:pro_premium_trial",e.ProRealTime="pro:pro_realtime",e.ProRealTimeTrial="pro:pro_realtime_trial",e.Pro="pro:pro",e.ProTrial="pro:pro_trial"}(i||(i={}))},CEoo:function(e,t,n){e.exports={icon:"icon-2NrYq-zE"}},ETJG:function(e,t,n){"use strict";n.r(t);var i=n("q1tI"),a=n.n(i),o=n("i8i4"),r=n("Eyy1"),s=n("qFKp"),c=n("tU7i"),l=n("9dlw"),u=n("YFKU"),h=n("MB0Y"),d=n("OiSa"),b=n("JWMC");function m(e){const[t,n]=Object(i.useState)(d.isDrawingToolbarVisible.value());return Object(i.useEffect)(()=>{const e=()=>n(d.isDrawingToolbarVisible.value());return d.isDrawingToolbarVisible.subscribe(e),()=>d.isDrawingToolbarVisible.unsubscribe(e)},[]),a.a.createElement(h.b,{className:e.className,reference:e.reference,theme:e.theme,checked:t,label:window.t("Drawings panel"),preventLabelHighlight:!0,value:"leftToolbarSwitcher",onChange:function(){const e=!d.isDrawingToolbarVisible.value();d.isDrawingToolbarVisible.setValue(e);const t="Drawings panel "+(e?"on":"off");Object(b.trackEvent)("GUI","Platform menu",t)}})}var p=n("N5tr"),g=n("mNbo"),f=n("xOeO");n("HV9r"),n("5GBv");var v=n("17x9");const w={chartWidgetCollection:v.any.isRequired,chartChangesWatcher:v.any.isRequired,saveChartService:v.any.isRequired,loadChartService:v.any.isRequired,sharingChartService:v.any.isRequired};var C=n("1TxM"),_=(n("bSeV"),n("fZEr")),k=n("xlKU"),S=n("TSYQ"),O=n.n(S),E=n("LsFU"),T=n("9tJu"),y=n("KKsp"),j=(n("HbRj"),n("EsvI")),N=n("oiZD"),M=n("zM7N"),x=n("kyOc");const A=Object(C.b)();var P=n("ndm/"),W=n("wVAQ");var R=n("KFwr"),L=n("Sn4D"),I=n("Iivm"),D=n("e3/o"),B=n("Wcvj"),F=n("/KDZ"),z=n("CEoo"),H=n("Xzy5");function V(e){return a.a.createElement(F.a,{rule:"screen and (max-width: 428px)"},t=>t?a.a.createElement(U,Object.assign({},e)):a.a.createElement($,Object.assign({},e)))}function q(e){return a.a.createElement(p.b,Object.assign({toolbox:a.a.createElement(I.a,{className:z.icon,icon:H}),dontClosePopup:!0,
suppressToolboxClick:!0},e))}function U(e){const{children:t,className:n,drawerClassName:o,menuItemTheme:r,label:s,icon:c,labelClassName:l}=e,[u,h]=Object(i.useState)(!1);return a.a.createElement(a.a.Fragment,null,a.a.createElement(q,{theme:r,label:s,icon:c,labelClassName:l,className:n,onClick:function(){h(!u)}}),u&&a.a.createElement(L.a,{className:o,position:"Bottom",onClose:function(){h(!1)}},t))}function $(e){const{children:t,className:n,menuClassName:o,menuItemTheme:r,label:s,icon:c,labelClassName:u}=e,h=Object(i.useRef)(Object(D.randomHash)()),d=Object(i.useRef)(null),{isMenuOpened:b,onTriggerClick:m,onTriggerMouseOver:p,onMenuClose:g,getPosition:f,onMenuMouseOver:v}=Object(B.a)(h.current,d);return a.a.createElement(a.a.Fragment,null,a.a.createElement(q,{theme:r,label:s,icon:c,labelClassName:u,className:n,onClick:m,onMouseOver:p,reference:d,isHovered:b}),a.a.createElement(l.a,{className:o,position:f,onClose:g,isOpened:b,doNotCloseOn:d.current,onMouseOver:v},t))}var G=n("JENg"),Y=n("nPPD"),K=n("h4Fc"),Q=n("xBv+"),J=n("2uTr"),X=n("+GxX"),Z=n("UI/U"),ee=n("ReLp"),te=n("q56G"),ne=n("fsSD"),ie=n("e6z0");const ae=Object(X.isFeatureEnabled)("hide_chart_autosave_toggle"),oe=Object(Y.a)(p.a,Z),re=Object(Y.a)(p.a,ee),se=Object(Y.a)(p.a,te),ce=R.a,le=Object(Y.a)(p.a,ne),ue={copy:window.t("Copy"),newChartLayout:window.t("New layout"),loadChartLayout:Object(J.appendEllipsis)(window.t("All layouts")),rename:Object(J.appendEllipsis)(window.t("Rename")),saveAs:Object(J.appendEllipsis)(window.t("Make a copy")),saveChartLayout:window.t("Save layout"),saveChartLayoutLong:window.t("Save all charts for all symbols and intervals on your layout"),autoSaveTimerHint:Object(K.b)()};function he(e){const{wasChanges:t,isProcessing:n,chartId:i,onSaveChart:o,onRenameChart:r,onSaveAsChart:s,onLoadChart:c,onNewChart:l,onExportData:d,isAutoSaveEnabled:b,autoSaveId:m,sharingId:f,onAutoSaveChanged:v,isSharingEnabled:w,onSharingChanged:C,layoutId:_,title:k,isAuthenticated:O,layoutItems:E}=e;return a.a.createElement(F.a,{rule:"screen and (max-width: 428px)"},e=>{const j=e?se:oe,N=e?re:oe,M=e?ce:void 0,x=e?le:void 0;return a.a.createElement(a.a.Fragment,null,O&&a.a.createElement(V,{icon:G.a[_],label:k,className:ie.recentLayouts,menuClassName:ie.submenu,menuItemTheme:j,drawerClassName:ie.drawer},a.a.createElement(a.a.Fragment,null,E.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Q.a,{text:window.t("Recently used")}),E.map(t=>{const n=Number(t.id)===i;return a.a.createElement(p.b,{key:t.id,className:S(ie.layoutItemWrap,n&&ie.active),labelRowClassName:ie.labelRow,link:n?void 0:`/chart/${t.url}${window.location.search}`,onClick:n?T:void 0,trackEventObject:(o="Switch chart layout",{label:o,category:"GUI",event:"Burger Menu"}),label:a.a.createElement("div",{className:ie.layoutItem},a.a.createElement("div",{className:S(ie.layoutTitle,e&&ie.layoutTitleMobile)},t.name),a.a.createElement("div",{className:ie.layoutMeta},t.short_symbol,", ",t.interval)),trackRightClick:!0,trackMouseWheelClick:!0});var o}),a.a.createElement(y.a,{
key:"recent-layouts"})),a.a.createElement(p.b,{key:"new-chart",theme:x,label:ue.newChartLayout,onClick:l,className:S(ie.layoutItemWrap,e&&ie.mobile),labelRowClassName:ie.labelRow}),a.a.createElement(p.b,{key:"load-chart",theme:x,label:ue.loadChartLayout,onClick:c,className:S(ie.layoutItemWrap,e&&ie.mobile,"js-save-load-menu-item-load-chart"),labelRowClassName:ie.labelRow,shortcut:Object(u.t)("Dot",{context:"hotkey"})}))),a.a.createElement(p.b,{key:"save",isDisabled:Boolean(n||!t&&i),label:ue.saveChartLayout,onClick:o,shortcut:e?void 0:"Ctrl+S",className:ie.saveLayoutMenuItem,theme:N}),O&&void 0!==i&&a.a.createElement(a.a.Fragment,null,void 0!==b&&void 0!==v&&!ae&&a.a.createElement(h.b,{key:"auto-save",checked:b,onChange:v,className:ie.switcher,theme:M,id:m,label:window.t("Autosave"),labelDescription:ue.autoSaveTimerHint,value:"autoSaveSwitcher"}),void 0!==w&&void 0!==C&&a.a.createElement(h.b,{key:"sharing",checked:w,onChange:C,className:ie.switcher,theme:M,id:f,label:window.t("Sharing"),labelDescription:window.t("Everyone with the link can view and copy"),value:"sharingSwitcher"}),a.a.createElement(p.b,{key:"rename",label:ue.rename,onClick:r,theme:N}),a.a.createElement(p.b,{key:"save-as",label:ue.saveAs,onClick:s,theme:N})),!Object(g.isOnMobileAppPage)("any")&&a.a.createElement(p.b,{key:"export-chart-data",label:Object(J.appendEllipsis)(window.t("Export chart data")),onClick:d,className:S("apply-common-tooltip common-tooltip-vertical"),theme:N,title:window.t("All information from the selected chart, including the symbol & indicators will be saved to a CSV file")}),a.a.createElement(y.a,{key:"layout-settings-end"}))});function T(e,t){t.preventDefault()}}var de=n("b5Gw");const be=Object(C.b)();class me extends i.PureComponent{constructor(e,t){super(e,t),this._layoutsRequest=null,this._requestRecentLayouts=()=>{this.props.isAuthenticated?(this._layoutsRequest=Object(de.makeCancelable)(Object(W.fetch)("/my-charts/?limit=4",{credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("not ok")}).then(e=>e.sort((e,t)=>e.modified_iso>t.modified_iso?-1:1))),this._layoutsRequest.promise.then(e=>{this._layoutsRequest=null,this.setState({recentLayouts:e})}).catch(e=>{if(!Object(de.isCancelled)(e))throw e})):this._layoutsRequest&&this._layoutsRequest.cancel()},this._onChangeHasChanges=e=>{this.setState({wasChanges:e})},this._onChangeAutoSaveEnabled=e=>{this.setState({isAutoSaveEnabled:e})},this._onChangeSharingEnabled=e=>{this.setState({isSharingEnabled:e})},this._onChangeTitle=e=>{this.setState({title:e})},this._onChangeId=e=>{this.setState({id:e})},this._onChartAboutToBeSaved=()=>{this.setState({isProcessing:!0})},this._onChartSaved=()=>{this.setState({isProcessing:!1})},this._handleAutoSaveEnabled=e=>{this.context.saveChartService.setAutoSaveEnabled(e),this._trackEvent(e?"Autosave on":"Autosave off")},this._handleSharingEnabled=e=>{Object(r.ensureDefined)(this.context.sharingChartService).setSharingEnabled(e),this._trackEvent(e?"Sharing on":"Sharing off")},this._handleClickSave=()=>{
this.context.saveChartService.saveChartOrShowTitleDialog(),this._trackEvent("Save")},this._handleClickSaveAs=()=>{this.context.saveChartService.saveChartAs(),this._trackEvent("Make a copy")},this._handleClickNew=()=>{Object(P.a)(),this._trackEvent("New chart layout")},this._handleExportData=()=>{const e=me._exportDialogPromise=Promise.all([n.e(1),n.e(2),n.e(6),n.e(7),n.e(9),n.e(11),n.e(20),n.e(22),n.e(28),n.e(29),n.e(35),n.e(37),n.e(71),n.e(611),n.e(8),n.e(10),n.e(36),n.e("chart-export-dialog")]).then(n.bind(null,"Mz71")).then(t=>{me._exportDialogPromise===e&&(t.showChartExportDialog(this.context.chartWidgetCollection),this._trackEvent("Export chart data"))})},this._handleClickLoad=()=>{this.context.loadChartService.showLoadDialog(),this._trackEvent("Load chart layout")},this._handleClickRename=()=>{this.context.saveChartService.renameChart(),this._trackEvent("Rename")},Object(C.d)(t,{chartWidgetCollection:v.any.isRequired,chartChangesWatcher:v.any.isRequired,saveChartService:v.any.isRequired,sharingChartService:v.any.isRequired,loadChartService:v.any.isRequired});const{chartWidgetCollection:i,chartChangesWatcher:a,saveChartService:o,sharingChartService:s}=t;this.state={isProcessing:!1,id:i.metaInfo.id.value(),title:i.metaInfo.name.value(),wasChanges:a.hasChanges(),isAutoSaveEnabled:o.autoSaveEnabled().value(),isSharingEnabled:!!s&&s.sharingEnabled().value(),iconHovered:!1,recentLayouts:[]}}componentDidMount(){const{chartSaver:e,isAuthenticated:t}=this.props,{chartWidgetCollection:n,chartChangesWatcher:i,saveChartService:a,sharingChartService:o}=this.context;i.getOnChange().subscribe(this,this._onChangeHasChanges),a.autoSaveEnabled().subscribe(this._onChangeAutoSaveEnabled),Object(r.ensureDefined)(o).sharingEnabled().subscribe(this._onChangeSharingEnabled),n.metaInfo.name.subscribe(this._onChangeTitle),n.metaInfo.id.subscribe(this._onChangeId),e.chartSaved().subscribe(this,this._onChartSaved),e.chartAboutToBeSaved().subscribe(this,this._onChartAboutToBeSaved),t&&this._requestRecentLayouts(),window.loginStateChange.subscribe(this,this._requestRecentLayouts)}componentWillUnmount(){const{chartSaver:e}=this.props,{chartWidgetCollection:t,chartChangesWatcher:n,saveChartService:i,sharingChartService:a}=this.context;n.getOnChange().unsubscribe(this,this._onChangeHasChanges),i.autoSaveEnabled().unsubscribe(this._onChangeAutoSaveEnabled),Object(r.ensureDefined)(a).sharingEnabled().unsubscribe(this._onChangeSharingEnabled),t.metaInfo.name.unsubscribe(this._onChangeTitle),t.metaInfo.id.unsubscribe(this._onChangeId),e.chartSaved().unsubscribe(this,this._onChartSaved),e.chartAboutToBeSaved().unsubscribe(this,this._onChartAboutToBeSaved),window.loginStateChange.unsubscribe(this,this._requestRecentLayouts),null!==this._layoutsRequest&&this._layoutsRequest.cancel()}render(){const{id:e,isAuthenticated:t}=this.props,{chartWidgetCollection:n}=this.context,{isProcessing:a,id:o,wasChanges:r,isAutoSaveEnabled:s,isSharingEnabled:c,recentLayouts:l}=this.state,u={isProcessing:a,wasChanges:r,id:e,isAuthenticated:t,
title:n.metaInfo.name.value(),layoutId:n.layout.value(),chartId:null!==o?o:void 0,layoutItems:l,onSaveChart:this._handleClickSave,onRenameChart:this._handleClickRename,onSaveAsChart:this._handleClickSaveAs,onLoadChart:this._handleClickLoad};return u.onNewChart=this._handleClickNew,u.onExportData=this._handleExportData,u.onAutoSaveChanged=this._handleAutoSaveEnabled,u.onSharingChanged=this._handleSharingEnabled,u.isAutoSaveEnabled=s,u.isSharingEnabled=c,u.autoSaveId="chart-auto-save",i.createElement(he,Object.assign({},u))}_trackEvent(e){Object(b.trackEvent)("GUI","Burger Menu",e)}}me.contextType=be,me._exportDialogPromise=null;var pe=n("mkWe"),ge=n("FQhm"),fe=n("wjJt");function ve(e){const{spin:t}=e,[n,o]=Object(i.useState)(t?2:0);return Object(i.useEffect)(()=>{2!==n&&t&&o(1)},[t]),a.a.createElement("svg",{width:"28",height:"28",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"currentColor"},a.a.createElement("path",{d:"M6 7h16a1 1 0 1 1 0 2H6z",className:O()(fe.line,1===n&&fe.starting,2===n&&fe.spin1,3===n&&fe.stopping1),onAnimationIteration:function(){2!==n||t||o(3)},onAnimationEnd:function(){1===n&&o(2);3===n&&o(0)}}),a.a.createElement("path",{d:"M6 13h16a1 1 0 1 1 0 2H6z",className:O()(fe.line,1===n&&fe.starting,2===n&&fe.spin2,3===n&&fe.stopping2)}),a.a.createElement("path",{d:"M6 19h16a1 1 0 1 1 0 2H6z",className:O()(fe.line,1===n&&fe.starting,2===n&&fe.spin3,3===n&&fe.stopping3)}),a.a.createElement("path",{d:"M6 9a1 1 0 1 1 0 -2zM6 15a1 1 0 1 1 0 -2zM6 21a1 1 0 1 1 0 -2z"})))}let we=null;var Ce=n("S8UK"),_e=n("lxNp"),ke=n("yq8s"),Se=n("NxCe"),Oe=n("bABd");function Ee(e){const{balance:t}=e;return void 0===t?null:i.createElement("div",{className:Oe["balance-toolbox"]},i.createElement("span",{className:Oe.balance},Object(ke.a)(t,window.locale)),i.createElement(I.a,{icon:Se,className:Oe.icon}))}var Te=n("mI+W"),ye=n("6kzd"),je=n("oU8P");function Ne(e){const{theme:t,trackEventObject:n}=e,[a,o]=i.useState(window.is_authenticated?void 0:null);i.useEffect(()=>{let e=!0;return window.user.id&&Te.tvReferralDetails.getReferralDetails().catch(()=>null).then(t=>{e&&o(null==t?void 0:t.coins)}),()=>{e=!1}},[]);const r=i.useCallback(()=>{Object(X.isFeatureEnabled)("tvcoins_donations")?Object(ye.showTVCoinsDialog)({tab:je.MainTab.GetCoins}):window.open("/share-your-love/","_blank")},[Te.tvReferralDetails]);return i.createElement(p.b,{theme:t,label:u.t("Coins"),toolbox:null!==a&&i.createElement(Ee,{balance:a}),target:"_blank",trackEventObject:n,trackRightClick:!0,trackMouseWheelClick:!0,onClick:r})}var Me=n("xiSt"),xe=n("Vtf4");function Ae(e){const{joined:t}=e;return void 0===t?null:i.createElement("div",{className:xe["joined-toolbox"]},i.createElement("span",{className:xe.joined},t),i.createElement(I.a,{icon:Me,className:xe.icon}))}function Pe(e){const{theme:t}=e,[n,a]=i.useState(window.is_authenticated?void 0:null);i.useEffect(()=>{let e=!0;return window.user.id&&Te.tvReferralDetails.getReferralDetails().catch(()=>null).then(t=>{e&&a(null==t?void 0:t.joined)}),()=>{e=!1}},[]);const o=i.useCallback(()=>{
Object(X.isFeatureEnabled)("tvcoins_donations")?Object(ye.showTVCoinsDialog)({tab:je.MainTab.Refer}):window.open("/share-your-love/","_blank")},[Te.tvReferralDetails]);return i.createElement(p.b,{theme:t,label:u.t("Referred friends"),toolbox:null!==n&&i.createElement(Ae,{joined:n}),trackRightClick:!0,trackMouseWheelClick:!0,onClick:o})}var We=n("N22A"),Re=n("o9lb"),Le=n("eI3D");function Ie(e){return e?Le.OFFERS.trial in e?u.t("Take free trial"):Le.OFFERS.early_access in e?u.t("Explore offers"):Le.OFFERS.six_months in e?u.t("Get six months free"):Le.OFFERS.longer_cycle in e?u.t("Save with an annual plan"):Le.OFFERS.one_usd in e?u.t("Upgrade for $1"):Le.OFFERS.last_chance in e?u.t("Explore offers"):u.t("Explore our plans"):u.t("Explore our plans")}var De=n("yihy"),Be=n("5dcR"),Fe=n("Z3xJ"),ze=n("W0KT"),He=n("ei/8");const Ve=Object(Y.a)(p.a,ze),qe=Object(Y.a)(p.a,te),Ue=Object(Y.a)(p.a,Z),$e=Object(Y.a)(p.a,ee),Ge=Object(Y.a)(p.a,ne),Ye=(Ke=e=>i.createElement(h.b,{id:"theme-switcher",switchReference:e.reference,checked:e.isDarkTheme,label:window.t("Dark color theme"),preventLabelHighlight:!0,value:"themeSwitcher",onChange:e.onClick,theme:e.theme,className:e.className}),(Qe=class extends i.PureComponent{constructor(e,t){super(e,t),this._handleOutsideThemeChange=e=>{this.setState({isDarkTheme:e===M.StdTheme.Dark})},this._handleClick=()=>{const{trackEventName:e="Themes"}=this.props,{chartWidgetCollection:t}=this.context,n=t.activeChartWidget.value();n.withModel(n,()=>{const t=n.model(),i=Object(j.getCurrentTheme)().name===M.StdTheme.Dark?M.StdTheme.Light:M.StdTheme.Dark;if(Object(M.isStdTheme)(Object(j.extractThemeFromModel)(t)))this._applyTheme(i);else{const e=Object(u.t)("You're changing the user interface to the {name} theme. Would you like to switch the chart template's theme too?").format({name:Object(x.a)(i)});Object(_.showConfirm)({text:e,onConfirm:({dialogClose:e})=>{this._applyTheme(i),e()},onCancel:({dialogClose:e})=>{Object(N.setTheme)(i),Object(j.syncTheme)(),e()}})}this.setState({isDarkTheme:Object(j.getCurrentTheme)().name!==M.StdTheme.Dark}),Object(b.trackEvent)("GUI",e,"Switch to "+i+" theme")})},Object(C.d)(t,{chartWidgetCollection:v.any.isRequired}),this.state={isDarkTheme:Object(j.getCurrentTheme)().name===M.StdTheme.Dark}}componentDidMount(){N.watchedTheme.subscribe(this._handleOutsideThemeChange)}componentWillUnmount(){N.watchedTheme.unsubscribe(this._handleOutsideThemeChange)}render(){const{className:e,reference:t,theme:n}=this.props,{isDarkTheme:a}=this.state;return i.createElement(Ke,{className:e,reference:t,isDarkTheme:a,theme:n,onClick:this._handleClick})}_applyTheme(e){const{chartWidgetCollection:t}=this.context;Object(j.loadTheme)(e,!0,!1,t).then(()=>{window.saver.saveChartSilently()})}}).contextType=A,Qe);var Ke,Qe;const Je=Object(C.b)();class Xe extends i.PureComponent{constructor(e,t){super(e,t),this._onChangeHasChanges=e=>{this.setState({hasChanges:e})},this._handleClickGopro=()=>{window.open("/gopro/?source=chart&feature=burger_menu_profile_info","_blank"),this._close()},
this._handleClickHelpCenter=()=>{Object(f.showSupportDialog)(),this._close()},this._handleClickWatchlist=()=>{Promise.all([n.e(1),n.e(7),n.e(11),n.e(20),n.e(22),n.e(28),n.e(29),n.e(10),n.e("watchlist-dialog")]).then(n.bind(null,"lHkk")).then(e=>{const t=new(0,e.WatchlistDialogRenderer);return null!==we&&we.hide(),t.show(),we=t,t}),this._close()},this._handleClickMySupportTickets=()=>{Object(f.showSupportDialog)({initialState:"tickets"}),this._close()},this._handleClickTrading=()=>{Object(Ce.a)(),this._close()},this._close=()=>{this.setState({isOpened:!1})},this._handleClickButton=()=>{const{isOpened:e}=this.state;e?this.setState({isOpened:!1}):this.setState({isOpened:!0})},this._getDropdownPosition=()=>{if(!this._button)return{x:0,y:0};const e=this._button.getBoundingClientRect();return{x:e.left+e.width+1,y:e.top}},this._createTrackEventObject=e=>({category:"GUI",event:"Platform menu",label:e}),this._renderProfileMenuContent=e=>{const{username:t,userpic:n}=this.props,a=this.props.badges?this._badgesFilter(this.props.badges):void 0;return i.createElement("span",{className:He.profileMenu},i.createElement("img",{className:He.userPic,src:n}),i.createElement("div",{className:He.userRow},i.createElement("span",{className:S(He.userName,e&&He.userNameMobile,"apply-overflow-tooltip")},t),a&&a.map((e,t)=>i.createElement(Re.a,{key:t,name:e.name}))))},this._handleShortcutsClick=()=>{Object(f.showSupportDialog)({initialState:"shortcuts"})},this._renderMenuLabel=(e,t)=>i.createElement("span",{className:S(t?He.shortMenuLabel:He.menuLabel,"apply-overflow-tooltip")},e),this._handleOpenFromHint=()=>{this.setState({isOpened:!0})},this._onChartAboutToBeSaved=()=>{this.setState({isProcessing:!0})},this._onChartSaved=()=>{this.setState({isProcessing:!1})},this._handleShowLoadDialog=()=>{this.context.loadChartService.showLoadDialog()},this._badgesFilter=e=>e.filter(e=>!Object(E.isModerator)(e.name)&&!Object(E.isTop)(e.name)),Object(C.d)(t,{loadChartService:v.any.isRequired,chartChangesWatcher:v.any.isRequired,chartWidgetCollection:v.any.isRequired});const{chartChangesWatcher:a}=this.context;this.state={isOpened:!1,isProcessing:!1,hasChanges:a.hasChanges()}}componentDidMount(){const{chartSaver:e}=this.props,{chartChangesWatcher:t}=this.context;e.chartSaved().subscribe(this,this._onChartSaved),e.chartAboutToBeSaved().subscribe(this,this._onChartAboutToBeSaved),ge.subscribe("OPEN_BURGER_MENU",this._handleOpenFromHint,null),t.getOnChange().subscribe(this,this._onChangeHasChanges),this._hotkeys=Object(_e.createGroup)({desc:"Save/Load"}),this._hotkeys.add({desc:window.t("Load Chart Layout"),handler:this._handleShowLoadDialog,hotkey:190})}componentWillUnmount(){const{chartSaver:e}=this.props;e.chartSaved().unsubscribe(this,this._onChartSaved),e.chartAboutToBeSaved().unsubscribe(this,this._onChartAboutToBeSaved),ge.unsubscribe("OPEN_BURGER_MENU",this._handleOpenFromHint,null),Object(r.ensureDefined)(this._hotkeys).destroy()}render(){
const{globalNotifications:e,supportNotifications:t}=this.props,{isOpened:n,isProcessing:a,hasChanges:o}=this.state,r=e+t;return i.createElement("div",{className:He.menu},i.createElement("div",{ref:e=>this._button=e,className:He.buttonWrap},i.createElement(c.b,{isHovered:n,className:He.button,icon:i.createElement(i.Fragment,null,i.createElement(ve,{spin:a}),o&&i.createElement("span",{className:He.dot})),title:this._getMainMenuTitle(),onClick:this._handleClickButton}),r>0&&i.createElement("span",{className:S(He.menuNotifications,He.notifications)},r)),i.createElement(pe.b,null,i.createElement(F.a,{rule:"screen and (max-width: 428px)"},e=>e?n&&i.createElement(L.a,{className:He.mainMenuDrawer,onClose:this._close,position:"Left"},this._renderMenuItems(e)):i.createElement(l.a,{className:He.popupMenu,doNotCloseOn:this,minWidth:Object(g.isOnMobileAppPage)("new")?175:void 0,isOpened:n,onClose:this._close,position:this._getDropdownPosition},this._renderMenuItems(e)))))}_renderUserMenuItem(e){const{showSupportTicketsItem:t,username:n,isBroker:a,isAuthenticated:o,availableOffers:r}=this.props,s={username:n,is_broker:a},c=e?qe:Ve,l=e?$e:Ue,u=e?Ge:void 0;return!Object(g.isOnMobileAppPage)("new")&&o?i.createElement(i.Fragment,null,i.createElement(V,{menuClassName:He.popupSubMenu,menuItemTheme:c,drawerClassName:He.drawer,label:this._renderProfileMenuContent(e),labelClassName:He.labelSubmenu},i.createElement(p.b,{className:S(He.subMenuItem,He.subMenuItemHighlighted),theme:u,label:Ie(r),onClick:this._handleClickGopro,trackEventObject:this._createTrackEventObject("Available Offers"),trackRightClick:!0,trackMouseWheelClick:!0}),i.createElement(p.b,{className:He.subMenuItem,theme:u,label:window.t("Profile"),link:Object(T.getUserProfilePath)(s),trackEventObject:this._createTrackEventObject("Profile"),trackRightClick:!0,trackMouseWheelClick:!0}),i.createElement(p.b,{className:He.subMenuItem,theme:u,label:this._renderMenuLabel(window.t("Profile Settings")),link:Object(T.getUserProfilePath)(s,{page:T.ProfilePages.Settings}),trackEventObject:this._createTrackEventObject("Profile settings"),trackRightClick:!0,trackMouseWheelClick:!0}),!a&&i.createElement(p.b,{className:He.subMenuItem,theme:u,label:window.t("Account & Billing"),link:Object(T.getUserProfilePath)(s,{page:T.ProfilePages.Billing}),trackEventObject:this._createTrackEventObject("Account & Billing"),trackRightClick:!0,trackMouseWheelClick:!0})),t&&i.createElement(p.b,{theme:l,label:this._renderMenuLabel(window.t("My Support Tickets")),onClick:this._handleClickMySupportTickets,trackEventObject:this._createTrackEventObject("My support tickets"),trackRightClick:!0,trackMouseWheelClick:!0})):null}_renderTradingMenuItem(e){var t,n;const a=e?$e:Ue,o=null===(n=null===(t=Object(We.tradingService)())||void 0===t?void 0:t.activeBroker())||void 0===n?void 0:n.metainfo().title;return i.createElement(p.b,{theme:a,label:this._renderMenuLabel(null!=o?o:window.t("Trading")),onClick:this._handleClickTrading,icon:Fe,trackEventObject:this._createTrackEventObject(null!=o?o:"Trading")})}
_renderMenuItems(e){const{isAuthenticated:t,globalNotifications:n,supportNotifications:a,chartSaver:o}=this.props,r=e?$e:Ue,c=e?R.a:void 0,l=e?Ge:void 0,u=Object(g.isOnMobileAppPage)("new"),h=this._canShowMobileWatchlist(),d=this._canShowMobileTrading();return i.createElement(i.Fragment,null,i.createElement(me,{id:"topleft-button-save-load",chartSaver:o,isAuthenticated:Boolean(t)}),h&&i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Watchlist")),icon:Be,onClick:this._handleClickWatchlist}),d&&this._renderTradingMenuItem(e),(h||d)&&i.createElement(y.a,null),this._renderUserMenuItem(e),i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Help Center"),a>0),toolbox:a>0?i.createElement("span",{className:He.notifications},a):void 0,onClick:this._handleClickHelpCenter,trackEventObject:this._createTrackEventObject("Contact support")}),!u&&i.createElement(i.Fragment,null,i.createElement(Pe,{theme:r}),t?i.createElement(Ne,{theme:r,trackEventObject:this._createTrackEventObject("TradingView Coins")}):null,i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("What's new"),n>0),toolbox:n>0?i.createElement("span",{className:He.notifications},n):void 0,onClick:this.props.onClickWhatsNew,trackEventObject:this._createTrackEventObject("What's new")}),i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Home")),link:"/",trackEventObject:this._createTrackEventObject("Home"),trackRightClick:!0,trackMouseWheelClick:!0}),i.createElement(V,{label:this._renderMenuLabel(window.t("More"),!0),menuItemTheme:r,drawerClassName:He.drawer,menuClassName:He.popupSubMenu},i.createElement(p.b,{className:He.subMenuItem,theme:l,label:this._renderMenuLabel(window.t("Ideas")),link:"/ideas/",trackEventObject:this._createTrackEventObject("Ideas"),trackRightClick:!0,trackMouseWheelClick:!0}),i.createElement(p.b,{className:He.subMenuItem,theme:l,label:this._renderMenuLabel(window.t("Markets")),link:"/markets/",trackEventObject:this._createTrackEventObject("Markets"),trackRightClick:!0,trackMouseWheelClick:!0}),i.createElement(p.b,{className:He.subMenuItem,theme:l,label:this._renderMenuLabel(window.t("Scripts")),link:"/script/",trackEventObject:this._createTrackEventObject("Scripts"),trackRightClick:!0,trackMouseWheelClick:!0}))),i.createElement(y.a,null),!u&&i.createElement(Ye,{className:He.switcher,theme:c,trackEventName:"Platform menu"}),i.createElement(m,{className:He.switcher,theme:c}),!u&&i.createElement(i.Fragment,null,!s.CheckMobile.any()&&i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Keyboard Shortcuts")),onClick:this._handleShortcutsClick,trackEventObject:this._createTrackEventObject("Keyboard shortcuts")}),i.createElement(y.a,null),t?i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Sign Out")),onClick:this.props.onClickSignOut,trackEventObject:this._createTrackEventObject("Sign Out")}):i.createElement(i.Fragment,null,i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Sign In")),onClick:this.props.onClickSignIn,
trackEventObject:this._createTrackEventObject("Sign In")}),i.createElement(p.b,{theme:r,label:this._renderMenuLabel(window.t("Join Now")),onClick:this.props.onClickSignUp,trackEventObject:this._createTrackEventObject("Join Now")}))))}_canShowMobileWatchlist(){return Object(De.canShowNewSymbolSearch)()&&!this.props.isWidgetbarVisible}_canShowMobileTrading(){return Object(X.isFeatureEnabled)("mobile_trading")&&Object(X.isFeatureEnabled)("trading_button")&&!this.props.isBottomWidgetBarVisible}_getMainMenuTitle(){const{isAuthenticated:e,username:t}=this.props,{chartWidgetCollection:n}=this.context;if(e){const e=`${window.t("Logged in as")} ${t}`,i=n.metaInfo.name.value();return i?`${e}\n${window.t("Active layout")}: ${i}`:e}}}Xe.contextType=Je;var Ze=n("sMRa"),et=n("3nHz");const tt={title:window.t("Sign Out Confirmation"),unsavedChangesWarning:window.t("The Chart Layout includes unsaved changes. You will lose your data if you sign out."),signOut:window.t("Sign Out"),cancel:window.t("Cancel")};class nt extends i.PureComponent{constructor(e){super(e),this._globalNotificationTools=null,this._supportNotificationTools=null,this._handleClickWhatsNew=()=>{this._globalNotificationTools&&this._globalNotificationTools.showNotificationsDialog()},this._handleDrawingToolbarVisibilityChanged=()=>{this.setState({isDrawingToolbarVisible:d.isDrawingToolbarVisible.value()})},this._handleClickSignOut=()=>{const{chartChangesWatcher:e}=this.props,t=e.hasChanges(),n=Object(We.tradingService)(),i=n&&n.activeBroker(),a=i&&i.disconnectWarningMessage();let o="";t&&(o+=tt.unsavedChangesWarning),a&&(t&&(o+="\n\n"),o+=a),o.length>0?Object(_.showConfirm)({title:tt.title,text:o,mainButtonText:tt.signOut,mainButtonIntent:"danger",cancelButtonText:tt.cancel,onConfirm:({dialogClose:e})=>{window.TradingView.signOut(),e()}}):window.TradingView.signOut()},this._handleClickSignIn=()=>{Object(k.showSignModal)({source:"Chart main menu",sourceMeta:"Chart"})},this._handleClickSignUp=()=>{Object(k.showSignModal)({mode:"signup",source:"Chart main menu",sourceMeta:"Chart"})},this._handleSupportNotificationCountChange=e=>{this.setState({supportNotifications:e})},this._handleGlobalNotificationCountChange=e=>{this.setState({globalNotifications:e})},this._handleLoginStateChange=()=>{this.setState(this._composeState())},Object(g.isOnMobileAppPage)("new")||(this._supportNotificationTools=et.SupportNotificationTools.getInstance(),this._globalNotificationTools=new Ze.GlobalNotificationTools,this._globalNotificationTools.subscribeNotificationsDialogToPushStream()),this.state=this._composeState()}componentDidMount(){window.loginStateChange.subscribe(this,this._handleLoginStateChange),this._globalNotificationTools&&this._globalNotificationTools.getUnreadNotificationsCount().subscribe(this._handleGlobalNotificationCountChange),this._supportNotificationTools&&this._supportNotificationTools.countChanged().subscribe(null,this._handleSupportNotificationCountChange),d.isDrawingToolbarVisible.subscribe(this._handleDrawingToolbarVisibilityChanged)}componentWillUnmount(){
window.loginStateChange.unsubscribe(this,this._handleLoginStateChange),this._globalNotificationTools&&this._globalNotificationTools.getUnreadNotificationsCount().unsubscribe(this._handleGlobalNotificationCountChange),this._supportNotificationTools&&this._supportNotificationTools.destroy(),d.isDrawingToolbarVisible.unsubscribe(this._handleDrawingToolbarVisibilityChanged)}render(){const{isAuthenticated:e,globalNotifications:t,supportNotifications:n,username:a,isBroker:o,userpic:r,badges:s,availableOffers:c}=this.state;return i.createElement(Xe,{isAuthenticated:e,globalNotifications:t,supportNotifications:n,isDrawingToolbarVisible:this.state.isDrawingToolbarVisible,onClickSignIn:this._handleClickSignIn,onClickSignOut:this._handleClickSignOut,onClickSignUp:this._handleClickSignUp,onClickSwitchDrawingToolbar:this._handleSwitchDrawingToolbar,onClickWhatsNew:this._handleClickWhatsNew,username:a,availableOffers:c,badges:s,isBroker:o,userpic:r,chartSaver:this.props.chartSaver,showSupportTicketsItem:this.props.isSupportAvailable&&this.state.showSupportTicketsItem,isWidgetbarVisible:this.props.isWidgetbarVisible,isBottomWidgetBarVisible:this.props.isBottomWidgetBarVisible})}_handleSwitchDrawingToolbar(){d.isDrawingToolbarVisible.setValue(!d.isDrawingToolbarVisible.value())}_composeState(){return{isAuthenticated:window.is_authenticated,isDrawingToolbarVisible:d.isDrawingToolbarVisible.value(),globalNotifications:this._globalNotificationTools?this._globalNotificationTools.getUnreadNotificationsCount().value():0,supportNotifications:this._supportNotificationTools?this._supportNotificationTools.getCount():0,username:window.user.username,badges:window.user.badges,availableOffers:window.user.available_offers,isBroker:window.user.is_broker,userpic:window.devicePixelRatio>1?window.user.userpic_mid:window.user.userpic,showSupportTicketsItem:!1}}}var it=n("uKmN");const at=Object(s.onWidget)();class ot extends i.PureComponent{constructor(e){var t,n;super(e),this._handleWidgetbarVisible=e=>{this.setState({isWidgetbarVisible:e})},this._handleBottomWidgetBarVisible=e=>{this.setState({isBottomWidgetBarVisible:e})};const{chartChangesWatcher:i,chartWidgetCollection:a,saveChartService:o,loadChartService:r,sharingChartService:s}=this.props;this.state={isWidgetbarVisible:Boolean(null===(t=window.widgetbar)||void 0===t?void 0:t.visible().value()),isBottomWidgetBarVisible:Boolean(null===(n=window.TradingView.bottomWidgetBar)||void 0===n?void 0:n.isVisible().value())},this._registry={chartWidgetCollection:a,chartChangesWatcher:i,saveChartService:o,loadChartService:r,sharingChartService:s}}componentDidMount(){var e,t;null===(e=this.props.widgetbarSettled)||void 0===e||e.subscribe(this,()=>{window.widgetbar.visible().subscribe(this._handleWidgetbarVisible,{callWithLast:!0})},!0),null===(t=this.props.bottomWidgetBarSettled)||void 0===t||t.subscribe(this,()=>{var e;null===(e=window.TradingView.bottomWidgetBar)||void 0===e||e.isVisible().subscribe(this._handleBottomWidgetBarVisible,{callWithLast:!0})},!0)}componentWillUnmount(){var e,t
;null===(e=window.widgetbar)||void 0===e||e.visible().unsubscribe(this._handleWidgetbarVisible),null===(t=window.TradingView.bottomWidgetBar)||void 0===t||t.isVisible().unsubscribe(this._handleBottomWidgetBarVisible)}render(){const{chartChangesWatcher:e,chartSaver:t,isSupportAvailable:n}=this.props;return at?null:i.createElement(C.a,{validation:w,value:this._registry},i.createElement("div",{className:it.topLeftButton},e&&i.createElement(nt,{chartChangesWatcher:e,chartSaver:t,isSupportAvailable:n,isWidgetbarVisible:this.state.isWidgetbarVisible,isBottomWidgetBarVisible:this.state.isBottomWidgetBarVisible})))}}n.d(t,"TopLeftButtonRenderer",(function(){return rt}));class rt{constructor(e,t){this._component=null,this._handleRef=e=>{this._component=e},this._container=e,o.render(i.createElement(ot,Object.assign({},t,{ref:this._handleRef})),this._container)}destroy(){o.unmountComponentAtNode(this._container)}getComponent(){return Object(r.ensureNotNull)(this._component)}}},FzLb:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI"),o=n("TSYQ"),r=n("5ijr");n("4pMH");function s(e){const{className:t="",intent:n="default",size:i="small",disabled:a}=e;return o(t,r.switcherWrapper,r["size-"+i],!a&&r["intent-"+n])}class c extends a.PureComponent{render(){const e=this.props,{reference:t,size:n,intent:c}=e,l=Object(i.d)(e,["reference","size","intent"]),u=o(r.input,-1!==this.props.tabIndex&&r.focus);return a.createElement("div",{className:s(this.props)},a.createElement("input",Object.assign({},l,{type:"checkbox",className:u,ref:t})),a.createElement("div",{className:r.switcherThumbWrapper},a.createElement("div",{className:r.switcherTrack}),a.createElement("div",{className:r.switcherThumb})))}}n.d(t,"a",(function(){return c}))},HV9r:function(e,t,n){e.exports={menu:"menu-3aPpqbmF",button:"button-3aPpqbmF"}},IWoC:function(e,t,n){"use strict";const i=n("txPx").getLogger("CommonUI.CreateTVBlockPlugin");e.exports.createTvBlockPlugin=function(e){if(e)return function(t,n,i){var a,o=$(this);function r(t,n){return n?e[t](o,n):e[t](o)}return"get"===t?"function"==typeof e[a=n]?r(a,i):e[a]:e[t]?o.each((function(){return r(t,void 0)})):o}},e.exports.createTvBlockWithInstance=function(e,t){if(e&&t)return e=e.toString(),function(a,o,r){var s,c,l;return"get"===a?s=o:(c=o,"object"==typeof a&&void 0===o?(c=a,a="init"):"string"!=typeof a&&(a="init")),"getInstance"===a?$(this).eq(0).data(e):"destroy"===a?(l=$(this).eq(0).data(e))?void("function"==typeof l.destroy?(n(l,"destroy",c),$(this).eq(0).removeData(e)):i.logError("[Block Plugin] "+e+" does not support destroy command")):void console.warn("[Block Plugin] Trying to execute destroy method of "+e+" but it has not been inited"):"get"===a?(l=$(this).eq(0).data(e))?"function"==typeof l[s]?n(l,s,r):l[s]:void console.warn("[Block Plugin] Trying to get prop or execute method of "+e+" but it has not been inited"):$(this).each((function(){var o=$(this),r=o.data(e);void 0===r&&(r=void 0===c?t(o):t(o,c),o.data(e,r)),
"init"!==a&&("function"==typeof r[a]?n(r,a,c):i.logError("[Block Plugin] "+e+" does not support command "+a))}))};function n(e,t,n){return void 0===n?e[t]():e[t](n)}}},IhIr:function(e,t,n){"use strict";n.r(t),n.d(t,"Size",(function(){return i})),n.d(t,"Badge",(function(){return r}));var i,a=n("q1tI"),o=n("TSYQ");n("6G1D");function r(e){const{size:t=i.Medium,href:n,title:r,className:s}=e,c=o("tv-badge","tv-badge--"+t,r&&"apply-common-tooltip",s);return n?a.createElement("a",{href:n,target:"_blank",title:r,className:c}):a.createElement("span",{title:r,className:c})}!function(e){e.Small="small",e.Medium="medium",e.Large="large"}(i||(i={}))},Iivm:function(e,t,n){"use strict";var i=n("mrSG"),a=n("q1tI");const o=a.forwardRef((e,t)=>{const{icon:n=""}=e,o=Object(i.d)(e,["icon"]);return a.createElement("span",Object.assign({},o,{ref:t,dangerouslySetInnerHTML:{__html:n}}))});n.d(t,"a",(function(){return o}))},IoBF:function(e,t,n){"use strict";function i(e){return Boolean(window.widgetbar&&window.widgetbar.resizerBridge.fullscreen.value())?0:e}n.d(t,"a",(function(){return i}))},KFwr:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("nPPD"),a=n("MB0Y"),o=n("3j+J");const r=Object(i.a)(a.a,o)},KKsp:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("q1tI"),a=n("TSYQ"),o=n.n(a),r=n("NOPy");function s(e){const{size:t="normal",className:n}=e;return i.createElement("div",{className:o()(r.separator,"small"===t&&r.small,"normal"===t&&r.normal,"large"===t&&r.large,n)})}},Lqq7:function(e,t,n){"use strict";n.r(t),n.d(t,"DropdownView",(function(){return r}));n("TkT6");var i=n("IWoC"),a=n("sFgq"),o=n("U+7v");class r{constructor(e,t={}){this.$el=e,this.$wrap=t.$wrap||e.find(".tv-dropdown-behavior__button"),this.$body=t.$body||e.find(".tv-dropdown-behavior__body"),this.notCloseWithCtrl=!!t.notCloseWithCtrl&&t.notCloseWithCtrl,this.closeWithEsc=void 0===t.closeWithEsc||t.closeWithEsc,this.closeWithEsc&&this.$el.attr("tabIndex",0),(e.data("scroll")||t.scroll)&&(this.$scroll=this.$body.find(".tv-dropdown-behavior__scroll"),this.$inScroll=this.$scroll.find(".tv-dropdown-behavior__inscroll"),this.scroll=new a.SidebarCustomScroll(this.$scroll,this.$inScroll,{showTopShadow:!1,showBottomShadow:!1}),this.$scrollBar=this.scroll.getScrollBar(),this.$scrollBar&&this.$scrollBar.on("mousedown.tv-dropdown-view-scroll",()=>{this.offClickOutside(),$(document).on("mouseup.tv-dropdown-view-scroll",()=>{this.onClickOutside(),$(document).off("mouseup.tv-dropdown-view-scroll")})})),(e.data("adaptBody")||t.adaptBody)&&(this._adaptBody=!0),(e.data("adaptOnlyInScrollHeight")||t.adaptOnlyInScrollHeight)&&(this._adaptOnlyInScrollHeight=!0),this._fitScreen=e.data("fitScreen")||t.fitScreen,this._maxHeight=e.data("maxHeight")||t.maxHeight,this._dropdownWidth=e.data("dropdownWidth")||t.dropdownWidth,this._boundingElement=t.boundingElement,this.$wrap.add(e.find(".js-dropdown-toggle")).on("click",e=>{$(e.currentTarget).hasClass("js-prevent-dropdown")||this.toggle()}),this._checkIgnoreClickOutside=[]}toggle(){
this.opened?this.close(!0):this.open()}open(){this.opened||this.disabled||this.readonly||(this.$el.trigger("beforeOpenMenu"),this.$body.removeClass("i-hidden").addClass("i-opened"),this.$wrap.addClass("i-dropped"),this.$el.addClass("i-opened"),"horz"===this._fitScreen&&this.fitHorizontally(),this._adaptBody&&this.adaptBody(),this.onClickOutside(),this.$el.trigger("updateScroll"),this.$el.trigger("afterOpenMenu"),this.opened=!0,this.closeWithEsc&&this.$el.on("keypress keyup",e=>{e.keyCode===o.ESC&&this.close(!0)}))}onClickOutside(){setTimeout(()=>{this.$body.on("clickoutside",e=>{this._checkIgnoreClickOutside.length&&this._checkIgnoreClickOutside.some(t=>t(e))||this.close(!0)})},0)}offClickOutside(){this.$body.off("clickoutside")}setCheckIgnoreClickOutside(e){this._checkIgnoreClickOutside.push(e)}dropCheckIgnoreClickOutside(e){var t=this._checkIgnoreClickOutside.indexOf(e);-1!==t&&this._checkIgnoreClickOutside.splice(t,1)}close(e=!1){!this.opened||this.disabled||this.readonly||!e&&this.notCloseWithCtrl&&(window.event.ctrlKey||window.event.metaKey)||(this.offClickOutside(),this.$wrap.removeClass("i-dropped"),this.$el.trigger("beforeCloseMenu"),this.$body.removeClass("i-opened").addClass("i-hidden"),this.$el.removeClass("i-opened"),this.closeWithEsc&&this.$el.off("keypress keyup"),this.opened=!1,this.$el.trigger("afterCloseMenu"))}isOpened(){return this.opened}updateScroll(){this.scroll&&(this.scroll.updateScrollBar(),this.scroll.scrollToStart())}enable(){this.$wrap.removeClass("i-disabled"),this.disabled=!1}disable(){this.$wrap.addClass("i-disabled"),this.disabled=!0}setReadonly(e){this.readonly=e}adaptBody(){const e=this.$body,t=this.$wrap.get(0).getBoundingClientRect(),n=this._boundingElement?this._boundingElement.getBoundingClientRect():{top:0,bottom:window.innerHeight,height:window.innerHeight},i=parseFloat(e.css("padding-top")),a=parseFloat(e.css("padding-bottom")),o=this.$inScroll.outerHeight(!0)+i+a;if(this.scroll&&this.scroll.scrollToStart(),this._adaptOnlyInScrollHeight){const i=e.find(".js-dropdown-dummy"),o=i?parseFloat(i.css("padding-bottom"))+parseFloat(i.css("margin-bottom")):0,r=t.top+t.height+o;return void this.$el.find(".tv-dropdown-behavior__scroll").css("maxHeight",n.bottom-a-r-25)}const r=this._maxHeight||o,s=t.top+r+25<=n.bottom,c=n.top+15+r<=t.bottom;let l,u=this._maxHeight||"auto";if(s)l=-i;else if(c)l=-r+t.height+a;else{l=-t.top+n.top+15;const e=n.height-15-25;r>e&&(u=e)}e.css("top",l),e.height(u),this._dropdownWidth&&e.width(this._dropdownWidth)}fitHorizontally(){this.$body.css("marginLeft",0);const e=document.body.getBoundingClientRect(),t=parseFloat($(document.body).css("paddingRight")),n=this.$body.offset();n.right=n.left+this.$body.outerWidth();const i=Math.max(Math.min(0,e.right-t-n.right),e.left-n.left);i&&this.$body.css("marginLeft",i)}destroy(){this.scroll&&this.scroll.destroy(),this.offClickOutside(),this.$el.find(".js-dropdown-toggle").off("click"),this.$wrap.off("click")}}$.fn.tvDropdown=Object(i.createTvBlockWithInstance)("tv-dropdown",(function(e,t={}){return new r(e,t)}))},
LsFU:function(e,t,n){"use strict";n.r(t),n.d(t,"isBadgeUserWithTitle",(function(){return o})),n.d(t,"isBadgeUser",(function(){return s})),n.d(t,"isTop",(function(){return c})),n.d(t,"isModerator",(function(){return l})),n.d(t,"isProPremium",(function(){return u})),n.d(t,"isProRealtime",(function(){return h})),n.d(t,"isPro",(function(){return d})),n.d(t,"isTrial",(function(){return b}));var i=n("AsAg");const a=new Set([i.a.Moderator,i.a.TopAll,i.a.TopMonth,i.a.TopWeek,i.a.TopDay,i.a.ProPremiumTrial,i.a.ProRealTimeTrial,i.a.ProTrial]);function o(e){return a.has(e)}const r=new Set(Object.values(i.a));function s(e){return r.has(e)}function c(e){return i.a.TopAll===e||i.a.TopMonth===e||i.a.TopWeek===e||i.a.TopDay===e}function l(e){return i.a.Moderator===e}function u(e){return i.a.ProPremium===e||i.a.ProPremiumTrial===e}function h(e){return i.a.ProRealTime===e||i.a.ProRealTimeTrial===e}function d(e){return i.a.Pro===e||i.a.ProTrial===e}function b(e){return i.a.ProPremiumTrial===e||i.a.ProRealTimeTrial===e||i.a.ProTrial===e}},MB0Y:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var i=n("q1tI"),a=n.n(i),o=n("TSYQ"),r=n.n(o),s=n("FzLb"),c=n("ijHL"),l=n("OP2o");const u=l;function h(e){const{className:t,checked:n,id:i,label:o,labelDescription:u,value:h,preventLabelHighlight:d,reference:b,switchReference:m,theme:p=l,disabled:g}=e,f=r()(p.label,n&&!d&&p.labelOn),v=r()(t,p.wrapper,n&&p.wrapperWithOnLabel);return a.a.createElement("label",{className:v,htmlFor:i,ref:b},a.a.createElement("div",{className:p.labelRow},a.a.createElement("div",{className:f},o),u&&a.a.createElement("div",{className:p.labelHint},u)),a.a.createElement(s.a,Object.assign({disabled:g,className:p.switch,reference:m,checked:n,onChange:function(t){const n=t.target.checked;void 0!==e.onChange&&e.onChange(n)},value:h,tabIndex:-1,id:i},Object(c.b)(e))))}},N5tr:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var i=n("mrSG"),a=n("q1tI"),o=n.n(a),r=n("TSYQ"),s=n("tWVy"),c=n("JWMC"),l=n("ijHL"),u=n("v1bN");const h=u;function d(e){const{reference:t}=e,n=Object(i.d)(e,["reference"]),a=Object.assign(Object.assign({},n),{ref:t});return o.a.createElement(e.href?"a":"div",a)}function b(e){e.stopPropagation()}function m(e){const{id:t,role:n,"aria-selected":i,className:h,title:m,labelRowClassName:p,labelClassName:g,shortcut:f,forceShowShortcuts:v,icon:w,isActive:C,isDisabled:_,isHovered:k,appearAsDisabled:S,label:O,link:E,showToolboxOnHover:T,target:y,rel:j,toolbox:N,reference:M,onMouseOut:x,onMouseOver:A,suppressToolboxClick:P=!0,theme:W=u}=e,R=Object(l.b)(e),L=Object(a.useRef)(null);return o.a.createElement(d,Object.assign({},R,{id:t,role:n,"aria-selected":i,className:r(h,W.item,w&&W.withIcon,{[W.isActive]:C,[W.isDisabled]:_||S,[W.hovered]:k}),title:m,href:E,target:y,rel:j,reference:function(e){L.current=e,"function"==typeof M&&M(e);"object"==typeof M&&(M.current=e)},onClick:function(t){const{dontClosePopup:n,onClick:i,onClickArg:a,trackEventObject:o}=e;if(_)return
;o&&Object(c.trackEvent)(o.category,o.event,o.label);i&&i(a,t);n||Object(s.b)()},onContextMenu:function(t){const{trackEventObject:n,trackRightClick:i}=e;n&&i&&Object(c.trackEvent)(n.category,n.event,n.label+"_rightClick")},onMouseUp:function(t){const{trackEventObject:n,trackMouseWheelClick:i}=e;if(1===t.button&&E&&n){let e=n.label;i&&(e+="_mouseWheelClick"),Object(c.trackEvent)(n.category,n.event,e)}},onMouseOver:A,onMouseOut:x}),void 0!==w&&o.a.createElement("div",{className:W.icon,dangerouslySetInnerHTML:{__html:w}}),o.a.createElement("div",{className:r(W.labelRow,p)},o.a.createElement("div",{className:r(W.label,g)},O)),(void 0!==f||v)&&o.a.createElement("div",{className:W.shortcut},(I=f)&&I.split("+").join(" + ")),void 0!==N&&o.a.createElement("div",{onClick:P?b:void 0,className:r(W.toolbox,{[W.showOnHover]:T})},N));var I}},NOPy:function(e,t,n){e.exports={separator:"separator-eqcGT_ow",small:"small-eqcGT_ow",normal:"normal-eqcGT_ow",large:"large-eqcGT_ow"}},NxCe:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><circle stroke="currentColor" stroke-width="1.5" cx="14" cy="14" r="10.25"/><path fill="currentColor" d="M7.97 14.97a.75.75 0 1 0 1.06 1.06l-1.06-1.06zM12 12l.53-.53a.75.75 0 0 0-1.06 0L12 12zm3.5 3.5l-.53.53c.3.3.77.3 1.06 0l-.53-.53zm4.03-2.97a.75.75 0 1 0-1.06-1.06l1.06 1.06zm-10.5 3.5l3.5-3.5-1.06-1.06-3.5 3.5 1.06 1.06zm2.44-3.5l3.5 3.5 1.06-1.06-3.5-3.5-1.06 1.06zm4.56 3.5l3.5-3.5-1.06-1.06-3.5 3.5 1.06 1.06z"/><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M18.9 9a7 7 0 0 0-11.83 4M9 18.9A7 7 0 0 0 20.93 15"/></svg>'},OP2o:function(e,t,n){e.exports={wrapper:"wrapper-1Eudat6L",hovered:"hovered-1Eudat6L",labelRow:"labelRow-1Eudat6L",label:"label-1Eudat6L",labelHint:"labelHint-1Eudat6L",labelOn:"labelOn-1Eudat6L"}},R5JZ:function(e,t,n){"use strict";function i(e,t,n,i,a){function o(a){if(e>a.timeStamp)return;const o=a.target;void 0!==n&&null!==t&&null!==o&&o.ownerDocument===i&&(t.contains(o)||n(a))}return a.click&&i.addEventListener("click",o,!1),a.mouseDown&&i.addEventListener("mousedown",o,!1),a.touchEnd&&i.addEventListener("touchend",o,!1),a.touchStart&&i.addEventListener("touchstart",o,!1),()=>{i.removeEventListener("click",o,!1),i.removeEventListener("mousedown",o,!1),i.removeEventListener("touchend",o,!1),i.removeEventListener("touchstart",o,!1)}}n.d(t,"a",(function(){return i}))},ReLp:function(e,t,n){e.exports={item:"item-2a-oAVpE"}},S8UK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("N22A");async function a(){(await Object(i.waitTradingService)()).tradingPanelPopup.show()}},Sn4D:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n("q1tI"),a=n.n(i),o=n("Eyy1"),r=n("TSYQ"),s=n("x0D+"),c=n("0YpW"),l=n("AiMB"),u=n("mkWe"),h=n("qFKp"),d=n("X0gx"),b=n("sHQ4");function m(e){const{position:t,onClose:n,children:m,className:p,theme:g=b}=e,f=Object(o.ensureNotNull)(Object(i.useContext)(u.a)),[v,w]=Object(i.useState)(0),C=Object(i.useRef)(null),_=Object(i.useContext)(d.a)
;return Object(i.useEffect)(()=>{var e;return null===(e=C.current)||void 0===e||e.focus({preventScroll:!0}),_.subscribe(f,n),Object(c.setFixedBodyState)(!0),h.CheckMobile.iOS()&&Object(s.disableBodyScroll)(Object(o.ensureNotNull)(C.current)),w(f.addDrawer()),()=>{_.unsubscribe(f,n);const e=f.removeDrawer();h.CheckMobile.iOS()&&Object(s.enableBodyScroll)(Object(o.ensureNotNull)(C.current)),0===e&&Object(c.setFixedBodyState)(!1)}},[]),a.a.createElement(l.a,null,a.a.createElement("div",{className:r(b.wrap,b["position"+t])},v===f.currentDrawer&&a.a.createElement("div",{className:b.backdrop,onClick:n}),a.a.createElement("div",{className:r(b.drawer,g.drawer,b["position"+t],p),ref:function(e){C.current=e},tabIndex:-1,onScroll:function(e){e.stopPropagation()},"data-name":e["data-name"]},m)))}},TkT6:function(e,t,n){},"U+7v":function(e,t,n){"use strict";n.r(t),n.d(t,"LEFT_ARROW",(function(){return i})),n.d(t,"UP_ARROW",(function(){return a})),n.d(t,"RIGHT_ARROW",(function(){return o})),n.d(t,"DOWN_ARROW",(function(){return r})),n.d(t,"ENTER",(function(){return s})),n.d(t,"ESC",(function(){return c})),n.d(t,"SPACE",(function(){return l})),n.d(t,"SLASH",(function(){return u}));const i=37,a=38,o=39,r=40,s=13,c=27,l=32,u=47},"UI/U":function(e,t,n){e.exports={item:"item-1PNqKOSN",withIcon:"withIcon-1PNqKOSN"}},Vtf4:function(e,t,n){e.exports={joined:"joined-1FSSY02h",icon:"icon-1FSSY02h","joined-toolbox":"joined-toolbox-1FSSY02h"}},W0KT:function(e,t,n){e.exports={item:"item-2Etm4M4Z"}},Wcvj:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("EsMY");var i=n("q1tI"),a=n("dxYz"),o=n("8d0Q"),r=n("w2TA");function s(e,t){const n=i.useContext(a.a);i.useEffect(()=>null==n?void 0:n.registerSubmenu(e,l),[e]);const s=Boolean((null==n?void 0:n.current)===e);return{isMenuOpened:s,onTriggerClick:function(){Modernizr.mobiletouch&&(null==n||n.setCurrent(s?null:e))},onMenuClose:function(){null==n||n.setCurrent(null)},getPosition:function(e){return Object(r.a)(e,t.current)},onMenuMouseOver:c,onTriggerMouseOver:c};function c(t){!Modernizr.mobiletouch&&Object(o.a)(t)&&(null==n||n.setCurrent(e))}function l(e){var n;return Boolean(null===(n=t.current)||void 0===n?void 0:n.contains(e))}}},Xzy5:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 5l3.5 3.5L8 12"/></svg>'},Z3xJ:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M21.106 12.5H6.894a.5.5 0 0 1-.318-.886L14 5.5l7.424 6.114a.5.5 0 0 1-.318.886zM21.106 16.5H6.894a.5.5 0 0 0-.318.886L14 23.5l7.424-6.114a.5.5 0 0 0-.318-.886z"/></svg>'},ZVxo:function(e,t,n){e.exports={title:"title-2Ny7vJo6"}},bABd:function(e,t,n){e.exports={balance:"balance-2lixFdXt",icon:"icon-2lixFdXt","balance-toolbox":"balance-toolbox-2lixFdXt"}},bQ7Y:function(e,t,n){e.exports={button:"button-2Vpz_LXc",hover:"hover-2Vpz_LXc",isInteractive:"isInteractive-2Vpz_LXc",isGrouped:"isGrouped-2Vpz_LXc",isActive:"isActive-2Vpz_LXc",
isOpened:"isOpened-2Vpz_LXc",isDisabled:"isDisabled-2Vpz_LXc",text:"text-2Vpz_LXc",icon:"icon-2Vpz_LXc"}},e6z0:function(e,t,n){e.exports={switcher:"switcher-1zEl4nt3",recentLayouts:"recentLayouts-1zEl4nt3",submenu:"submenu-1zEl4nt3",layoutItem:"layoutItem-1zEl4nt3",layoutTitle:"layoutTitle-1zEl4nt3",layoutMeta:"layoutMeta-1zEl4nt3",layoutItemWrap:"layoutItemWrap-1zEl4nt3",layoutTitleMobile:"layoutTitleMobile-1zEl4nt3",drawer:"drawer-1zEl4nt3",mobile:"mobile-1zEl4nt3",labelRow:"labelRow-1zEl4nt3",active:"active-1zEl4nt3",saveLayoutMenuItem:"saveLayoutMenuItem-1zEl4nt3"}},"ei/8":function(e,t,n){e.exports={menu:"menu-2WfzAPA-",offsetSmall:"offsetSmall-2WfzAPA-",offsetMedium:"offsetMedium-2WfzAPA-",popupMenu:"popupMenu-2WfzAPA-",popupSubMenu:"popupSubMenu-2WfzAPA-",icon:"icon-2WfzAPA-",subMenuIcon:"subMenuIcon-2WfzAPA-",buttonWrap:"buttonWrap-2WfzAPA-",button:"button-2WfzAPA-",labelSubmenu:"labelSubmenu-2WfzAPA-",profileMenu:"profileMenu-2WfzAPA-",userPic:"userPic-2WfzAPA-",userName:"userName-2WfzAPA-",userNameMobile:"userNameMobile-2WfzAPA-",userRow:"userRow-2WfzAPA-",notifications:"notifications-2WfzAPA-",menuNotifications:"menuNotifications-2WfzAPA-",menuItem:"menuItem-2WfzAPA-",moreMenuItem:"moreMenuItem-2WfzAPA-",subMenuItem:"subMenuItem-2WfzAPA-",subMenuItemHighlighted:"subMenuItemHighlighted-2WfzAPA-",menuSwitcher:"menuSwitcher-2WfzAPA-",menuLabel:"menuLabel-2WfzAPA-",shortMenuLabel:"shortMenuLabel-2WfzAPA-",drawer:"drawer-2WfzAPA-",mainMenuDrawer:"mainMenuDrawer-2WfzAPA-",dot:"dot-2WfzAPA-",switcher:"switcher-2WfzAPA-"}},fsSD:function(e,t,n){e.exports={item:"item-Ny_RFzcA"}},ijHL:function(e,t,n){"use strict";function i(e){return o(e,r)}function a(e){return o(e,s)}function o(e,t){const n=Object.entries(e).filter(t),i={};for(const[a,o]of n)i[a]=o;return i}function r(e){const[t,n]=e;return 0===t.indexOf("data-")&&"string"==typeof n}function s(e){return 0===e[0].indexOf("aria-")}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return s}))},"mI+W":function(e,t,n){"use strict";n.r(t),n.d(t,"tvReferralDetails",(function(){return o}));var i=n("+k/b");class a{constructor(){this.details=void 0,this._pendingPromise=null}async getReferralDetails(){return window.is_authenticated?this.details?Promise.resolve(this.details):this.update():Promise.reject("user is not authenticated")}async update(){return window.is_authenticated?(null!==this._pendingPromise||(this._pendingPromise=Object(i.a)().then(e=>(this._pendingPromise=null,this.details=e,e)),this._pendingPromise.catch(()=>{this._pendingPromise=null})),this._pendingPromise):(this.details=void 0,Promise.reject("user is not authenticated"))}static getInstance(){return a._instance||(a._instance=new a),a._instance}}const o=a.getInstance()},mkWe:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n("q1tI"),a=n.n(i);class o extends a.a.PureComponent{constructor(e){super(e),this._addDrawer=()=>{
const e=this.state.currentDrawer+1;return this.setState({currentDrawer:e}),e},this._removeDrawer=()=>{const e=this.state.currentDrawer-1;return this.setState({currentDrawer:e}),e},this.state={currentDrawer:0}}render(){return a.a.createElement(r.Provider,{value:{addDrawer:this._addDrawer,removeDrawer:this._removeDrawer,currentDrawer:this.state.currentDrawer}},this.props.children)}}const r=a.a.createContext(null)},nPPD:function(e,t,n){"use strict";function i(e,t,n={}){const i=Object.assign({},t);for(const a of Object.keys(t)){const o=n[a]||a;o in e&&(i[a]=[e[o],t[a]].join(" "))}return i}function a(e,t,n={}){return Object.assign({},e,i(e,t,n))}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}))},"ndm/":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n("wVAQ"),a=n("HPyf"),o=n("oOPW"),r=n("Gvuy"),s=n("G++a"),c=n("mNbo"),l=n("YFKU");const u=l.t("Error creating a new layout"),h=l.t("We are doing some brief daily maintenance. Charts will be back really soon, thanks for your patience!"),d=l.t("Your browser seems to be offline");function b(e={}){window.is_authenticated?Object(s.asyncWindowOpen)(async function(e){let t,n;try{n=await Object(i.fetch)("/charts/",{method:"POST",body:JSON.stringify(e),credentials:"include"});const a=n.headers.get("location");if(n.ok&&a)return Object(c.urlWithMobileAppParams)(a);t=(await n.json()).code}catch(a){}"count_limit"===t?Object(o.createGoProDialog)({feature:"savedChartsLimit"}):n||!1!==navigator.onLine?n&&n.status>=500||"feature_disabled"===t?Object(r.showErrorDialog)({content:h}):Object(r.showErrorDialog)({content:u}):Object(r.showErrorDialog)({content:d});return}(e)):window.open(Object(a.a)(e),"_blank")}},o9lb:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i=n("mrSG"),a=n("q1tI"),o=n("TSYQ"),r=n("LsFU"),s=n("IhIr");n("w78M");function c(e){const{name:t,size:n,className:o,title:c}=e,u=Object(i.d)(e,["name","size","className","title"]);return a.createElement(s.Badge,Object.assign({className:l(t,n,o),title:Object(r.isBadgeUserWithTitle)(t)?c:void 0,size:n},u))}function l(e,t=s.Size.Medium,n){return o("tv-badge-user",Object(r.isProPremium)(e)&&["tv-badge-user__pro-premium","tv-badge-user__pro-premium--"+t],Object(r.isProRealtime)(e)&&["tv-badge-user__pro-realtime","tv-badge-user__pro-realtime--"+t],Object(r.isPro)(e)&&["tv-badge-user__pro","tv-badge-user__pro--"+t],Object(r.isTop)(e)&&["tv-badge-user__top","tv-badge-user__top--"+t],Object(r.isModerator)(e)&&["tv-badge-user__moderator","tv-badge-user__moderator--"+t],Object(r.isTrial)(e)&&"tv-badge-user--trial",n)}},oU8P:function(e,t,n){"use strict";var i,a,o;n.r(t),n.d(t,"ProductId",(function(){return i})),n.d(t,"CoinsPage",(function(){return a})),n.d(t,"MainTab",(function(){return o})),function(e){e.TestCoins="100_coins",e.MidCoins="500_coins",e.LargeCoins="1000_coins",e.VeryLargeCoins="5000_coins"}(i||(i={})),function(e){e.Buy="Buy",e.Main="Main"}(a||(a={})),function(e){e.About="About",e.Refer="Refer",e.GetCoins="Get coins",e.History="History",
e.Redeem="Redeem"}(o||(o={}))},q56G:function(e,t,n){e.exports={item:"item-1SuDtbO_"}},qjxE:function(e,t,n){"use strict";n.r(t);var i=n("YFKU"),a=n("ldgD");n("OV6q"),n("VUhU");const o={L:"MMM D",LL:"YYYY MMM D",LLL:"HH:mm - YYYY MMM D"},r={ja:o,ko:o};function s(e){return 6e4-e%6e4}function c(e){const t=36e5;return t-e%t}function l(e){const t=864e5;return t-e%t}function u(e){const t=e.getAttribute("data-ago-date-timer");t&&clearTimeout(+t)}function h({date:e,forceAgoFormat:t,customDateFormat:n,customDateFormatLocale:i}){a.relativeTimeThreshold("h",24),"number"==typeof e&&(e=new Date(e));const o=a(new Date).diff(e),u=function(e){let t=200;if((e=Math.floor(e/6e4))<60)t+=s(e);else if(e<1440)t+=c(e);else{if(!(e<43200))return 0;t+=l(e)}return t}(o),h=r[window.language];let d="",b={L:"L",LL:"LL",LLL:"LLL"};h&&(b=h),i&&(b.LLL=i),d=t||Math.round(o/36e5)<24?a(e).fromNow():n?a(e).format(n):e.getFullYear()===(new Date).getFullYear()?a(e).format(b.L):a(e).format(b.LL);return{diff:o,formattedDate:a(e).format(b.LLL),text:d,updateTimeout:u}}function d(e,t,n,i,a){const o=Array.from(e);for(const r of o)b(r,t,n,i,a)}function b(e,t,n,i,a){const{diff:o,formattedDate:r,text:s,updateTimeout:c}=h({date:t,forceAgoFormat:n,customDateFormat:a}),l=e.parentElement;if(null!==l&&l.classList.toggle("just-now",o<45e3),e.setAttribute("title",r),e.textContent=s,c){u(e);const n=setTimeout(()=>{b(e,t)},c);e.setAttribute("data-ago-date-timer",n.toString())}else e.removeAttribute("data-ago-date-timer");if(i){const t=e.closest(".js-visible-after-ago-formatter-inited");null!==t&&t.classList.remove("i-invisible","js-visible-after-ago-formatter-inited")}}function m(e){const t=Array.from(e);for(const n of t)p(n)}function p(e){u(e);const t=Array.from(e.querySelectorAll("[data-ago-date-timer]"));for(const n of t)u(n)}function g(e,t,n,i){const a=Array.from(e.querySelectorAll(".js-ago-date-formatter"));for(const o of a)b(o,1e3*Number(o.dataset.time),t,n,i);return()=>{for(const e of a)p(e)}}function f(e){let t=Math.floor(e/6e4),n="",a=0;return t<60?(n=(t<1?0:t)+i.t("m",{context:"date_diff_short"}),a=s(e)):t<1440?(t=Math.floor(t/60),n=t+i.t("h",{context:"date_diff_short"}),a=c(e)):t<43200?(t=Math.floor(t/1440),n=t+i.t("d",{context:"date_diff_short"}),a=l(e)):t<15768e3?(t=Math.floor(t/43200),n=t+i.t("mn",{context:"date_diff_short"})):(t=Math.floor(t/15768e3),n=t+i.t("y",{context:"date_diff_short"})),a&&(a+=200),{text:n,timeout:a}}n.d(t,"getFormattedDataByDate",(function(){return h})),n.d(t,"jQueryCompatibleAgoDateFormatter",(function(){return d})),n.d(t,"agoDateFormatter",(function(){return b})),n.d(t,"jQueryCompatibleDestroy",(function(){return m})),n.d(t,"destroy",(function(){return p})),n.d(t,"initAgoDateFormatters",(function(){return g})),n.d(t,"shortFormat",(function(){return f}))},sHQ4:function(e,t,n){e.exports={wrap:"wrap-164vy-kj",positionBottom:"positionBottom-164vy-kj",backdrop:"backdrop-164vy-kj",drawer:"drawer-164vy-kj",positionLeft:"positionLeft-164vy-kj"}},tU7i:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l
}));var i=n("mrSG"),a=n("q1tI"),o=n("TSYQ"),r=n("Iivm"),s=n("bQ7Y");const c=s,l=a.forwardRef((e,t)=>{const{icon:n,isActive:c,isOpened:l,isDisabled:u,isGrouped:h,isHovered:d,onClick:b,text:m,textBeforeIcon:p,title:g,theme:f=s,className:v,forceInteractive:w,"data-name":C}=e,_=Object(i.d)(e,["icon","isActive","isOpened","isDisabled","isGrouped","isHovered","onClick","text","textBeforeIcon","title","theme","className","forceInteractive","data-name"]),k=o(v,f.button,g&&"apply-common-tooltip",{[f.isActive]:c,[f.isOpened]:l,[f.isInteractive]:(w||Boolean(b))&&!u,[f.isDisabled]:u,[f.isGrouped]:h,[f.hover]:d}),S=n&&("string"==typeof n?a.createElement(r.a,{className:f.icon,icon:n}):a.cloneElement(n,{className:o(f.icon,n.props.className)}));return a.createElement("div",Object.assign({},_,{ref:t,"data-role":"button",className:k,onClick:u?void 0:b,title:g,"data-name":C}),p&&m&&a.createElement("div",{className:o("js-button-text",f.text)},m),S,!p&&m&&a.createElement("div",{className:o("js-button-text",f.text)},m))})},v1bN:function(e,t,n){e.exports={"tablet-small-breakpoint":"screen and (max-width: 428px)",item:"item-2IihgTnv",hovered:"hovered-2IihgTnv",isDisabled:"isDisabled-2IihgTnv",isActive:"isActive-2IihgTnv",shortcut:"shortcut-2IihgTnv",toolbox:"toolbox-2IihgTnv",withIcon:"withIcon-2IihgTnv",icon:"icon-2IihgTnv",labelRow:"labelRow-2IihgTnv",label:"label-2IihgTnv",showOnHover:"showOnHover-2IihgTnv"}},w2TA:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("Ialn");function a(e,t,n={x:0,y:10}){if(t){const{left:n,right:a,top:o}=t.getBoundingClientRect(),r=document.documentElement.clientWidth,s={x:n-e,y:o},c={x:a,y:o};return Object(i.isRtl)()?n<=e?c:s:r-a>=e?c:s}return n}},w78M:function(e,t,n){},wjJt:function(e,t,n){e.exports={line:"line-2i7n26LC",starting:"starting-2i7n26LC",burger_spinner_starting:"burger_spinner_starting-2i7n26LC",spin1:"spin1-2i7n26LC",burger_spinner_spin1:"burger_spinner_spin1-2i7n26LC",spin2:"spin2-2i7n26LC",burger_spinner_spin2:"burger_spinner_spin2-2i7n26LC",spin3:"spin3-2i7n26LC",burger_spinner_spin3:"burger_spinner_spin3-2i7n26LC",stopping1:"stopping1-2i7n26LC",burger_spinner_stopping1:"burger_spinner_stopping1-2i7n26LC",stopping2:"stopping2-2i7n26LC",burger_spinner_stopping2:"burger_spinner_stopping2-2i7n26LC",stopping3:"stopping3-2i7n26LC",burger_spinner_stopping3:"burger_spinner_stopping3-2i7n26LC"}},"xBv+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("q1tI"),a=n.n(i),o=n("TSYQ"),r=n.n(o),s=n("ZVxo");function c(e){const{className:t,text:n}=e;return a.a.createElement("div",{className:r()(s.title,t)},n)}},xiSt:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><circle stroke="currentColor" cx="9" cy="5.5" r="3"/><path stroke="currentColor" d="M3.51 16a5.47 5.47 0 0 1 5.47-5.47m0 0c.65 0 1.27.1 1.85.32m-1.85-.32a5.5 5.5 0 0 1 5.5 5.47"/></svg>'},yq8s:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("Ialn");function a(e){return e.split("").reverse().join("")}
function o(e,t="en"){const{digitGroupSeparator:n,decimalSeparator:o}=function(e){return["en","us","in","zh_CN","zh_TW","ms_MY","th_TH","kr","ja","uk","he_IL"].includes(e)?{digitGroupSeparator:",",decimalSeparator:"."}:{digitGroupSeparator:" ",decimalSeparator:","}}(t),r=e.toString(),[s,c=""]=r.split("."),l=a(s).match(/.{1,3}/g),u=null===l?"0":l.map(a).reverse().join(n);return Object(i.forceLTRStrSsr)(`${u}${""===c?"":o}${c}`)}}}]);