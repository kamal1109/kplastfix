(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"+J+G":function(e,t,o){e.exports=o.p+"alarm_clock.48d3df0afe4d4981523b8a12e4e25f92.mp3"},"/k9u":function(e,t,o){e.exports=o.p+"beep_beep.b0a574ec7e1237d53fd1c736fd463cbc.mp3"},"26oy":function(e,t,o){e.exports=o.p+"notification.9344fa5a37d4769a5b7801274fe5e5a6.mp3"},"5AtP":function(e,t,o){e.exports=o.p+"calling.e1e2e9645beebf2fe7634628b33a7fef.mp3"},AwvN:function(e,t,o){e.exports=o.p+"chirpy.6792fab6703f7222b9e671731318b1a8.mp3"},EDyN:function(e,t,o){e.exports=o.p+"call.961bf7a7267717c572de1c89456459d0.mp3"},EvA2:function(e,t,o){e.exports=o.p+"message.49f6f04e7c116770d4573e094e4a0013.mp3"},FsUC:function(e,t,o){e.exports=o.p+"fault.f9561694f3fce480ca1f9acbf8fca8f1.mp3"},PIGS:function(e,t,o){e.exports=o.p+"hand_bell.8fa7de2a7a40d51c4ee62d478d137e10.mp3"},QciA:function(e,t,o){e.exports=o.p+"calling.a4d0d2424e7055609cc4b3e053d83cb7.mp3"},UEYJ:function(e,t,o){e.exports=o.p+"3_notes_reverb.09e1400a89db8dd7527e5f3fa415051a.mp3"},"hp/T":function(e,t,o){"use strict";o.r(t),o.d(t,"DEFAULT_SOUNDS",(function(){return v})),o.d(t,"availableSounds",(function(){return E})),o.d(t,"play",(function(){return $})),o.d(t,"stop",(function(){return N})),o.d(t,"onStopped",(function(){return _})),o.d(t,"isPlaying",(function(){return x})),o.d(t,"enableAlertSoundsForMobile",(function(){return S})),o.d(t,"enableForMobile",(function(){return O}));o("YFKU");var n=o("mNbo"),a=o("txPx"),r=o("hY0g"),i=o.n(r),l=o("+J+G"),d=o("/k9u"),c=o("QciA"),p=o("5AtP"),s=o("EDyN"),u=o("AwvN"),f=o("FsUC"),h=o("qDTG"),m=o("PIGS"),b=o("iS7k"),g=o("EvA2"),w=o("26oy"),y=o("qOS0"),P=o("UEYJ");const A=Object(a.getLogger)("Lib.Sound",{color:"#dea433"}),v={sound:"notification/notification",alert:"alert/fired"},E=[{title:window.t("Alarm Clock"),path:"alert/alarm_clock",soundForAlerts:!0,filePath:l}];E.unshift({path:v.sound,title:window.t("Default"),common:!0,filePath:w},{title:window.t("Chat Message"),path:"chat/message",filePath:g,common:!0},{title:window.t("Chat Popup"),path:"chat/popup",filePath:y,common:!0},{title:window.t("Chat Call"),path:"chat/call",filePath:s},{title:window.t("Chat Calling"),path:"chat/calling",filePath:p},{title:window.t("Chat Hangup"),path:"chat/hangup",filePath:b},{title:window.t("Thin"),path:v.alert,filePath:h,soundForAlerts:!0},{title:window.t("3 Notes Reverb"),path:"alert/3_notes_reverb",filePath:P,soundForAlerts:!0}),E.push({title:window.t("Beep-beep"),path:"alert/beep_beep",filePath:d,soundForAlerts:!0},{title:window.t("Calling"),path:"alert/calling",filePath:c,soundForAlerts:!0},{title:window.t("Chirpy"),path:"alert/chirpy",filePath:u,soundForAlerts:!0},{title:window.t("Fault"),path:"alert/fault",filePath:f,soundForAlerts:!0},{title:window.t("Hand Bell"),path:"alert/hand_bell",filePath:m,soundForAlerts:!0});const F={};function $(e=v.sound,t){if(Object(n.isOnMobileAppPage)("any"))return Promise.resolve();A.logNormal(`Sound play attempt for "${e}" duration-${t}s;`);return k(e).play(t)}function N(e){if(Object(n.isOnMobileAppPage)("any"))return;let t=[];e?t.push(k(e)):t=Object.values(F),
t.forEach(e=>{e.stop()})}function _(e,t){Object(n.isOnMobileAppPage)("any")||k(e).playing.subscribe(e=>{e||t()},{once:!0})}function x(e){return!Object(n.isOnMobileAppPage)("any")&&k(e).playing.value()}function S(){O(E.filter(e=>!!e.soundForAlerts).map(e=>e.path))}function O(e){if(Object(n.isOnMobileAppPage)("any"))return;if(!e)return;if(!/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(window.navigator.userAgent))return;if(Array.isArray(e)||(e=[e]),0===(e=e.filter(e=>{const t=k(e);return!(!t||!t.el.load||t._mobilePreloadActive)&&(t._mobilePreloadActive=!0,!0)})).length)return void A.logNormal("enableForMobile no sounds passed");const t=()=>{const n=[];Array.isArray(e)&&e.forEach(e=>{const t=k(e);t.el.load();const o=t.play().catch(e=>{if("AbortError"!==e.name)throw A.logError(`enableForMobile for "${t.el.src}" preload error: - ${e.message}`),e});t.el.pause(),n.push(o)}),Promise.all(n).then(()=>{A.logNormal("enableForMobile sounds initialized")}),o.forEach(e=>{document.removeEventListener(e,t,!0)})},o=["click","touchend","keydown"];o.forEach(e=>{document.addEventListener(e,t,!0)})}const k=e=>{if(e in F)return F[e];A.logNormal(`requested sound  ${e} not cached, building a new audio element`);const t=E.find(t=>t.path===e);if(void 0===t)throw new Error(`Cannot find sound "${e}"`);const o=new Audio(t.filePath),n={el:o,playing:new i.a(!1),play:(t=0)=>n.playing.value()?(A.logNormal("sound already playing"),Promise.reject("already playing")):(n.playing.setValue(!0),new Promise((o,a)=>{let r=t>0;const i=()=>{(function(e){try{A.logNormal(`"${e.el.src}" triggering html5 play method, readyState - ${e.el.readyState}; muted - ${e.el.muted}; volume - ${e.el.volume}; currentTime - ${e.el.currentTime}`);let t=e.el.play();return t||(t=Promise.resolve()),t}catch(t){return A.logError(`play method for "${e.el.src}" catch error - ${t.message}`),Promise.reject(t)}})(n).catch(t=>{A.logNormal(`stop counting sound "${e}"; as playing due to an error: ${t.message}`),n.stop(),a(t)})};n._onEnded=()=>{r?i():(n.stop(),o())},n.el.addEventListener("ended",n._onEnded),r&&setTimeout(()=>{A.logNormal(`"${e}" repeat timeout - ${t}s off`),r=!1},1e3*t),i()})),stop:()=>{n.el.pause(),n.playing.setValue(!1),n._onEnded&&n.el.removeEventListener("ended",n._onEnded)}};F[e]=n;return["canplaythrough","error"].forEach(t=>{o.addEventListener(t,()=>{A.logNormal(`for sound "${e}", event - ${t} is fired`)},!1)}),A.logNormal("canPlayType - "+o.canPlayType("audio/mp3")),F[e]};O(E.filter(e=>!!e.common).map(e=>e.path))},iS7k:function(e,t,o){e.exports=o.p+"hangup.a9dcd5a2dc2fc37abba02c7d688c13ca.mp3"},qDTG:function(e,t,o){e.exports=o.p+"fired.ecfdbbef82db7347aed64ea12a69d5df.mp3"},qOS0:function(e,t,o){e.exports=o.p+"popup.0fae26fafe80bd033b16c1aff723016e.mp3"}}]);