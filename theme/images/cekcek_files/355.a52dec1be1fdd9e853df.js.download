(window.webpackJsonp=window.webpackJsonp||[]).push([[355],{"8zSw":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return d}));var i=o("Eyy1"),l=o("qFKp"),r=o("c44N"),a=o("KDMZ"),n=o("f2d2");const c=[{name:"twitter",theme:"",imageData:URL.createObjectURL(new Blob([n],{type:"image/svg+xml"}))}],s=new a.a(c,24);class d{constructor(){this._cachedItems=[]}getItem(e,t){const o=this._cachedItems.find(o=>o.sourceLabel===e&&Object(r.areEqualPaneRenderParams)(t,o.params));if(void 0!==o)return o.canvas;const a=s.getIcon(e,"");if(!a.ready())return null;const n=document.createElement("canvas");n.width=24*t.pixelRatio,n.height=24*t.pixelRatio,n.style.width="24px",n.style.height="24px";const c=Object(i.ensureNotNull)(n.getContext("2d"));return c.setTransform(1,0,0,1,0,0),l.isEdge||c.scale(t.pixelRatio,t.pixelRatio),c.drawImage(a.image(),0,0),this._cachedItems.push({params:t,sourceLabel:e,canvas:n}),n}}},KDMZ:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o("Eyy1"),l=o("aIyQ"),r=o.n(l);class a{constructor(e,t,o){this._ready=!1,this._img=function(e,t,o){const i=new Image;return i.width=t,i.height=t,i.onload=o,i.src=e,i}(e,t,()=>{this._ready=!0,o()})}ready(){return this._ready}image(){return this._img}}class n{constructor(e,t){this._icons=new Map,this._onAllIconsLoaded=new r.a,this._pendingLoading=e.length;const o=()=>{0==--this._pendingLoading&&this._onAllIconsLoaded.fire()};e.forEach(e=>{const i=this._icons.get(e.name)||new Map;i.set(e.theme,new a(e.imageData,t,o)),this._icons.set(e.name,i)})}getIcon(e,t){return Object(i.ensureDefined)(Object(i.ensureDefined)(this._icons.get(e)).get(t))}onAllIconsReady(){return this._onAllIconsLoaded}}},f2d2:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="#00ACEE" d="M23.5 12a11.5 11.5 0 1 1-23 0 11.5 11.5 0 0 1 23 0z"/><path fill="#fff" d="M17.82 8.47c-.42.18-.86.3-1.34.37.48-.3.85-.75 1.03-1.3-.45.27-.95.47-1.48.57a2.33 2.33 0 0 0-3.97 2.13 6.61 6.61 0 0 1-4.8-2.44 2.33 2.33 0 0 0 .72 3.11 2.32 2.32 0 0 1-1.06-.29v.03c0 1.13.8 2.07 1.87 2.29a2.35 2.35 0 0 1-1.05.04c.3.92 1.16 1.6 2.18 1.61a4.67 4.67 0 0 1-3.45.97 6.59 6.59 0 0 0 3.57 1.04 6.58 6.58 0 0 0 6.62-6.92c.45-.33.85-.74 1.16-1.2v-.01z"/></svg>'},yujx:function(e,t,o){"use strict";var i=o("HGP3"),l=o("zDbI"),r=o("jvrd"),a=o("aO4+"),n=o("GEp6"),c=o("f6yo"),s=o("Eyy1"),d=o("VaSN"),h=o("ikwP"),u=o("qgcf"),m=o("VdBB"),g=o("XXdw"),b=o("8zSw"),p=o("Zp/P");const _=new WeakMap;function f(e,t,o,i){let l=_.get(e);return void 0!==l&&l.width===t||(l=function(e,t,o,i){const l=Object(h.createDisconnectedCanvas)(document,new h.Size(t,t),1),r=0===i?Math.min(e.width,e.height):Math.max(e.width,e.height),a=Math.round(e.width/2-r/2),n=Math.round(e.height/2-r/2),c=Object(h.getContext2D)(l);return o&&(c.beginPath(),c.arc(t/2,t/2,t/2,0,2*Math.PI,!0),c.closePath(),c.clip()),c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.drawImage(e,a,n,r,r,0,0,t,t),l}(e,t,o,i),_.set(e,l)),l}function I(e){return e.poleStartY}function P(e){
return e.inverseAnchorPosition?e.anchorY:e.anchorY+(e.labelHeight+e.poleTailHeight+2*e.circleRadius)*e.direction}function C(e){return e.inverseAnchorPosition?e.anchorY+(2*e.circleRadius+e.poleTailHeight)*e.direction:e.anchorY+e.labelHeight*e.direction}function w(e){return e.inverseAnchorPosition?C(e)-e.poleTailHeight*e.direction:C(e)+e.poleTailHeight*e.direction}const x=new b.a;function v(e,t,o,i,l,r){const a=r.pixelRatio,n=Object(p.fillScaledRadius)(t.circleRadius,a),c=Math.round(t.x*a),s=t.inverseAnchorPosition?Math.round(t.anchorY*a)+Math.round(t.circleRadius*a)*t.direction:Math.round(t.anchorY*a)+Math.round((t.labelHeight+t.poleTailHeight+t.circleRadius)*a)*t.direction,d=Math.max(1,Math.floor(a))%2/2,h=c+d,u=s+d;e.save();const m=u+.05*n,b=e.createRadialGradient(h,m,n/2,h,m,1.1*n);if(b.addColorStop(0,"transparent"),b.addColorStop(.1,i),b.addColorStop(1,"transparent"),e.fillStyle=b,e.beginPath(),e.arc(h,m,1.1*n,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore(),e.beginPath(),e.arc(h,u,n,0,2*Math.PI,!0),e.closePath(),e.fill(),null!==t.image){const i=t.srcItem.type()===g.StoriesTimeLineItemType.Emoji,l=i?2*Object(p.fillScaledRadius)(o,a):2*n,r=f(t.image,l,!i,i?1:0);e.drawImage(r,h-l/2,u-l/2)}const _=Math.round(t.circleBorderWidth*a),I=Object(p.strokeScaledRadius)(t.circleRadius,a,_);if(e.lineWidth=_,e.beginPath(),e.arc(h,u,I,0,2*Math.PI,!0),e.closePath(),e.stroke(),t.outsideBorderWidth){e.save();const o=Math.round(t.outsideBorderWidth*a),i=I+_/2+o/2;e.lineWidth=o,e.strokeStyle=l,e.beginPath(),e.arc(h,u,i,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.restore()}const P=t.srcItem.sourceLabel();if(null!==P){const o=x.getItem(P,r);if(null!==o){const i=Math.round(h+t.circleRadius*a-o.width),l=Math.round(u-t.circleRadius*a);e.drawImage(o,i,l);const r=o.width/2,n=i+r,c=l+r;e.save(),e.lineWidth=_,e.beginPath(),e.arc(n,c,r,0,2*Math.PI,!0),e.closePath(),e.stroke(),e.restore()}}}class R{constructor(e,t,o,i){this._data=null,this._labels=[],this._cacheRects={},this._items=[],this._hitTestResult=e,this._showTooltipHandler=t,this._clearSelectedDataHandler=o,this._phantomMode=Boolean(i)}setData(e){this._data=e}clearItems(){this._labels=[],this._items=[],this._cacheRects={}}addItem(e){const t={circleBackgroundColor:e.circleBackgroundColor,circleBorderColor:e.circleBorderColor,circleBorderWidth:e.circleBorderWidth,outsideBorderWidth:e.outsideBorderWidth,image:e.image,itemIndex:e.itemIndex,labelIndex:e.labelIndex,x:e.x,anchorY:e.anchorY,poleTailHeight:e.poleTailHeight,poleStartY:e.poleStartY,circleRadius:e.circleRadius,srcItem:e.srcItem,direction:e.direction*(e.inverseAnchorPosition?-1:1),labelHeight:0,labelId:-1,inverseAnchorPosition:e.inverseAnchorPosition},o={offsetX:0,offsetY:0,points:[new a.Point(e.x,e.anchorY)],forceCalculateMaxLineWidth:!0,vertAlign:-1===e.labelDirection?"bottom":"top",horzAlign:"center",horzTextAlign:"center",font:e.labelFont,fontSize:e.labelFontSize,bold:e.labelFontBold,italic:e.labelFontItalic,backgroundRoundRect:e.labelBorderRadius,padding:e.labelPadding,boxPaddingVert:e.labelBoxPaddingVert,
boxPaddingHorz:e.labelBoxPaddingHorz,wordWrapWidth:e.labelWordWrapWidth,color:e.labelColor,borderColor:e.labelBorderColor,borderWidth:1,backgroundColor:e.labelBackgroundColor,text:e.text};if(e.inverseAnchorPosition){const e=Object(s.ensureDefined)(o.points);e[0]=new a.Point(e[0].x,C(t)),t.labelId=this._labels.length}else{const i=new u.TextRenderer(o);this._labels.push(i),t.labelId=this._labels.length,t.labelHeight=i.measure().height;const l=1===e.direction?Math.min(t.poleStartY-t.labelHeight,t.anchorY):Math.max(t.poleStartY+t.labelHeight,t.anchorY);t.anchorY!==l&&(t.anchorY=l,o.points=[new a.Point(e.x,l)],i.setData(o))}const i=new u.TextRenderer(o);this._labels.push(i),this._items.push(t)}itemAnchorY(e){return e>=this._items.length?null:this._items[e].anchorY}hitTest(e,t){if(null===this._data)return null;for(let o=this._items.length-1;o>=0;--o){const i=this._items[o],[l,r,n]=this._doesPointBelongToItem(i,e);if(l||r||n){const e={hideCrosshairLinesOnHover:!0,activeItem:l||r?i.itemIndex:i.labelIndex};n?e.areaName=m.AreaName.Text:r&&(e.areaName=m.AreaName.Style);const o=this._showTooltipHandler;if(void 0!==o){const l={targetBox:this._itemRect(i,t.cssHeight),item:i.srcItem},r=e=>{const[t,o]=this._doesPointBelongToItem(i,e);return t||o};e.tapHandler=e=>{e.preventDefault(),o(l,new a.Point(e.clientX-e.localX,e.clientY-e.localY),r)},e.clickHandler=e=>{o(l,new a.Point(e.clientX-e.localX,e.clientY-e.localY),r)};const n=this._clearSelectedDataHandler;void 0!==n&&(e.doubleClickHandler=e=>n(),e.pressedMouseMoveHandler=e=>n(),e.executeDefaultAction={pressedMouseMoveHandler:!0,touchMoveHandler:!0})}return new m.HitTestResult(this._hitTestResult,e)}}return null}draw(e,t){if(null===this._data)return;e.save(),this._phantomMode&&(e.globalAlpha=.5);const{poleColor:o,emojiRadius:i}=this._data,l=t.pixelRatio,r=Math.max(1,Math.floor(l)),a=r%2?.5:0;e.beginPath(),e.strokeStyle=o,e.lineWidth=r;for(const n of this._items){const t=Math.round(n.x*l)+a;e.moveTo(t,Math.round(I(n)*l)),e.lineTo(t,Math.round(P(n)*l)),0!==n.poleTailHeight&&(e.moveTo(t,Math.round(C(n)*l)),e.lineTo(t,Math.round(w(n)*l)))}e.stroke();for(const n of this._items)e.strokeStyle=n.circleBorderColor,e.fillStyle=n.circleBackgroundColor,n.circleRadius>0&&v(e,n,i,this._data.shadowColor,this._data.outsideBorderColor,t),this._labels[n.labelId].draw(e,t);e.restore()}_itemRect(e,t){if(!this._cacheRects[e.labelId]){const o=this._labels[e.labelId].rect(),i=e.circleRadius>0?e.circleRadius+e.circleBorderWidth:0,l=o.y<e.poleStartY;this._cacheRects[e.labelId]={top:Math.max(l?o.y:e.poleStartY,0),bottom:Math.min(l?e.poleStartY:o.y+o.height,t),left:Math.min(e.x-i,o.x),right:Math.max(e.x+i,o.x+o.width)}}return this._cacheRects[e.labelId]}_doesPointBelongToItem(e,t){const o=Object(d.lastEventIsTouch)()?20:3,i=e.x,l=Object(n.distanceToSegment)(new a.Point(i,I(e)),new a.Point(i,P(e)),t).distance<o,r=!l&&e.circleRadius>0&&Object(c.pointInCircle)(t,new a.Point(i,function(e){
return e.inverseAnchorPosition?e.anchorY+e.circleRadius*e.direction:e.anchorY+(e.labelHeight+e.poleTailHeight+e.circleRadius)*e.direction}(e)),e.circleRadius+o);return[l,r,!l&&!r&&null!==this._labels[e.labelId].hitTest(t)]}}o.d(t,"a",(function(){return S}));const B={circleBackgroundColor:i.colorsPalette["color-cold-gray-800"],circleBorderColor:i.colorsPalette["color-cold-gray-900"],labelBackgroundColor:i.colorsPalette["color-cold-gray-900"],labelBorderColor:i.colorsPalette["color-cold-gray-800"],labelTextColor:i.colorsPalette["color-cold-gray-200"],poleColor:i.colorsPalette["color-cold-gray-500"],shadowColor:"rgba(0,0,0,0.4)",selectionColor:i.colorsPalette["color-tv-blue-500"],labelHoveredColor:i.colorsPalette["color-cold-gray-800"],labelSelectedColor:i.colorsPalette["color-tv-blue-a900"]},M={circleBackgroundColor:i.colorsPalette["color-cold-gray-100"],circleBorderColor:i.colorsPalette["color-white"],labelBackgroundColor:i.colorsPalette["color-white"],labelBorderColor:i.colorsPalette["color-cold-gray-150"],labelTextColor:i.colorsPalette["color-cold-gray-900"],poleColor:i.colorsPalette["color-cold-gray-500"],shadowColor:"rgba(107,121,136,0.4)",selectionColor:i.colorsPalette["color-tv-blue-500"],labelHoveredColor:i.colorsPalette["color-cold-gray-100"],labelSelectedColor:i.colorsPalette["color-tv-blue-50"]};class S{constructor(e,t,o,i,l){this._renderer=null,this._invalidated=!0,this._model=e,this._timeLine=t,this._timeLineItemsRenderer=new R(o,null==i?void 0:i.tooltipHandler,null==i?void 0:i.clearSelectedDataHandler,l)}update(){this._invalidated=!0}renderer(e,t){return this._invalidated&&(this._updateImpl(e),this._invalidated=!1),this._renderer}itemAnchorY(e){return this._timeLineItemsRenderer.itemAnchorY(e)}_updateImpl(e){this._renderer=null,this._timeLineItemsRenderer.clearItems();const t=this._timeLine.priceSource();if(null===t)return;const o=this._model.timeScale(),i=t.priceScale(),a=t.firstValue();if(o.isEmpty()||null===i||i.isEmpty()||null===a)return;const n=this._model.isDark(),c=n?B:M;let s;const d=this._model.mainSeries();for(const h of this._timeLine.items()){if(this._timeLine.isHidden(h.category()))continue;const u=h.position(),m=t===d?Object(r.b)(d,h):Object(r.a)(h,i,a);if(null===m)continue;const g=o.indexToCoordinate(m.index),b=i.priceToCoordinate(m.price,a),p=h.showPlate();let _=Object(r.d)(u,e,b,m.positionPointDirection);_>=-1e-10&&_<=e+1e-10&&(_=Math.min(e-2,Math.max(2,_)));const f=m.visualDirection!==m.positionPointDirection,I=m.visualDirection,P=this._timeLine.isItemSelected(h),C=this._timeLine.isItemHovered(h),w={circleBackgroundColor:h.backgroundPlateColor(n)||c.circleBackgroundColor,outsideBorderWidth:P?2:C?1:0,circleBorderColor:c.circleBorderColor,circleBorderWidth:1,image:h.image(),itemIndex:h.itemIndex(),labelIndex:h.labelIndex(),x:g,anchorY:_,poleTailHeight:h.headline()&&p?10:0,poleStartY:m.poleStartY,circleRadius:p?35:0,direction:I,inverseAnchorPosition:f,srcItem:h,text:h.headline(),labelDirection:m.positionPointDirection,labelFont:l.CHART_FONT_FAMILY,labelFontSize:h.fontSize&&h.fontSize()||12,
labelFontBold:h.fontBold&&h.fontBold()||!1,labelFontItalic:h.fontItalic&&h.fontItalic()||!1,labelBorderRadius:4,labelPadding:3,labelBoxPaddingVert:6,labelBoxPaddingHorz:8,labelWordWrapWidth:134,labelColor:c.labelTextColor,labelBorderColor:c.labelBorderColor,labelBackgroundColor:P?c.labelSelectedColor:C?c.labelHoveredColor:c.labelBackgroundColor};this._timeLine.isItemHovered(h)?s=w:this._timeLineItemsRenderer.addItem(w)}void 0!==s&&this._timeLineItemsRenderer.addItem(s),this._timeLineItemsRenderer.setData({emojiRadius:16,poleColor:c.poleColor,shadowColor:c.shadowColor,outsideBorderColor:c.selectionColor}),this._renderer=this._timeLineItemsRenderer}}}}]);