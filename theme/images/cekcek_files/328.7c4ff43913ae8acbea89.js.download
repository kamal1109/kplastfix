(window.webpackJsonp=window.webpackJsonp||[]).push([[328],{"/EqU":function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));r("YFKU");var i=r("hp/T"),s=r("txPx"),n=r("PJXJ");const a=Object(s.getLogger)("Alerts.Screener.Params");function o(t,e,r){e.hasOwnProperty(t)||(e[t]=r[t])}function l(t,e,r){return r[t]!==e[t]&&(r[t]=e[t],!0)}const c={};class u{constructor(t,e){if("number"==typeof e){if(c.hasOwnProperty(e))return c[e];this.alertId=e,c[e]=this}this._isValid=!1,this.update(t)}update(t){this.source=t;const e=u.getDefaults();if(o("expirationDate",this,e),t.exp&&(this.expirationDate=new Date(t.exp)),o("filterSetId",this,e),o("message",this,e),t.msg){const e=function(t){let e=null;try{e=JSON.parse(t)}catch(r){a.logError(r&&r.message||$.t("Unknown Error"))}return e}(t.msg);e?(this.filterSetId=e.fid,this.filterTitle=e.fttl,this.message=e.msg,this._isValid=!0):this._isValid=!1}else this._isValid=!1;o("notifyWith",this,e),o("soundParams",this,e),t.np&&(this.notifyWith.email=!!t.np.email,this.notifyWith.popup=!!t.np.popup,this.notifyWith.sms=!!t.np.sms,this.notifyWith.sound=!!t.np.sound,t.np.sound&&(this.soundParams.name=t.np.sound.file,this.soundParams.duration=Object(n.ensureDurationInSeconds)(t.np.sound.duration)),this.notifyWith.trueSMS=!!t.np.true_sms),o("scannerParams",this,e),t.sp&&(this.scannerParams.filter=t.sp.filter,t.sp.country&&(this.scannerParams.country=t.sp.country))}getState(){return{expirationDate:new Date(this.expirationDate),message:this.message,notifyWith:{email:this.notifyWith.email,popup:this.notifyWith.popup,sms:this.notifyWith.sms,sound:this.notifyWith.sound,trueSMS:this.notifyWith.trueSMS},soundParams:{duration:this.soundParams.duration,name:this.soundParams.name}}}setState(t){let e=!1;return this.expirationDate.getTime()!==t.expirationDate.getTime()&&(this.expirationDate=new Date(t.expirationDate),e=!0),e=l("message",t,this)||e,e=l("email",t.notifyWith,this.notifyWith)||e,e=l("popup",t.notifyWith,this.notifyWith)||e,e=l("sms",t.notifyWith,this.notifyWith)||e,e=l("sound",t.notifyWith,this.notifyWith)||e,e=l("trueSMS",t.notifyWith,this.notifyWith)||e,e=l("duration",t.soundParams,this.soundParams)||e,e=l("name",t.soundParams,this.soundParams)||e,e}getEditParams(t=!1){return u.getSource(this,t?void 0:this.alertId)}isValid(){return this._isValid}static getSource(t,e){const r={email:t.notifyWith.email,popup:t.notifyWith.popup,sms:t.notifyWith.sms,true_sms:t.notifyWith.trueSMS};t.notifyWith.sound&&(r.sound={duration:Object(n.ensureDurationInSeconds)(t.soundParams.duration),file:t.soundParams.name});const i={exp:t.expirationDate.toISOString(),msg:JSON.stringify({fid:t.filterSetId||null,fttl:t.filterTitle||null,msg:t.message||""}),np:r,start:!1};if(t.scannerParams){let e="unknown";if(t.scannerParams.country)e=t.scannerParams.country;else{const t=u.getDefaults();t.scannerParams&&t.scannerParams.country&&(e=t.scannerParams.country)}i.sp={country:e,filter:t.scannerParams.filter},t.scannerParams.options&&(i.sp.options=t.scannerParams.options)}return"number"==typeof e&&(i.id=e),i}static getDefaults(){
const t=new Date;return t.setMonth(t.getMonth()+1),{expirationDate:t,filterSetId:null,message:$.t("Screener Alert triggered"),notifyWith:{email:!1,popup:!0,sms:!1,sound:!0,trueSMS:!1},scannerParams:{country:"america",filter:[]},soundParams:{duration:0,name:i.DEFAULT_SOUNDS.alert}}}}},"2qdo":function(t,e,r){"use strict";function i(){return Promise.all([r.e("vendors"),r.e(18),r.e("dialogs-core"),r.e(24),r.e(33),r.e(49),r.e(492),r.e(38),r.e(48),r.e(91),r.e("alert-notifier")]).then(r.bind(null,"Z59a")).then(t=>t.createAlertNotifier())}r.r(e),r.d(e,"createAlertNotifier",(function(){return i}))},"5gzj":function(t,e,r){"use strict";r.r(e),r.d(e,"createAlertDialog",(function(){return s}));r("YFKU");const i={title:window.t("Create Alert"),width:450,destroyOnClose:!0,focusFirstControl:!1,closeOnOutsideClick:!1,closeOnClickAtOtherDialogs:!1,contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border tv-alert-dialog tv-alert-dialog__actions">'};function s(t){return Promise.all([r.e("vendors"),r.e(6),r.e(9),r.e(12),r.e(19),r.e(18),r.e(24),r.e(33),r.e(49),r.e(69),r.e(83),r.e(102),r.e(103),r.e(105),r.e(115),r.e(118),r.e(179),r.e(389),r.e(486),r.e(8),r.e(21),r.e(38),r.e(48),r.e(76),r.e(96),r.e(112),r.e(166),r.e(260),r.e("alert-dialog")]).then(r.bind(null,"dcYh")).then(e=>{const r=e.AlertDialog;return Promise.resolve(new r(Object.assign(Object.assign({},i),t)))})}},"6+3a":function(t,e,r){"use strict";var i=r("aIyQ"),s=r.n(i),n=r("/EqU");const a=["created","changed"];class o{constructor(t){this.id=t.id,this.params=new n.a(t.ap,this.id),this._updateState(t.s),this.params.filterSetId&&(this.filterSetId=this.params.filterSetId)}update(t){t.ap&&this.params.update(t.ap),this._updateState(t.s)}toStub(t){"number"==typeof t&&(this.id=t),this.isStub=!0}_updateState(t){t&&-1===a.indexOf(t)&&this.state!==t&&(this.state=t),this.state||(this.state="pending")}}function l(t,e){return t.id-e.id}r.d(e,"a",(function(){return c}));class c{constructor(){this._alerts=[],this.itemsChanged=new s.a,this.itemsUpdated=new s.a,this.itemsDeleted=new s.a}update(t){let e=!1,r=!1,i=!1;for(let s=0;s<t.length;++s){const n=t[s];let a=this.findById(n.id);a&&a.isStub&&(this._alerts.splice(this._alerts.indexOf(a),1),a=null),a?(a.update(n),"deleted"===a.state&&(this._alerts.splice(this._alerts.indexOf(a),1),e=!0,i=!0),r=!0):(a=new o(n),"deleted"===a.state?i=!0:a.params.isValid()&&(this._alerts.push(a),e=!0))}e&&(this._alerts.sort(l),this.itemsChanged.fire()),r&&this.itemsUpdated.fire(),i&&this.itemsDeleted.fire()}findById(t){return this._alerts.find(e=>e.id===t)||null}getByFilterSetId(t,e){const r=e?r=>r.filterSetId===t&&r.params.scannerParams.country===e:e=>e.filterSetId===t;return this._alerts.filter(r)}getRunning(){return this._alerts.filter(t=>"running"===t.state)}reset(){this._alerts.length=0}getStub(t){return this._alerts.find(e=>!!e.isStub&&e.id===t)||null}toArray(){return this._alerts.slice()
}}},"7Ut2":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"e",(function(){return l}));class i{constructor(t){this.event="create_alert",this.location="toolbar",this.state="",this.value="",this.source=t}}class s{constructor(t){this.event="start_alert",this.location="toolbar",this.state="",this.value="",this.source=t}}class n{constructor(t){this.event="edit_alert",this.state="",this.value="",this.source=t,this.location=t?"toolbar":""}}class a{constructor(t){this.event="delete_alert",this.state="",this.value="",this.source=t,this.location=t?"toolbar":""}}class o{constructor(t){this.event="disable_alert",this.location="toolbar",this.state="",this.value="",this.source=t}}class l{constructor(){this.event="open_alerts_log",this.source="alerts_log_selector",this.location="toolbar",this.state="",this.value=""}}},CoNv:function(t,e,r){"use strict";r.r(e);r("YFKU"),r("HbRj");var i=r("Wt0y"),s=r("NP3r"),n=r("bKsZ"),a=r("TxTq"),o=r.n(a),l=r("DJLU"),c=r("aIyQ"),u=r.n(c),h=r("Zdjc"),d=r("txPx"),f=r("Vdly"),g=r("/EqU"),m=r("6+3a"),_=r("bfC2"),p=r("JZcM"),S=r("IWHC"),y=r("wVAQ"),b=r("+GxX");const D=Object(d.getLogger)("Alerts.Screener.Request"),w=window.initData.screener_alerts_base_url;function P(t,e){if(Object(b.isFeatureEnabled)("screener-alerts-maintenance"))return Promise.reject(new Error("Screener Alerts Maintenance"));if(!w)return Promise.resolve(null);const r={credentials:"include",method:"POST"};void 0!==e&&(r.body=JSON.stringify(e));const i=`${w}${t}/`;return D.logNormal(JSON.stringify({fetchOptions:r,url:i})),Object(y.fetch)(i,r).then(e=>"create_alert"===t?e.json():e.text()).then(e=>{if("create_alert"===t){const t=e;if(t){if(t.error)throw new Error(t.error);return t.id}throw new Error("Unknown Error")}if(e)throw new Error(e);return null})}w||D.logNormal("Screener alerts disabled because base url is not set");var v=r("2qdo"),E=r("5gzj"),A=r("fZEr"),W=r("brCa"),x=r("oOPW"),O=r("7Ut2"),C=r("j72q");r.d(e,"ScreenerAlertsDispatcher",(function(){return G}));const T=Object(d.getLogger)("Alerts.Screener.Dispatcher"),I=Object(d.getLogger)("Alerts.Screener.PushStream"),j="alerts.creating.";class M{constructor(t,e){this.error=t,this.field=e}}class B extends Error{constructor(t){super("require: "+t),this.feature=t}}const U=()=>{Object(W.showNoticeDialog)({title:$.t("Screener Alerts maintenance"),content:$.t("We are doing some brief daily maintenance. Screener Alerts will be back really soon, thanks for your patience!")})};let N;class G{constructor(){if(this._notifierPromise=null,N)return N;N=this,this.alerts=new m.a,this.alerts.itemsDeleted.subscribe(null,()=>{P("fire_alert_events").catch(t=>T.logError(String(t)))}),this.events=new _.a,this.events.triggered.subscribe(this,this._onTriggerEvents),this.alertsSyncDelegate=new u.a;const t=()=>this.reset().catch(t=>T.logError(String(t)));window.loginStateChange&&window.loginStateChange.subscribe(this,t),t(),
"battle"!==Object(i.environment)()&&(window._exposed_screenerAlertsDispatcher=this)}reset(){return this._alertDialog&&this._alertDialog.close(),this.alerts.reset(),this.events.reset(),this.loading=this._resetLoading(),this.loading}startAlert(t){return P("start_alert",t)}stopAlert(t){return P("stop_alert",t)}deleteAlert(t){return P("delete_alert",t).then(()=>P("fire_alert_events"))}deleteAlerts(t){return Promise.all(t.map(t=>P("delete_alert",t))).then(()=>P("fire_alert_events"))}setFilterTitleGetter(t){this._filterTitleGetter=t}setScannerParamsGetter(t){this._scannerParamsGetter=t}showEditAlertDialog(t,e="",r=!1,i=!0){if(Object(b.isFeatureEnabled)("screener-alerts-maintenance"))return void U();this._alertDialog&&this._alertDialog.close();const s=this.alerts.findById(t);if(!s)return void T.logError(`Unable to find screener alert with id "${t}"`);let n,a,o=null;return s.filterSetId&&(this._filterTitleGetter?o=this._filterTitleGetter(s.filterSetId):s.params.filterTitle&&(o=s.params.filterTitle)),!0===r?(n=o?$.t("Enable Screener Alert on {0} Screen").format(o):$.t("Enable Screener Alert"),a=$.t("Enable")):(n=o?$.t("Edit Alert on {0} Screen").format(o):$.t("Edit Alert"),a=$.t("Save")),Object(E.createAlertDialog)({alertState:s.params.getState(),deleteCaption:$.t("Delete"),enableDeleteButton:!0,maxExpire:this._getMaxExpire(),minExpire:this._getMinExpire(),submitCaption:a,title:n,alertCategory:S.AlertCategory.Screener,entryPoint:e}).then(t=>(this._alertDialog=t,this._alertDialog.stateChange.subscribe(this,this._onAlertDialogStateChange),this._alertDialog.on("action:submit",t=>{if(!t.isLoading()){let i;const n=t.getAlertState(),a=this._validate(n);if(a instanceof Error||a.error)i=Promise.reject(a);else if(s.params.setState(n)){const t=s.params.getEditParams();"running"!==s.state&&!0!==r||(t.start=!0),i=P("edit_alert",t),Object(C.e)(new O.d(e))}else!0===r&&"running"!==s.state?(i=P("start_alert",s.id),Object(C.e)(new O.f(e))):i=Promise.resolve(null),this._dialogSubmitDelegate&&this._dialogSubmitDelegate.fire();i.then(()=>{t.restoreButtons(),t.close()}).catch(t=>this._handleError(t))}}),this._alertDialog.on("action:delete",t=>{if(!t.isLoading()){const r=r=>P("delete_alert",s.id).then(()=>{t.close(),null==r||r(),Object(C.e)(new O.b(e))}).catch(t=>{null==r||r(),t&&this._handleError(t)});i?Object(A.showConfirm)({title:$.t("Delete Screener Alert"),text:$.t("Do you really want to delete Alert on {name} Screen?").format({name:o||""}),onConfirm:({dialogClose:t})=>r(t),onClose:()=>t.restoreButtons()}):r()}}),this._alertDialog.on("beforeClose",()=>this._deleteDialog()),this._alertDialog.open(),this._alertDialog))}showCreateAlertDialog(t,e,r,i){if(Object(b.isFeatureEnabled)("screener-alerts-maintenance"))return void U();if(!this._scannerParamsGetter)throw new ReferenceError("ScannerParamsGetter required to create screener alert");this._alertDialog&&this._alertDialog.close();let s=null;this._filterTitleGetter&&(s=this._filterTitleGetter(t));const n=this._getDefaultState();let a;return n.filterSetId=t,
n.message=$.t("New {0}").format(s)+(i?` (${i})`:""),a=s?$.t("Enable Alert on {0} Screen").format(s):$.t("Enable Alert"),Object(E.createAlertDialog)({alertState:n,maxExpire:this._getMaxExpire(),minExpire:this._getMinExpire(),submitCaption:$.t("Enable"),title:a,alertCategory:S.AlertCategory.Screener,entryPoint:e}).then(i=>(this._alertDialog=i,this._alertDialog.stateChange.subscribe(this,this._onAlertDialogStateChange),this._alertDialog.on("action:submit",i=>{if(!i.isLoading()){const e=i.getAlertState(),n=this._validate(e);if(n instanceof Error||n.error)return void this._handleError(n);if(this._scannerParamsGetter&&(e.scannerParams=this._scannerParamsGetter(t)),!e.scannerParams)return T.logError("Unable to get scannerParams"),i.error($.t("System Error. Please contact support")),void i.restoreButtons();if(e.scannerParams.filter.length)for(let t=0;t<e.scannerParams.filter.length;++t){const r=e.scannerParams.filter[t];if(!r.left||!r.operation)return T.logError("Unable to get scannerParams. Empty filter"),i.error($.t("System Error. Please contact support")),void i.restoreButtons()}s&&(e.filterTitle=s);const a=g.a.getSource(e);a.trigger_many=!0,!0===r&&(a.start=!0),this._dialogSubmitDelegate&&this._dialogSubmitDelegate.fire(),P("create_alert",a).then(()=>{i.restoreButtons(),i.close()}).catch(t=>this._handleError(t))}Object(C.e)(new O.a(e))}),this._alertDialog.on("beforeClose",()=>this._deleteDialog()),this._alertDialog.open(),this._alertDialog))}getDialogSubmitDelegate(){return this._alertDialog?(this._dialogSubmitDelegate||(this._dialogSubmitDelegate=new u.a),this._dialogSubmitDelegate):null}saveAlert(t,e){const r=this.alerts.findById(t);if(r){const t=r.params.getEditParams();return t.trigger_many=!0,("running"===r.state&&!1!==e||!0===e)&&(t.start=!0),P("edit_alert",t)}return Promise.reject(new ReferenceError("Can not find alert with id "+t))}cloneAlert(t,e){const r=this.alerts.findById(t);if(!r)return Promise.reject(new ReferenceError("Can not find alert with id "+t));const i=r.params.getEditParams(!0);return"running"===r.state&&(i.start=!0),i.trigger_many=!0,P("create_alert",i).then(i=>{if("number"!=typeof i)throw new Error("Did not receive cloned alert id from alert with id "+t);const s=r.id;return this.alerts.findById(i)||r.toStub(i),!0!==e?this.deleteAlert(s):null})}_deleteDialog(){delete this._dialogSubmitDelegate,delete this._alertDialog}_onMessage(t){if(I.logNormal(JSON.stringify(t)),t.trigger&&("snapshot"===t.trigger.t&&this.events.reset(),Array.isArray(t.trigger.ae)&&t.trigger.ae.length&&this.events.update(t.trigger.ae,"trigger"===t.trigger.t)),t.state){let e=!1;"snapshot"===t.state.t&&(this.alerts.reset(),e=!0),Array.isArray(t.state.s)&&t.state.s.length&&this.alerts.update(t.state.s),e&&this.alertsSyncDelegate.fire()}}_resetLoading(){return o.a.off("screener_alerts"),window.is_authenticated&&Boolean(w)?(o.a.on("screener_alerts",t=>this._onMessage(t)),this._createLoading()):Promise.resolve()}async _createLoading(){const t=this.alertsSyncDelegate,e=()=>new Promise((e,r)=>{var i;t.subscribe(null,e,!0),(i=4e3,
new Promise(t=>{setTimeout(t,i)})).then(()=>r(new Error("Receive screener alerts snapshot timeout: 4")))});let r=!1;try{return await Promise.all([e(),(async()=>{await new Promise((t,e)=>{if(o.a.statusPrivate()===l.ConnectionStatus.Open)return void t();const r=e=>{if(e===l.ConnectionStatus.Open)return o.a.offStatus(r),t()};o.a.onPrivateStatus(r)}),r||await Promise.all([P("fire_not_shown_alert_events"),P("fire_alert_events"),P("fire_alerts")])})()]),Promise.resolve()}catch(i){r=!0,T.logError(i)}}_onTriggerEvents(t){this._getAlertsNotifier().then(e=>{for(let r=0;r<t.length;++r)e.addNotification(this._getEventNotification(t[r]));P("events_shown",t.map(t=>t.id)).catch(t=>T.logError(String(t)))})}_getEventNotification(t){let e=t.params.filterSetId&&"function"==typeof this._filterTitleGetter&&this._filterTitleGetter(t.params.filterSetId)||t.params.filterTitle,r="";return e?r=$.t("Screener Alert on __filter__ Screen",{filter:e}):e=r=$.t("Screener Alert"),{id:"fired:screener:"+t.id,fired:t.fired,type:p.a.Fired,desktopNotificationTitle:r,dialogSubTitle:t.params.message,description:t.params.message,title:e||"",alertId:t.alertId,alertCategory:S.AlertCategory.Screener,eventId:t.id,notifyWith:t.params.notifyWith,soundParams:t.params.soundParams,symbols:t.symbols||[]}}_handleError(t){let e="Unknown Error";if(t instanceof Error?e=t.message:t instanceof M&&t.error?e=t.error.message:t&&(e=String(t)),this._alertDialog)if(t instanceof M)this._alertDialog.error(t.error&&t.error.message||$.t("Validation Error"),t.field),this._alertDialog.restoreButtons();else if(t.hasOwnProperty("feature")){switch(t.feature){case n.ProductFeatures.ALERTS_TRUE_SMS:Object(h.showGoProAlertsTrueSmsDialog)();break;default:this._alertDialog.error($.t("Alert saving failed. Please try again")),T.logError("unexpected product restriction: "+e)}this._alertDialog.restoreButtons()}else"max_alerts_count_exceeded"===e?(Object(x.createGoProDialog)({feature:"screenerAlerts"}),this._alertDialog.close()):(this._alertDialog.error($.t("Alert saving failed. Please try again")),this._alertDialog.restoreButtons());T.logError(e)}_getMinExpire(){return new Date(Date.now()+18e6)}_getMaxExpire(){const t=new Date(Date.now()+5184e6);return t.setHours(23,59,59,999),t}_validate(t){const e=new Date;if(t.expirationDate<=e)return new M(new Error($.t("Expiration date must be in the future")),"expirationDate");const r=this._getMaxExpire();return t.expirationDate>r?new M(new Error($.t("Maximum expiration time is __days__ days",{days:Math.round((r.getTime()-e.getTime())/864e5)})),"expirationDate"):t.notifyWith.trueSMS&&!Object(s.enabled)(n.ProductFeatures.ALERTS_TRUE_SMS)?new B(n.ProductFeatures.ALERTS_TRUE_SMS):new M}_onAlertDialogStateChange(t){if(!this._alertDialog)return;const e=this._alertDialog.getAlertState();t.forEach(t=>{if(Array.isArray(t.name))switch(t.name[0]){case"notifyWith":switch(t.name[1]){case"popup":f.setValue(j+"show_popup",e.notifyWith.popup);break;case"sound":f.setValue(j+"play_sound",e.notifyWith.sound);break;case"email":f.setValue(j+"send_email",e.notifyWith.email)
;break;case"sms":f.setValue(j+"send_sms",e.notifyWith.sms);break;case"trueSMS":f.setValue(j+"send_true_sms",e.notifyWith.trueSMS)}break;case"soundParams":switch(t.name[1]){case"name":f.setValue(j+"sound_file",e.soundParams.name);break;case"duration":f.setValue(j+"sound_duration",e.soundParams.duration)}}})}_getDefaultState(){const t=g.a.getDefaults();return t.notifyWith.popup=Boolean(f.getBool(j+"show_popup",t.notifyWith.popup)),t.notifyWith.sound=Boolean(f.getBool(j+"play_sound",t.notifyWith.sound)),t.notifyWith.email=Boolean(f.getBool(j+"send_email",t.notifyWith.email)),t.notifyWith.sms=Boolean(f.getBool(j+"send_sms",t.notifyWith.sms)),t.notifyWith.trueSMS=Boolean(f.getBool(j+"send_true_sms",t.notifyWith.trueSMS)),t.soundParams.name=f.getValue(j+"sound_file")||t.soundParams.name,t.soundParams.duration=f.getInt(j+"sound_duration")||t.soundParams.duration,t}_getAlertsNotifier(){return null===this._notifierPromise&&(this._notifierPromise=Object(v.createAlertNotifier)().then(t=>(t.onEditAlert.subscribe(null,(t,e)=>{e===S.AlertCategory.Screener&&this.showEditAlertDialog(t)}),t))),this._notifierPromise}}},IWHC:function(t,e,r){"use strict";var i;r.r(e),r.d(e,"AlertCategory",(function(){return i})),function(t){t.Price="price",t.Screener="screener"}(i||(i={}))},JZcM:function(t,e,r){"use strict";var i;r.d(e,"a",(function(){return i})),function(t){t.Fired="fired",t.FireControl="fire_control"}(i||(i={}))},PJXJ:function(t,e,r){"use strict";function i(t=0){return t<1e3?t:t/1e3}r.r(e),r.d(e,"ensureDurationInSeconds",(function(){return i}))},Zdjc:function(t,e,r){"use strict";r.r(e),r.d(e,"createGoProAlertsTrueSmsDialog",(function(){return s})),r.d(e,"showGoProAlertsTrueSmsDialog",(function(){return n}));r("YFKU");var i=r("oOPW");function s(){return Object(i.createGoProDialog)({feature:"alertsTrueSms",goOnMarkets:!1,isTrialAvailable:!0,upgradeMessage:window.t("Upgrade now"),visitPaymentPage:{billing_cycle:"y",options:{productName:"pro_premium",newWindow:!0}}})}function n(){s()}},bfC2:function(t,e,r){"use strict";var i=r("aIyQ"),s=r.n(i),n=r("/EqU");class a{constructor(t){this.alertId=t.aid,this.fired=new Date(t.t),this.id=t.id,this.params=new n.a(t.ap,this.alertId),this.symbols=t.d}}function o(t,e){return t.fired.getTime()-e.fired.getTime()}r.d(e,"a",(function(){return l}));class l{constructor(){this._events=[],this.itemsChanged=new s.a,this.triggered=new s.a}update(t,e){const r=[];for(let i=0;i<t.length;++i){const e=t[i];if(this.findById(e.id))continue;const s=new a(e);r.push(s),this._events.push(s)}r.length&&(this._events.sort(o),!0===e&&this.triggered.fire(r),this.itemsChanged.fire())}findById(t){return this._events.find(e=>e.id===t)||null}getByAlertId(t){return this._events.filter(e=>e.alertId===t)}reset(){this._events.length=0}toArray(){return this._events.slice()}}}}]);