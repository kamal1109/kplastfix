(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{"/udZ":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n("25b6"),i=n("YFKU");function o(t){if(void 0===t)return Object(i.t)("Unknown error");let e;return e=t instanceof Error?t.message:"object"==typeof t?JSON.stringify(t):t.toString(),Object(r.removeTags)(e)}function s(t){return t instanceof c?Object(r.removeTags)(t.detailedErrorMessage):o(t)}class c extends Error{constructor({detailedErrorMessage:t,userFriendlyMessage:e}){super(e),this.name="UserFriendlyError",this.detailedErrorMessage=t,Object.setPrototypeOf(this,c.prototype)}}},"0W4x":function(t,e,n){"use strict";n.r(e),n.d(e,"createQueryParams",(function(){return b})),n.d(e,"orderStatusToText",(function(){return O})),n.d(e,"sideToText",(function(){return T})),n.d(e,"orderTypeToText",(function(){return E})),n.d(e,"findArraysDifferences",(function(){return j})),n.d(e,"formatNumber",(function(){return _})),n.d(e,"retryWithChangingIntervals",(function(){return w})),n.d(e,"isOrderOrPositionMessageType",(function(){return v})),n.d(e,"roundToStepByPriceTypeAndSide",(function(){return F})),n.d(e,"TasksWithTermination",(function(){return k})),n.d(e,"numOfDecimalPlaces",(function(){return M})),n.d(e,"wrapDeferredWithPromise",(function(){return U})),n.d(e,"pipSizeForForex",(function(){return C})),n.d(e,"isFinalOrderStatus",(function(){return B})),n.d(e,"positionSideToText",(function(){return J})),n.d(e,"makeNonTradableSymbolText",(function(){return N}));var r=n("YFKU"),i=n("ivNn"),o=n("nc0P"),s=n("JES+"),c=n("EBrf"),u=n("ogJP"),d=n("txPx"),a=n("/udZ");const f={},h={},l={},p={};let m=!1;const g=Object(d.getLogger)("Trading.Utils");function x(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,t=>e[t])}function b(t){const e=[];return t&&Object.keys(t).forEach(n=>{e.push(x(n)+"="+x(t[n]))}),e.join("&")}function O(t){return y(),p[t]}function y(){m||(m=!0,f[2]=$.t("Market"),f[1]=$.t("Limit"),f[3]=$.t("Stop",{context:"order"}),f[4]=$.t("StopLimit"),h[1]=$.t("Buy",{context:"trading"}),h[-1]=$.t("Sell",{context:"trading"}),l[1]=$.t("Long",{context:"trading"}),l[-1]=$.t("Short",{context:"trading"}),p[2]=$.t("filled"),p[1]=$.t("cancelled"),p[6]=$.t("working"),p[3]=$.t("inactive"),p[4]=$.t("placing"),p[5]=$.t("rejected"))}function T(t,e){y();const n=h[t];return e?n.toUpperCase():n}function E(t,e){return y(),e?f[t].toUpperCase():f[t]}function j(t,e,n,r,i){const o={added:[],modified:[],removed:[]},s=t.slice(0);return e.forEach(e=>{const c=t.findIndex(t=>t[n]===e[n]);if(-1===c)return void o.added.push(e);s[c]=null;const d=t[c];for(const t of r){let n=!0;if(null===d[t]||"object"!=typeof d[t]?n=d[t]===e[t]:i&&(n=Object(u.deepEquals)(d[t],e[t])[0]),!n)return void o.modified.push(e)}}),s.forEach(t=>{t&&o.removed.push(t)}),o}function _(t){return Math.abs(t||0)<.001?"0.00":Object(c.splitThousands)((t||0).toFixed(2))}function w(t,e=[1,100,1e3,5e3]){
return function n(r){return t().catch(t=>{return r<e.length?(i=e[r],new Promise(t=>{setTimeout(t,i)})).then(()=>n(r+1)):Promise.reject(t);var i})}(0)}function v(t){return-1!==Object.keys(s.OrderOrPositionMessageType).map(t=>s.OrderOrPositionMessageType[t]).indexOf(t)}function F(t,e,n,r){let o=0;const s=Object(i.fixComputationError)(t/e);return(1===n&&1===r||2===n&&-1===r)&&(o=Math.floor(s)*e),(1===n&&-1===r||2===n&&1===r)&&(o=Math.ceil(s)*e),Object(i.fixComputationError)(o)}const P=Object(r.t)("Failed to login");class k{constructor(t){this._isFinished=!1,this._isTerminated=!1,this._tasks=t}execute(){return this._isTerminated=!1,this._isExecuted()&&!this._isFinished?this.terminate().then(()=>this._execution=this._execute()):this._execution=this._execute()}async terminate(){if(this._isExecuted()&&!this._isFinished){this._isTerminated=!0;try{await this._execution}catch(t){return void g.logWarn(t)}}}_isExecuted(){return!!this._execution}async _execute(){for(const e of this._tasks){if(this._isTerminated)throw new Error("Login tasks are terminated");try{await e()}catch(t){throw this._isFinished=!0,new a.a({detailedErrorMessage:`${P}${S(Object(a.c)(t))}`,userFriendlyMessage:`${P}${S(Object(a.b)(t))}`})}}this._isFinished=!0}}function S(t){return void 0===t||""===t?"":": "+t}function M(t){return(new o.Big(t).toFixed().split(".")[1]||"").length}function U(t){if(!t||!t.done)return t;const e=t;return new Promise((t,n)=>{e.done(e=>{t(e)}).fail(t=>{n(t)})})}function C(t){return t.indexOf("JPY")===t.length-3?.01:1e-4}function B(t){return-1!==[2,1,5].indexOf(t)}function J(t){return y(),l[t]}function N(t,e){return Object(r.t)("You can't trade the symbol {symbol} through {broker}.").replace("{symbol}",t).replace("{broker}",e)}},EBrf:function(t,e,n){"use strict";n.r(e),n.d(e,"splitThousands",(function(){return i}));var r=n("ivNn");function i(t,e="&nbsp;"){let n=t+"";-1!==n.indexOf("e")&&(n=function(t){return Object(r.fixComputationError)(t).toFixed(10).replace(/\.?0+$/,"")}(Number(t)));const i=n.split(".");return i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)+(i[1]?"."+i[1]:"")}}}]);